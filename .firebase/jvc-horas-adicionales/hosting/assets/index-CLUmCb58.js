const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/App-Bqo37XnI.js","assets/vendor-5br9Pmv5.js","assets/rolldown-runtime-DGruFWvd.js","assets/Main-uK7Yr_lq.js","assets/Profile-BJ9_LSmN.js","assets/useUserProfile-CYApFkuB.js","assets/CreateProfile-B5g_Bizc.js","assets/Dashboard-C-LWF351.js","assets/HoursForm-BweZhn07.js","assets/RecordDetail-DnwmRxMY.js"])))=>i.map(i=>d[i]);
import{r as e}from"./rolldown-runtime-DGruFWvd.js";import{$ as t,B as n,D as r,H as i,J as a,L as o,M as s,N as c,P as l,Q as u,T as d,Z as f,at as p,it as m,j as h,k as g,nt as _,q as v,rt as y}from"./vendor-5br9Pmv5.js";import{a as b,c as ee,d as x,f as S,i as C,l as w,n as T,o as E,p as D,r as O,s as te,t as k,u as ne}from"./firebase-BQfzf0di.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var A=y(),j=m(),M=p(),N=(0,M.createContext)(void 0),P=(0,M.createContext)(void 0),F=(0,M.createContext)(void 0);const I=()=>{let e=(0,M.useContext)(P);if(e===void 0)throw Error(`useProfileContext debe ser usado dentro de un UserProvider`);return e};var L=v(),R=()=>{let e=(0,A.c)(3),{isAuthenticated:t,isLoading:n}=I();if(n){let t;return e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,L.jsx)(`div`,{className:`flex h-screen w-full items-center justify-center bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-100`,children:(0,L.jsxs)(`div`,{className:`flex flex-col items-center gap-4`,children:[(0,L.jsx)(`div`,{className:`h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent`}),(0,L.jsx)(`p`,{className:`text-lg font-medium`,children:`Cargando...`})]})}),e[0]=t):t=e[0],t}if(!t){let t;return e[1]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,L.jsx)(f,{to:`/`,replace:!0}),e[1]=t):t=e[1],t}let r;return e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,L.jsx)(u,{}),e[2]=r):r=e[2],r},z=(0,M.lazy)(()=>_(()=>import(`./App-Bqo37XnI.js`),__vite__mapDeps([0,1,2,3]))),B=(0,M.lazy)(()=>_(()=>import(`./Profile-BJ9_LSmN.js`),__vite__mapDeps([4,1,2,3,5]))),V=(0,M.lazy)(()=>_(()=>import(`./CreateProfile-B5g_Bizc.js`),__vite__mapDeps([6,1,2,3,5]))),H=(0,M.lazy)(()=>_(()=>import(`./Dashboard-C-LWF351.js`),__vite__mapDeps([7,1,2,3,8,5]))),U=(0,M.lazy)(()=>_(()=>import(`./RecordDetail-DnwmRxMY.js`),__vite__mapDeps([9,1,2,3,8,5]))),W=t([{path:`/`,element:(0,L.jsx)(z,{})},{element:(0,L.jsx)(R,{}),children:[{path:`/dashboard`,element:(0,L.jsx)(H,{})},{path:`/record/:id`,element:(0,L.jsx)(U,{})},{path:`/profile`,element:(0,L.jsx)(B,{})},{path:`/create-profile`,element:(0,L.jsx)(V,{})}]},{path:`*`,element:(0,L.jsx)(f,{to:`/`,replace:!0})}]),G=y(),K=()=>{let e=(0,G.c)(1),t;return e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,L.jsx)(M.StrictMode,{children:(0,L.jsx)(a,{router:W})}),e[0]=t):t=e[0],t};const q=[{id:`theme-default`,name:`Default`,icon:d,color:`text-slate-800`},{id:`theme-light`,name:`Light`,icon:i,color:`text-amber-500`},{id:`theme-dark`,name:`Dark`,icon:s,color:`text-slate-200`},{id:`theme-diablo`,name:`Diablo`,icon:r,color:`text-red-600`},{id:`theme-duende`,name:`Duende del sur`,icon:g,color:`text-green-600`},{id:`theme-militar`,name:`Militar`,icon:n,color:`text-emerald-800`},{id:`theme-rockero`,name:`Rockero`,icon:c,color:`text-purple-600`},{id:`theme-comic`,name:`Cómic`,icon:l,color:`text-yellow-500`},{id:`theme-heroe`,name:`Héroe`,icon:h,color:`text-blue-600`},{id:`theme-espacio`,name:`Espacio`,icon:o,color:`text-indigo-600`}];var J=y();const Y=e=>{let t=(0,J.c)(10),{children:n}=e,[r,i]=(0,M.useState)(`Horas Adicionales`),[a,o]=(0,M.useState)(X),s;t[0]===a.id?s=t[1]:(s=()=>{document.documentElement.className=`${a.id} bg-cover bg-center bg-fixed`,localStorage.setItem(`selected-theme-id`,a.id)},t[0]=a.id,t[1]=s);let c;t[2]===a?c=t[3]:(c=[a],t[2]=a,t[3]=c),(0,M.useEffect)(s,c);let l;t[4]!==r||t[5]!==a?(l={appTitle:r,setAppTitle:i,selectedTheme:a,setSelectedTheme:o},t[4]=r,t[5]=a,t[6]=l):l=t[6];let u;return t[7]!==n||t[8]!==l?(u=(0,L.jsx)(N.Provider,{value:l,children:n}),t[7]=n,t[8]=l,t[9]=u):u=t[9],u};function X(){let e=localStorage.getItem(`selected-theme-id`);return q.find(t=>t.id===e)||q[0]}var Z=D({apiKey:`AIzaSyB8oFT-klNy6Xf4a14SIry84KpZGG_3-WI`,authDomain:`jvc-horas-adicionales.firebaseapp.com`,projectId:`jvc-horas-adicionales`,storageBucket:`jvc-horas-adicionales.firebasestorage.app`,messagingSenderId:`866926590864`,appId:`1:866926590864:web:e75c6829310a34bafbd115`});te(Z);var Q=b(Z),$=w(),re=y();const ie=e=>{let t=(0,re.c)(11),{children:n}=e,r;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r=new ee,t[0]=r):r=t[0];let i=r,a;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(a={displayName:``,photoURL:``,phoneNumber:``,email:``,isAuthenticated:!1,isLoading:!0},t[1]=a):a=t[1];let[o,s]=(0,M.useState)(a),c;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(c=(e,t,n,r)=>{s(i=>({...i,displayName:e,photoURL:t,phoneNumber:n,email:r}))},t[2]=c):c=t[2];let l=c,u;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(u=()=>{x($,i)},t[3]=u):u=t[3];let d=u,f=ae,p,m;t[4]===Symbol.for(`react.memo_cache_sentinel`)?(p=()=>{let e=ne($,e=>{if(e){let{displayName:t,photoURL:n,phoneNumber:r,email:i}=e;s({displayName:t||``,photoURL:n||``,phoneNumber:r||``,email:i||``,isAuthenticated:!0,isLoading:!1})}else s({displayName:``,photoURL:``,phoneNumber:``,email:``,isAuthenticated:!1,isLoading:!1})});return()=>e()},m=[],t[4]=p,t[5]=m):(p=t[4],m=t[5]),(0,M.useEffect)(p,m);let h;t[6]===o?h=t[7]:(h={...o,updateUserProfile:l,login:d,logout:f},t[6]=o,t[7]=h);let g;return t[8]!==n||t[9]!==h?(g=(0,L.jsx)(P.Provider,{value:h,children:n}),t[8]=n,t[9]=h,t[10]=g):g=t[10],g};function ae(){S($)}(0,j.createRoot)(document.getElementById(`root`)).render((0,L.jsx)(Y,{children:(0,L.jsx)(ie,{children:(0,L.jsx)(({children:e})=>{let t=(0,M.useContext)(P),[n,r]=(0,M.useState)(null),[i,a]=(0,M.useState)(!0),[o,s]=(0,M.useState)(null),c=(0,M.useCallback)(async()=>{if(!t?.isAuthenticated||!t.email){r(null),a(!1);return}a(!0),s(null);try{let e=$.currentUser;if(!e)throw Error(`No hay usuario autenticado en Firebase`);let t=await k(C(Q,`profiles`,e.uid));t.exists()?r(t.data()):(console.log(`No existe perfil para este usuario usuario.`),r(null))}catch(e){console.error(`Error fetching profile:`,e),s(e instanceof Error?e.message:`Error al cargar perfil`)}finally{a(!1)}},[t?.isAuthenticated,t?.email]);return(0,M.useEffect)(()=>{c()},[c]),(0,L.jsx)(F.Provider,{value:{userProfile:n,isLoading:i,error:o,updateProfile:async e=>{let t=$.currentUser;if(!t)throw Error(`Usuario no autenticado`);a(!0);try{let n=C(Q,`profiles`,t.uid),r=await k(n),i={...e,email:t.email||``,uid:t.uid,updatedAt:E()};r.exists()?await O(n,i):await T(n,{...i,createdAt:E(),totalHours:`0`,status:`Activo`}),await c()}catch(e){throw console.error(`Error updating profile:`,e),s(e instanceof Error?e.message:`Error desconocido`),e}finally{a(!1)}},refreshProfile:c},children:e})},{children:(0,L.jsx)(K,{})})})}));export{F as i,I as n,N as r,q as t};