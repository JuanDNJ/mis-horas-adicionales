const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/App-CM7IfL_n.js","assets/vendor-CuWPEnc8.js","assets/rolldown-runtime-DGruFWvd.js","assets/Main-B5QIXc64.js","assets/Profile-CBFuna4j.js","assets/useUserProfile-DVLzSzBY.js","assets/CreateProfile-CYnxoYZs.js","assets/firebase-CTKiUIgJ.js","assets/Dashboard-DTeu4P4D.js","assets/HoursForm-D56zjIA9.js","assets/RecordDetail-B5ZZqAQd.js"])))=>i.map(i=>d[i]);
import{r as e}from"./rolldown-runtime-DGruFWvd.js";import{F as t,I as n,K as r,L as i,N as a,Q as o,R as s,V as c,W as l,Z as u,ct as d,j as f,k as p,lt as m,nt as h,ot as g,rt as _,st as v,tt as y}from"./vendor-CuWPEnc8.js";import{C as b,E as ee,S as te,T as ne,_ as x,b as S,d as C,f as w,g as T,n as E,s as D,v as O,w as k,x as A,y as j}from"./firebase-CTKiUIgJ.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var M=v(),N=d(),P=m(),F=(0,P.createContext)(void 0),I=(0,P.createContext)(void 0),L=(0,P.createContext)(void 0);const R=()=>{let e=(0,P.useContext)(I);if(e===void 0)throw Error(`useProfileContext debe ser usado dentro de un UserProvider`);return e};var z=u(),B=()=>{let e=(0,M.c)(3),{isAuthenticated:t,isLoading:n}=R();if(n){let t;return e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,z.jsx)(`div`,{className:`flex h-screen w-full items-center justify-center bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-100`,children:(0,z.jsxs)(`div`,{className:`flex flex-col items-center gap-4`,children:[(0,z.jsx)(`div`,{className:`h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent`}),(0,z.jsx)(`p`,{className:`text-lg font-medium`,children:`Cargando...`})]})}),e[0]=t):t=e[0],t}if(!t){let t;return e[1]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,z.jsx)(y,{to:`/`,replace:!0}),e[1]=t):t=e[1],t}let r;return e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,z.jsx)(h,{}),e[2]=r):r=e[2],r},V=(0,P.lazy)(()=>g(()=>import(`./App-CM7IfL_n.js`),__vite__mapDeps([0,1,2,3]))),H=(0,P.lazy)(()=>g(()=>import(`./Profile-CBFuna4j.js`),__vite__mapDeps([4,1,2,3,5]))),U=(0,P.lazy)(()=>g(()=>import(`./CreateProfile-CYnxoYZs.js`),__vite__mapDeps([6,1,2,7,3,5]))),W=(0,P.lazy)(()=>g(()=>import(`./Dashboard-DTeu4P4D.js`),__vite__mapDeps([8,1,2,7,3,9,5]))),G=(0,P.lazy)(()=>g(()=>import(`./RecordDetail-B5ZZqAQd.js`),__vite__mapDeps([10,1,2,3,9,5]))),K=_([{path:`/`,element:(0,z.jsx)(V,{})},{element:(0,z.jsx)(B,{}),children:[{path:`/dashboard`,element:(0,z.jsx)(W,{})},{path:`/record/:id`,element:(0,z.jsx)(G,{})},{path:`/profile`,element:(0,z.jsx)(H,{})},{path:`/create-profile`,element:(0,z.jsx)(U,{})}]},{path:`*`,element:(0,z.jsx)(y,{to:`/`,replace:!0})}]),q=v(),J=()=>{let e=(0,q.c)(1),t;return e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,z.jsx)(P.StrictMode,{children:(0,z.jsx)(o,{router:K})}),e[0]=t):t=e[0],t};const Y=[{id:`theme-default`,name:`Default`,icon:p,color:`text-slate-800`},{id:`theme-light`,name:`Light`,icon:r,color:`text-amber-500`},{id:`theme-dark`,name:`Dark`,icon:n,color:`text-slate-200`},{id:`theme-diablo`,name:`Diablo`,icon:f,color:`text-red-600`},{id:`theme-duende`,name:`Duende del sur`,icon:a,color:`text-green-600`},{id:`theme-militar`,name:`Militar`,icon:l,color:`text-emerald-800`},{id:`theme-rockero`,name:`Rockero`,icon:i,color:`text-purple-600`},{id:`theme-comic`,name:`Cómic`,icon:s,color:`text-yellow-500`},{id:`theme-heroe`,name:`Héroe`,icon:t,color:`text-blue-600`},{id:`theme-espacio`,name:`Espacio`,icon:c,color:`text-indigo-600`}];var X=v();const re=e=>{let t=(0,X.c)(10),{children:n}=e,[r,i]=(0,P.useState)(`Horas Adicionales`),[a,o]=(0,P.useState)(ie),s;t[0]===a.id?s=t[1]:(s=()=>{document.documentElement.className=`${a.id} bg-cover bg-center bg-fixed`,localStorage.setItem(`selected-theme-id`,a.id)},t[0]=a.id,t[1]=s);let c;t[2]===a?c=t[3]:(c=[a],t[2]=a,t[3]=c),(0,P.useEffect)(s,c);let l;t[4]!==r||t[5]!==a?(l={appTitle:r,setAppTitle:i,selectedTheme:a,setSelectedTheme:o},t[4]=r,t[5]=a,t[6]=l):l=t[6];let u;return t[7]!==n||t[8]!==l?(u=(0,z.jsx)(F.Provider,{value:l,children:n}),t[7]=n,t[8]=l,t[9]=u):u=t[9],u};function ie(){let e=localStorage.getItem(`selected-theme-id`);return Y.find(t=>t.id===e)||Y[0]}var Z=ee({apiKey:`AIzaSyB8oFT-klNy6Xf4a14SIry84KpZGG_3-WI`,authDomain:`jvc-horas-adicionales.firebaseapp.com`,projectId:`jvc-horas-adicionales`,storageBucket:`jvc-horas-adicionales.firebasestorage.app`,messagingSenderId:`866926590864`,appId:`1:866926590864:web:e75c6829310a34bafbd115`});j(Z);var Q=x(Z),ae=E(Z),$=A(),oe=v();const se=e=>{let t=(0,oe.c)(11),{children:n}=e,r;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r=new S,t[0]=r):r=t[0];let i=r,a;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(a={displayName:``,photoURL:``,phoneNumber:``,email:``,isAuthenticated:!1,isLoading:!0},t[1]=a):a=t[1];let[o,s]=(0,P.useState)(a),c;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(c=(e,t,n,r)=>{s(i=>({...i,displayName:e,photoURL:t,phoneNumber:n,email:r}))},t[2]=c):c=t[2];let l=c,u;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(u=()=>{b($,i)},t[3]=u):u=t[3];let d=u,f=ce,p,m;t[4]===Symbol.for(`react.memo_cache_sentinel`)?(p=()=>{let e=te($,e=>{if(e){let{displayName:t,photoURL:n,phoneNumber:r,email:i}=e;s({displayName:t||``,photoURL:n||``,phoneNumber:r||``,email:i||``,isAuthenticated:!0,isLoading:!1})}else s({displayName:``,photoURL:``,phoneNumber:``,email:``,isAuthenticated:!1,isLoading:!1})});return()=>e()},m=[],t[4]=p,t[5]=m):(p=t[4],m=t[5]),(0,P.useEffect)(p,m);let h;t[6]===o?h=t[7]:(h={...o,updateUserProfile:l,login:d,logout:f},t[6]=o,t[7]=h);let g;return t[8]!==n||t[9]!==h?(g=(0,z.jsx)(I.Provider,{value:h,children:n}),t[8]=n,t[9]=h,t[10]=g):g=t[10],g};function ce(){k($)}(0,N.createRoot)(document.getElementById(`root`)).render((0,z.jsx)(re,{children:(0,z.jsx)(se,{children:(0,z.jsx)(({children:e})=>{let t=(0,P.useContext)(I),[n,r]=(0,P.useState)(null),[i,a]=(0,P.useState)(!0),[o,s]=(0,P.useState)(null),c=(0,P.useCallback)(async()=>{if(!t?.isAuthenticated||!t.email){r(null),a(!1);return}a(!0),s(null);try{let e=$.currentUser;if(!e)throw Error(`No hay usuario autenticado en Firebase`);let t=await D(T(Q,`profiles`,e.uid));t.exists()?r(t.data()):(console.log(`No existe perfil para este usuario usuario.`),r(null))}catch(e){console.error(`Error fetching profile:`,e),s(e instanceof Error?e.message:`Error al cargar perfil`)}finally{a(!1)}},[t?.isAuthenticated,t?.email]);return(0,P.useEffect)(()=>{c()},[c]),(0,z.jsx)(L.Provider,{value:{userProfile:n,isLoading:i,error:o,updateProfile:async e=>{let t=$.currentUser;if(!t)throw Error(`Usuario no autenticado`);a(!0);try{(e.displayName!==void 0||e.photoURL!==void 0)&&await ne(t,{displayName:e.displayName??t.displayName,photoURL:e.photoURL??t.photoURL});let n=T(Q,`profiles`,t.uid),r=await D(n),i={...e,email:t.email||``,uid:t.uid,updatedAt:O()};r.exists()?await w(n,i):await C(n,{...i,createdAt:O(),totalHours:`0`,status:`Activo`}),await c()}catch(e){throw console.error(`Error updating profile:`,e),s(e instanceof Error?e.message:`Error desconocido`),e}finally{a(!1)}},refreshProfile:c},children:e})},{children:(0,z.jsx)(J,{})})})}));export{R as a,Y as i,Q as n,F as o,ae as r,L as s,$ as t};