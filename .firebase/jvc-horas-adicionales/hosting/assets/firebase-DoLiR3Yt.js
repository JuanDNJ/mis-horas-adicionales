var e = () => void 0,
  t = function (e) {
    let t = [],
      n = 0;
    for (let r = 0; r < e.length; r++) {
      let i = e.charCodeAt(r);
      i < 128
        ? (t[n++] = i)
        : i < 2048
          ? ((t[n++] = (i >> 6) | 192), (t[n++] = (i & 63) | 128))
          : (i & 64512) == 55296 && r + 1 < e.length && (e.charCodeAt(r + 1) & 64512) == 56320
            ? ((i = 65536 + ((i & 1023) << 10) + (e.charCodeAt(++r) & 1023)),
              (t[n++] = (i >> 18) | 240),
              (t[n++] = ((i >> 12) & 63) | 128),
              (t[n++] = ((i >> 6) & 63) | 128),
              (t[n++] = (i & 63) | 128))
            : ((t[n++] = (i >> 12) | 224),
              (t[n++] = ((i >> 6) & 63) | 128),
              (t[n++] = (i & 63) | 128));
    }
    return t;
  },
  n = function (e) {
    let t = [],
      n = 0,
      r = 0;
    for (; n < e.length; ) {
      let i = e[n++];
      if (i < 128) t[r++] = String.fromCharCode(i);
      else if (i > 191 && i < 224) {
        let a = e[n++];
        t[r++] = String.fromCharCode(((i & 31) << 6) | (a & 63));
      } else if (i > 239 && i < 365) {
        let a = e[n++],
          o = e[n++],
          s = e[n++],
          c = (((i & 7) << 18) | ((a & 63) << 12) | ((o & 63) << 6) | (s & 63)) - 65536;
        ((t[r++] = String.fromCharCode(55296 + (c >> 10))),
          (t[r++] = String.fromCharCode(56320 + (c & 1023))));
      } else {
        let a = e[n++],
          o = e[n++];
        t[r++] = String.fromCharCode(((i & 15) << 12) | ((a & 63) << 6) | (o & 63));
      }
    }
    return t.join(``);
  },
  r = {
    byteToCharMap_: null,
    charToByteMap_: null,
    byteToCharMapWebSafe_: null,
    charToByteMapWebSafe_: null,
    ENCODED_VALS_BASE: `ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,
    get ENCODED_VALS() {
      return this.ENCODED_VALS_BASE + `+/=`;
    },
    get ENCODED_VALS_WEBSAFE() {
      return this.ENCODED_VALS_BASE + `-_.`;
    },
    HAS_NATIVE_SUPPORT: typeof atob == `function`,
    encodeByteArray(e, t) {
      if (!Array.isArray(e)) throw Error(`encodeByteArray takes an array as a parameter`);
      this.init_();
      let n = t ? this.byteToCharMapWebSafe_ : this.byteToCharMap_,
        r = [];
      for (let t = 0; t < e.length; t += 3) {
        let i = e[t],
          a = t + 1 < e.length,
          o = a ? e[t + 1] : 0,
          s = t + 2 < e.length,
          c = s ? e[t + 2] : 0,
          l = i >> 2,
          u = ((i & 3) << 4) | (o >> 4),
          d = ((o & 15) << 2) | (c >> 6),
          f = c & 63;
        (s || ((f = 64), a || (d = 64)), r.push(n[l], n[u], n[d], n[f]));
      }
      return r.join(``);
    },
    encodeString(e, n) {
      return this.HAS_NATIVE_SUPPORT && !n ? btoa(e) : this.encodeByteArray(t(e), n);
    },
    decodeString(e, t) {
      return this.HAS_NATIVE_SUPPORT && !t ? atob(e) : n(this.decodeStringToByteArray(e, t));
    },
    decodeStringToByteArray(e, t) {
      this.init_();
      let n = t ? this.charToByteMapWebSafe_ : this.charToByteMap_,
        r = [];
      for (let t = 0; t < e.length; ) {
        let a = n[e.charAt(t++)],
          o = t < e.length ? n[e.charAt(t)] : 0;
        ++t;
        let s = t < e.length ? n[e.charAt(t)] : 64;
        ++t;
        let c = t < e.length ? n[e.charAt(t)] : 64;
        if ((++t, a == null || o == null || s == null || c == null)) throw new i();
        let l = (a << 2) | (o >> 4);
        if ((r.push(l), s !== 64)) {
          let e = ((o << 4) & 240) | (s >> 2);
          if ((r.push(e), c !== 64)) {
            let e = ((s << 6) & 192) | c;
            r.push(e);
          }
        }
      }
      return r;
    },
    init_() {
      if (!this.byteToCharMap_) {
        ((this.byteToCharMap_ = {}),
          (this.charToByteMap_ = {}),
          (this.byteToCharMapWebSafe_ = {}),
          (this.charToByteMapWebSafe_ = {}));
        for (let e = 0; e < this.ENCODED_VALS.length; e++)
          ((this.byteToCharMap_[e] = this.ENCODED_VALS.charAt(e)),
            (this.charToByteMap_[this.byteToCharMap_[e]] = e),
            (this.byteToCharMapWebSafe_[e] = this.ENCODED_VALS_WEBSAFE.charAt(e)),
            (this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]] = e),
            e >= this.ENCODED_VALS_BASE.length &&
              ((this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)] = e),
              (this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)] = e)));
      }
    },
  },
  i = class extends Error {
    constructor() {
      (super(...arguments), (this.name = `DecodeBase64StringError`));
    }
  },
  a = function (e) {
    let n = t(e);
    return r.encodeByteArray(n, !0);
  },
  o = function (e) {
    return a(e).replace(/\./g, ``);
  },
  s = function (e) {
    try {
      return r.decodeString(e, !0);
    } catch (e) {
      console.error(`base64Decode failed: `, e);
    }
    return null;
  };
function c() {
  if (typeof self < `u`) return self;
  if (typeof window < `u`) return window;
  if (typeof global < `u`) return global;
  throw Error(`Unable to locate global object.`);
}
var l = () => c().__FIREBASE_DEFAULTS__,
  u = () => {
    if (typeof process > `u`) return;
    let e = {}.__FIREBASE_DEFAULTS__;
    if (e) return JSON.parse(e);
  },
  d = () => {
    if (typeof document > `u`) return;
    let e;
    try {
      e = document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/);
    } catch {
      return;
    }
    let t = e && s(e[1]);
    return t && JSON.parse(t);
  },
  f = () => {
    try {
      return e() || l() || u() || d();
    } catch (e) {
      console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);
      return;
    }
  },
  p = (e) => f()?.emulatorHosts?.[e],
  m = (e) => {
    let t = p(e);
    if (!t) return;
    let n = t.lastIndexOf(`:`);
    if (n <= 0 || n + 1 === t.length)
      throw Error(`Invalid host ${t} with no separate hostname and port!`);
    let r = parseInt(t.substring(n + 1), 10);
    return t[0] === `[` ? [t.substring(1, n - 1), r] : [t.substring(0, n), r];
  },
  h = () => f()?.config,
  g = (e) => f()?.[`_${e}`],
  ee = class {
    constructor() {
      ((this.reject = () => {}),
        (this.resolve = () => {}),
        (this.promise = new Promise((e, t) => {
          ((this.resolve = e), (this.reject = t));
        })));
    }
    wrapCallback(e) {
      return (t, n) => {
        (t ? this.reject(t) : this.resolve(n),
          typeof e == `function` &&
            (this.promise.catch(() => {}), e.length === 1 ? e(t) : e(t, n)));
      };
    }
  };
function te(e) {
  try {
    return (e.startsWith(`http://`) || e.startsWith(`https://`) ? new URL(e).hostname : e).endsWith(
      `.cloudworkstations.dev`
    );
  } catch {
    return !1;
  }
}
async function ne(e) {
  return (await fetch(e, { credentials: `include` })).ok;
}
function re(e, t) {
  if (e.uid)
    throw Error(
      `The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.`
    );
  let n = { alg: `none`, type: `JWT` },
    r = t || `demo-project`,
    i = e.iat || 0,
    a = e.sub || e.user_id;
  if (!a) throw Error(`mockUserToken must contain 'sub' or 'user_id' field!`);
  let s = {
    iss: `https://securetoken.google.com/${r}`,
    aud: r,
    iat: i,
    exp: i + 3600,
    auth_time: i,
    sub: a,
    user_id: a,
    firebase: { sign_in_provider: `custom`, identities: {} },
    ...e,
  };
  return [o(JSON.stringify(n)), o(JSON.stringify(s)), ``].join(`.`);
}
var ie = {};
function ae() {
  let e = { prod: [], emulator: [] };
  for (let t of Object.keys(ie)) ie[t] ? e.emulator.push(t) : e.prod.push(t);
  return e;
}
function oe(e) {
  let t = document.getElementById(e),
    n = !1;
  return (
    t || ((t = document.createElement(`div`)), t.setAttribute(`id`, e), (n = !0)),
    { created: n, element: t }
  );
}
var se = !1;
function ce(e, t) {
  if (
    typeof window > `u` ||
    typeof document > `u` ||
    !te(window.location.host) ||
    ie[e] === t ||
    ie[e] ||
    se
  )
    return;
  ie[e] = t;
  function n(e) {
    return `__firebase__banner__${e}`;
  }
  let r = `__firebase__banner`,
    i = ae().prod.length > 0;
  function a() {
    let e = document.getElementById(r);
    e && e.remove();
  }
  function o(e) {
    ((e.style.display = `flex`),
      (e.style.background = `#7faaf0`),
      (e.style.position = `fixed`),
      (e.style.bottom = `5px`),
      (e.style.left = `5px`),
      (e.style.padding = `.5em`),
      (e.style.borderRadius = `5px`),
      (e.style.alignItems = `center`));
  }
  function s(e, t) {
    (e.setAttribute(`width`, `24`),
      e.setAttribute(`id`, t),
      e.setAttribute(`height`, `24`),
      e.setAttribute(`viewBox`, `0 0 24 24`),
      e.setAttribute(`fill`, `none`),
      (e.style.marginLeft = `-6px`));
  }
  function c() {
    let e = document.createElement(`span`);
    return (
      (e.style.cursor = `pointer`),
      (e.style.marginLeft = `16px`),
      (e.style.fontSize = `24px`),
      (e.innerHTML = ` &times;`),
      (e.onclick = () => {
        ((se = !0), a());
      }),
      e
    );
  }
  function l(e, t) {
    (e.setAttribute(`id`, t),
      (e.innerText = `Learn more`),
      (e.href = `https://firebase.google.com/docs/studio/preview-apps#preview-backend`),
      e.setAttribute(`target`, `__blank`),
      (e.style.paddingLeft = `5px`),
      (e.style.textDecoration = `underline`));
  }
  function u() {
    let e = oe(r),
      t = n(`text`),
      a = document.getElementById(t) || document.createElement(`span`),
      u = n(`learnmore`),
      d = document.getElementById(u) || document.createElement(`a`),
      f = n(`preprendIcon`),
      p =
        document.getElementById(f) || document.createElementNS(`http://www.w3.org/2000/svg`, `svg`);
    if (e.created) {
      let t = e.element;
      (o(t), l(d, u));
      let n = c();
      (s(p, f), t.append(p, a, d, n), document.body.appendChild(t));
    }
    (i
      ? ((a.innerText = `Preview backend disconnected.`),
        (p.innerHTML = `<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`))
      : ((p.innerHTML = `<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`),
        (a.innerText = `Preview backend running in this workspace.`)),
      a.setAttribute(`id`, t));
  }
  document.readyState === `loading` ? window.addEventListener(`DOMContentLoaded`, u) : u();
}
function _() {
  return typeof navigator < `u` && typeof navigator.userAgent == `string`
    ? navigator.userAgent
    : ``;
}
function v() {
  return (
    typeof window < `u` &&
    !!(window.cordova || window.phonegap || window.PhoneGap) &&
    /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_())
  );
}
function le() {
  let e = f()?.forceEnvironment;
  if (e === `node`) return !0;
  if (e === `browser`) return !1;
  try {
    return Object.prototype.toString.call(global.process) === `[object process]`;
  } catch {
    return !1;
  }
}
function ue() {
  return typeof navigator < `u` && navigator.userAgent === `Cloudflare-Workers`;
}
function de() {
  let e =
    typeof chrome == `object`
      ? chrome.runtime
      : typeof browser == `object`
        ? browser.runtime
        : void 0;
  return typeof e == `object` && e.id !== void 0;
}
function fe() {
  return typeof navigator == `object` && navigator.product === `ReactNative`;
}
function pe() {
  let e = _();
  return e.indexOf(`MSIE `) >= 0 || e.indexOf(`Trident/`) >= 0;
}
function me() {
  return (
    !le() &&
    !!navigator.userAgent &&
    navigator.userAgent.includes(`Safari`) &&
    !navigator.userAgent.includes(`Chrome`)
  );
}
function he() {
  try {
    return typeof indexedDB == `object`;
  } catch {
    return !1;
  }
}
function ge() {
  return new Promise((e, t) => {
    try {
      let n = !0,
        r = `validate-browser-context-for-indexeddb-analytics-module`,
        i = self.indexedDB.open(r);
      ((i.onsuccess = () => {
        (i.result.close(), n || self.indexedDB.deleteDatabase(r), e(!0));
      }),
        (i.onupgradeneeded = () => {
          n = !1;
        }),
        (i.onerror = () => {
          t(i.error?.message || ``);
        }));
    } catch (e) {
      t(e);
    }
  });
}
function _e() {
  return !(typeof navigator > `u` || !navigator.cookieEnabled);
}
var ve = `FirebaseError`,
  ye = class e extends Error {
    constructor(t, n, r) {
      (super(n),
        (this.code = t),
        (this.customData = r),
        (this.name = ve),
        Object.setPrototypeOf(this, e.prototype),
        Error.captureStackTrace && Error.captureStackTrace(this, be.prototype.create));
    }
  },
  be = class {
    constructor(e, t, n) {
      ((this.service = e), (this.serviceName = t), (this.errors = n));
    }
    create(e, ...t) {
      let n = t[0] || {},
        r = `${this.service}/${e}`,
        i = this.errors[e],
        a = i ? xe(i, n) : `Error`;
      return new ye(r, `${this.serviceName}: ${a} (${r}).`, n);
    }
  };
function xe(e, t) {
  return e.replace(Se, (e, n) => {
    let r = t[n];
    return r == null ? `<${n}?>` : String(r);
  });
}
var Se = /\{\$([^}]+)}/g;
function Ce(e) {
  for (let t in e) if (Object.prototype.hasOwnProperty.call(e, t)) return !1;
  return !0;
}
function we(e, t) {
  if (e === t) return !0;
  let n = Object.keys(e),
    r = Object.keys(t);
  for (let i of n) {
    if (!r.includes(i)) return !1;
    let n = e[i],
      a = t[i];
    if (Te(n) && Te(a)) {
      if (!we(n, a)) return !1;
    } else if (n !== a) return !1;
  }
  for (let e of r) if (!n.includes(e)) return !1;
  return !0;
}
function Te(e) {
  return typeof e == `object` && !!e;
}
function Ee(e) {
  let t = [];
  for (let [n, r] of Object.entries(e))
    Array.isArray(r)
      ? r.forEach((e) => {
          t.push(encodeURIComponent(n) + `=` + encodeURIComponent(e));
        })
      : t.push(encodeURIComponent(n) + `=` + encodeURIComponent(r));
  return t.length ? `&` + t.join(`&`) : ``;
}
function De(e) {
  let t = {};
  return (
    e
      .replace(/^\?/, ``)
      .split(`&`)
      .forEach((e) => {
        if (e) {
          let [n, r] = e.split(`=`);
          t[decodeURIComponent(n)] = decodeURIComponent(r);
        }
      }),
    t
  );
}
function Oe(e) {
  let t = e.indexOf(`?`);
  if (!t) return ``;
  let n = e.indexOf(`#`, t);
  return e.substring(t, n > 0 ? n : void 0);
}
function ke(e, t) {
  let n = new Ae(e, t);
  return n.subscribe.bind(n);
}
var Ae = class {
  constructor(e, t) {
    ((this.observers = []),
      (this.unsubscribes = []),
      (this.observerCount = 0),
      (this.task = Promise.resolve()),
      (this.finalized = !1),
      (this.onNoObservers = t),
      this.task
        .then(() => {
          e(this);
        })
        .catch((e) => {
          this.error(e);
        }));
  }
  next(e) {
    this.forEachObserver((t) => {
      t.next(e);
    });
  }
  error(e) {
    (this.forEachObserver((t) => {
      t.error(e);
    }),
      this.close(e));
  }
  complete() {
    (this.forEachObserver((e) => {
      e.complete();
    }),
      this.close());
  }
  subscribe(e, t, n) {
    let r;
    if (e === void 0 && t === void 0 && n === void 0) throw Error(`Missing Observer.`);
    ((r = je(e, [`next`, `error`, `complete`]) ? e : { next: e, error: t, complete: n }),
      r.next === void 0 && (r.next = Me),
      r.error === void 0 && (r.error = Me),
      r.complete === void 0 && (r.complete = Me));
    let i = this.unsubscribeOne.bind(this, this.observers.length);
    return (
      this.finalized &&
        this.task.then(() => {
          try {
            this.finalError ? r.error(this.finalError) : r.complete();
          } catch {}
        }),
      this.observers.push(r),
      i
    );
  }
  unsubscribeOne(e) {
    this.observers === void 0 ||
      this.observers[e] === void 0 ||
      (delete this.observers[e],
      --this.observerCount,
      this.observerCount === 0 && this.onNoObservers !== void 0 && this.onNoObservers(this));
  }
  forEachObserver(e) {
    if (!this.finalized) for (let t = 0; t < this.observers.length; t++) this.sendOne(t, e);
  }
  sendOne(e, t) {
    this.task.then(() => {
      if (this.observers !== void 0 && this.observers[e] !== void 0)
        try {
          t(this.observers[e]);
        } catch (e) {
          typeof console < `u` && console.error && console.error(e);
        }
    });
  }
  close(e) {
    this.finalized ||
      ((this.finalized = !0),
      e !== void 0 && (this.finalError = e),
      this.task.then(() => {
        ((this.observers = void 0), (this.onNoObservers = void 0));
      }));
  }
};
function je(e, t) {
  if (typeof e != `object` || !e) return !1;
  for (let n of t) if (n in e && typeof e[n] == `function`) return !0;
  return !1;
}
function Me() {}
var Ne = 1e3,
  Pe = 2,
  Fe = 14400 * 1e3,
  Ie = 0.5;
function y(e, t = Ne, n = Pe) {
  let r = t * n ** +e,
    i = Math.round(Ie * r * (Math.random() - 0.5) * 2);
  return Math.min(Fe, r + i);
}
function b(e) {
  return e && e._delegate ? e._delegate : e;
}
var x = class {
    constructor(e, t, n) {
      ((this.name = e),
        (this.instanceFactory = t),
        (this.type = n),
        (this.multipleInstances = !1),
        (this.serviceProps = {}),
        (this.instantiationMode = `LAZY`),
        (this.onInstanceCreated = null));
    }
    setInstantiationMode(e) {
      return ((this.instantiationMode = e), this);
    }
    setMultipleInstances(e) {
      return ((this.multipleInstances = e), this);
    }
    setServiceProps(e) {
      return ((this.serviceProps = e), this);
    }
    setInstanceCreatedCallback(e) {
      return ((this.onInstanceCreated = e), this);
    }
  },
  Le = `[DEFAULT]`,
  Re = class {
    constructor(e, t) {
      ((this.name = e),
        (this.container = t),
        (this.component = null),
        (this.instances = new Map()),
        (this.instancesDeferred = new Map()),
        (this.instancesOptions = new Map()),
        (this.onInitCallbacks = new Map()));
    }
    get(e) {
      let t = this.normalizeInstanceIdentifier(e);
      if (!this.instancesDeferred.has(t)) {
        let e = new ee();
        if (
          (this.instancesDeferred.set(t, e), this.isInitialized(t) || this.shouldAutoInitialize())
        )
          try {
            let n = this.getOrInitializeService({ instanceIdentifier: t });
            n && e.resolve(n);
          } catch {}
      }
      return this.instancesDeferred.get(t).promise;
    }
    getImmediate(e) {
      let t = this.normalizeInstanceIdentifier(e?.identifier),
        n = e?.optional ?? !1;
      if (this.isInitialized(t) || this.shouldAutoInitialize())
        try {
          return this.getOrInitializeService({ instanceIdentifier: t });
        } catch (e) {
          if (n) return null;
          throw e;
        }
      else if (n) return null;
      else throw Error(`Service ${this.name} is not available`);
    }
    getComponent() {
      return this.component;
    }
    setComponent(e) {
      if (e.name !== this.name)
        throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);
      if (this.component) throw Error(`Component for ${this.name} has already been provided`);
      if (((this.component = e), this.shouldAutoInitialize())) {
        if (Be(e))
          try {
            this.getOrInitializeService({ instanceIdentifier: Le });
          } catch {}
        for (let [e, t] of this.instancesDeferred.entries()) {
          let n = this.normalizeInstanceIdentifier(e);
          try {
            let e = this.getOrInitializeService({ instanceIdentifier: n });
            t.resolve(e);
          } catch {}
        }
      }
    }
    clearInstance(e = Le) {
      (this.instancesDeferred.delete(e), this.instancesOptions.delete(e), this.instances.delete(e));
    }
    async delete() {
      let e = Array.from(this.instances.values());
      await Promise.all([
        ...e.filter((e) => `INTERNAL` in e).map((e) => e.INTERNAL.delete()),
        ...e.filter((e) => `_delete` in e).map((e) => e._delete()),
      ]);
    }
    isComponentSet() {
      return this.component != null;
    }
    isInitialized(e = Le) {
      return this.instances.has(e);
    }
    getOptions(e = Le) {
      return this.instancesOptions.get(e) || {};
    }
    initialize(e = {}) {
      let { options: t = {} } = e,
        n = this.normalizeInstanceIdentifier(e.instanceIdentifier);
      if (this.isInitialized(n)) throw Error(`${this.name}(${n}) has already been initialized`);
      if (!this.isComponentSet()) throw Error(`Component ${this.name} has not been registered yet`);
      let r = this.getOrInitializeService({ instanceIdentifier: n, options: t });
      for (let [e, t] of this.instancesDeferred.entries())
        n === this.normalizeInstanceIdentifier(e) && t.resolve(r);
      return r;
    }
    onInit(e, t) {
      let n = this.normalizeInstanceIdentifier(t),
        r = this.onInitCallbacks.get(n) ?? new Set();
      (r.add(e), this.onInitCallbacks.set(n, r));
      let i = this.instances.get(n);
      return (
        i && e(i, n),
        () => {
          r.delete(e);
        }
      );
    }
    invokeOnInitCallbacks(e, t) {
      let n = this.onInitCallbacks.get(t);
      if (n)
        for (let r of n)
          try {
            r(e, t);
          } catch {}
    }
    getOrInitializeService({ instanceIdentifier: e, options: t = {} }) {
      let n = this.instances.get(e);
      if (
        !n &&
        this.component &&
        ((n = this.component.instanceFactory(this.container, {
          instanceIdentifier: ze(e),
          options: t,
        })),
        this.instances.set(e, n),
        this.instancesOptions.set(e, t),
        this.invokeOnInitCallbacks(n, e),
        this.component.onInstanceCreated)
      )
        try {
          this.component.onInstanceCreated(this.container, e, n);
        } catch {}
      return n || null;
    }
    normalizeInstanceIdentifier(e = Le) {
      return this.component ? (this.component.multipleInstances ? e : Le) : e;
    }
    shouldAutoInitialize() {
      return !!this.component && this.component.instantiationMode !== `EXPLICIT`;
    }
  };
function ze(e) {
  return e === Le ? void 0 : e;
}
function Be(e) {
  return e.instantiationMode === `EAGER`;
}
var Ve = class {
    constructor(e) {
      ((this.name = e), (this.providers = new Map()));
    }
    addComponent(e) {
      let t = this.getProvider(e.name);
      if (t.isComponentSet())
        throw Error(`Component ${e.name} has already been registered with ${this.name}`);
      t.setComponent(e);
    }
    addOrOverwriteComponent(e) {
      (this.getProvider(e.name).isComponentSet() && this.providers.delete(e.name),
        this.addComponent(e));
    }
    getProvider(e) {
      if (this.providers.has(e)) return this.providers.get(e);
      let t = new Re(e, this);
      return (this.providers.set(e, t), t);
    }
    getProviders() {
      return Array.from(this.providers.values());
    }
  },
  He = [],
  S;
(function (e) {
  ((e[(e.DEBUG = 0)] = `DEBUG`),
    (e[(e.VERBOSE = 1)] = `VERBOSE`),
    (e[(e.INFO = 2)] = `INFO`),
    (e[(e.WARN = 3)] = `WARN`),
    (e[(e.ERROR = 4)] = `ERROR`),
    (e[(e.SILENT = 5)] = `SILENT`));
})((S ||= {}));
var Ue = {
    debug: S.DEBUG,
    verbose: S.VERBOSE,
    info: S.INFO,
    warn: S.WARN,
    error: S.ERROR,
    silent: S.SILENT,
  },
  We = S.INFO,
  Ge = {
    [S.DEBUG]: `log`,
    [S.VERBOSE]: `log`,
    [S.INFO]: `info`,
    [S.WARN]: `warn`,
    [S.ERROR]: `error`,
  },
  Ke = (e, t, ...n) => {
    if (t < e.logLevel) return;
    let r = new Date().toISOString(),
      i = Ge[t];
    if (i) console[i](`[${r}]  ${e.name}:`, ...n);
    else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`);
  },
  qe = class {
    constructor(e) {
      ((this.name = e),
        (this._logLevel = We),
        (this._logHandler = Ke),
        (this._userLogHandler = null),
        He.push(this));
    }
    get logLevel() {
      return this._logLevel;
    }
    set logLevel(e) {
      if (!(e in S)) throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);
      this._logLevel = e;
    }
    setLogLevel(e) {
      this._logLevel = typeof e == `string` ? Ue[e] : e;
    }
    get logHandler() {
      return this._logHandler;
    }
    set logHandler(e) {
      if (typeof e != `function`)
        throw TypeError("Value assigned to `logHandler` must be a function");
      this._logHandler = e;
    }
    get userLogHandler() {
      return this._userLogHandler;
    }
    set userLogHandler(e) {
      this._userLogHandler = e;
    }
    debug(...e) {
      (this._userLogHandler && this._userLogHandler(this, S.DEBUG, ...e),
        this._logHandler(this, S.DEBUG, ...e));
    }
    log(...e) {
      (this._userLogHandler && this._userLogHandler(this, S.VERBOSE, ...e),
        this._logHandler(this, S.VERBOSE, ...e));
    }
    info(...e) {
      (this._userLogHandler && this._userLogHandler(this, S.INFO, ...e),
        this._logHandler(this, S.INFO, ...e));
    }
    warn(...e) {
      (this._userLogHandler && this._userLogHandler(this, S.WARN, ...e),
        this._logHandler(this, S.WARN, ...e));
    }
    error(...e) {
      (this._userLogHandler && this._userLogHandler(this, S.ERROR, ...e),
        this._logHandler(this, S.ERROR, ...e));
    }
  },
  Je = (e, t) => t.some((t) => e instanceof t),
  Ye,
  Xe;
function Ze() {
  return (Ye ||= [IDBDatabase, IDBObjectStore, IDBIndex, IDBCursor, IDBTransaction]);
}
function Qe() {
  return (Xe ||= [
    IDBCursor.prototype.advance,
    IDBCursor.prototype.continue,
    IDBCursor.prototype.continuePrimaryKey,
  ]);
}
var $e = new WeakMap(),
  et = new WeakMap(),
  tt = new WeakMap(),
  C = new WeakMap(),
  nt = new WeakMap();
function rt(e) {
  let t = new Promise((t, n) => {
    let r = () => {
        (e.removeEventListener(`success`, i), e.removeEventListener(`error`, a));
      },
      i = () => {
        (t(lt(e.result)), r());
      },
      a = () => {
        (n(e.error), r());
      };
    (e.addEventListener(`success`, i), e.addEventListener(`error`, a));
  });
  return (
    t
      .then((t) => {
        t instanceof IDBCursor && $e.set(t, e);
      })
      .catch(() => {}),
    nt.set(t, e),
    t
  );
}
function it(e) {
  if (et.has(e)) return;
  let t = new Promise((t, n) => {
    let r = () => {
        (e.removeEventListener(`complete`, i),
          e.removeEventListener(`error`, a),
          e.removeEventListener(`abort`, a));
      },
      i = () => {
        (t(), r());
      },
      a = () => {
        (n(e.error || new DOMException(`AbortError`, `AbortError`)), r());
      };
    (e.addEventListener(`complete`, i),
      e.addEventListener(`error`, a),
      e.addEventListener(`abort`, a));
  });
  et.set(e, t);
}
var at = {
  get(e, t, n) {
    if (e instanceof IDBTransaction) {
      if (t === `done`) return et.get(e);
      if (t === `objectStoreNames`) return e.objectStoreNames || tt.get(e);
      if (t === `store`)
        return n.objectStoreNames[1] ? void 0 : n.objectStore(n.objectStoreNames[0]);
    }
    return lt(e[t]);
  },
  set(e, t, n) {
    return ((e[t] = n), !0);
  },
  has(e, t) {
    return e instanceof IDBTransaction && (t === `done` || t === `store`) ? !0 : t in e;
  },
};
function ot(e) {
  at = e(at);
}
function st(e) {
  return e === IDBDatabase.prototype.transaction &&
    !(`objectStoreNames` in IDBTransaction.prototype)
    ? function (t, ...n) {
        let r = e.call(ut(this), t, ...n);
        return (tt.set(r, t.sort ? t.sort() : [t]), lt(r));
      }
    : Qe().includes(e)
      ? function (...t) {
          return (e.apply(ut(this), t), lt($e.get(this)));
        }
      : function (...t) {
          return lt(e.apply(ut(this), t));
        };
}
function ct(e) {
  return typeof e == `function`
    ? st(e)
    : (e instanceof IDBTransaction && it(e), Je(e, Ze()) ? new Proxy(e, at) : e);
}
function lt(e) {
  if (e instanceof IDBRequest) return rt(e);
  if (C.has(e)) return C.get(e);
  let t = ct(e);
  return (t !== e && (C.set(e, t), nt.set(t, e)), t);
}
var ut = (e) => nt.get(e);
function dt(e, t, { blocked: n, upgrade: r, blocking: i, terminated: a } = {}) {
  let o = indexedDB.open(e, t),
    s = lt(o);
  return (
    r &&
      o.addEventListener(`upgradeneeded`, (e) => {
        r(lt(o.result), e.oldVersion, e.newVersion, lt(o.transaction), e);
      }),
    n && o.addEventListener(`blocked`, (e) => n(e.oldVersion, e.newVersion, e)),
    s
      .then((e) => {
        (a && e.addEventListener(`close`, () => a()),
          i && e.addEventListener(`versionchange`, (e) => i(e.oldVersion, e.newVersion, e)));
      })
      .catch(() => {}),
    s
  );
}
var ft = [`get`, `getKey`, `getAll`, `getAllKeys`, `count`],
  pt = [`put`, `add`, `delete`, `clear`],
  mt = new Map();
function ht(e, t) {
  if (!(e instanceof IDBDatabase && !(t in e) && typeof t == `string`)) return;
  if (mt.get(t)) return mt.get(t);
  let n = t.replace(/FromIndex$/, ``),
    r = t !== n,
    i = pt.includes(n);
  if (!(n in (r ? IDBIndex : IDBObjectStore).prototype) || !(i || ft.includes(n))) return;
  let a = async function (e, ...t) {
    let a = this.transaction(e, i ? `readwrite` : `readonly`),
      o = a.store;
    return (r && (o = o.index(t.shift())), (await Promise.all([o[n](...t), i && a.done]))[0]);
  };
  return (mt.set(t, a), a);
}
ot((e) => ({
  ...e,
  get: (t, n, r) => ht(t, n) || e.get(t, n, r),
  has: (t, n) => !!ht(t, n) || e.has(t, n),
}));
var gt = class {
  constructor(e) {
    this.container = e;
  }
  getPlatformInfoString() {
    return this.container
      .getProviders()
      .map((e) => {
        if (_t(e)) {
          let t = e.getImmediate();
          return `${t.library}/${t.version}`;
        } else return null;
      })
      .filter((e) => e)
      .join(` `);
  }
};
function _t(e) {
  return e.getComponent()?.type === `VERSION`;
}
var vt = `@firebase/app`,
  yt = `0.14.7`,
  bt = new qe(`@firebase/app`),
  xt = `@firebase/app-compat`,
  St = `@firebase/analytics-compat`,
  Ct = `@firebase/analytics`,
  wt = `@firebase/app-check-compat`,
  Tt = `@firebase/app-check`,
  Et = `@firebase/auth`,
  Dt = `@firebase/auth-compat`,
  Ot = `@firebase/database`,
  kt = `@firebase/data-connect`,
  At = `@firebase/database-compat`,
  jt = `@firebase/functions`,
  Mt = `@firebase/functions-compat`,
  Nt = `@firebase/installations`,
  Pt = `@firebase/installations-compat`,
  Ft = `@firebase/messaging`,
  It = `@firebase/messaging-compat`,
  Lt = `@firebase/performance`,
  Rt = `@firebase/performance-compat`,
  zt = `@firebase/remote-config`,
  Bt = `@firebase/remote-config-compat`,
  Vt = `@firebase/storage`,
  Ht = `@firebase/storage-compat`,
  Ut = `@firebase/firestore`,
  Wt = `@firebase/ai`,
  Gt = `@firebase/firestore-compat`,
  w = `firebase`,
  Kt = `12.8.0`,
  qt = `[DEFAULT]`,
  Jt = {
    [vt]: `fire-core`,
    [xt]: `fire-core-compat`,
    [Ct]: `fire-analytics`,
    [St]: `fire-analytics-compat`,
    [Tt]: `fire-app-check`,
    [wt]: `fire-app-check-compat`,
    [Et]: `fire-auth`,
    [Dt]: `fire-auth-compat`,
    [Ot]: `fire-rtdb`,
    [kt]: `fire-data-connect`,
    [At]: `fire-rtdb-compat`,
    [jt]: `fire-fn`,
    [Mt]: `fire-fn-compat`,
    [Nt]: `fire-iid`,
    [Pt]: `fire-iid-compat`,
    [Ft]: `fire-fcm`,
    [It]: `fire-fcm-compat`,
    [Lt]: `fire-perf`,
    [Rt]: `fire-perf-compat`,
    [zt]: `fire-rc`,
    [Bt]: `fire-rc-compat`,
    [Vt]: `fire-gcs`,
    [Ht]: `fire-gcs-compat`,
    [Ut]: `fire-fst`,
    [Gt]: `fire-fst-compat`,
    [Wt]: `fire-vertex`,
    "fire-js": `fire-js`,
    [w]: `fire-js-all`,
  },
  Yt = new Map(),
  Xt = new Map(),
  Zt = new Map();
function Qt(e, t) {
  try {
    e.container.addComponent(t);
  } catch (n) {
    bt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`, n);
  }
}
function $t(e) {
  let t = e.name;
  if (Zt.has(t)) return (bt.debug(`There were multiple attempts to register component ${t}.`), !1);
  Zt.set(t, e);
  for (let t of Yt.values()) Qt(t, e);
  for (let t of Xt.values()) Qt(t, e);
  return !0;
}
function en(e, t) {
  let n = e.container.getProvider(`heartbeat`).getImmediate({ optional: !0 });
  return (n && n.triggerHeartbeat(), e.container.getProvider(t));
}
function T(e) {
  return e == null ? !1 : e.settings !== void 0;
}
var E = new be(`app`, `Firebase`, {
    "no-app": `No Firebase App '{$appName}' has been created - call initializeApp() first`,
    "bad-app-name": `Illegal App name: '{$appName}'`,
    "duplicate-app": `Firebase App named '{$appName}' already exists with different options or config`,
    "app-deleted": `Firebase App named '{$appName}' already deleted`,
    "server-app-deleted": `Firebase Server App has been deleted`,
    "no-options": `Need to provide options, when not being deployed to hosting via source.`,
    "invalid-app-argument": `firebase.{$appName}() takes either no argument or a Firebase App instance.`,
    "invalid-log-argument": "First argument to `onLog` must be null or a function.",
    "idb-open": `Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,
    "idb-get": `Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,
    "idb-set": `Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,
    "idb-delete": `Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,
    "finalization-registry-not-supported": `FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,
    "invalid-server-app-environment": `FirebaseServerApp is not for use in browser environments.`,
  }),
  tn = class {
    constructor(e, t, n) {
      ((this._isDeleted = !1),
        (this._options = { ...e }),
        (this._config = { ...t }),
        (this._name = t.name),
        (this._automaticDataCollectionEnabled = t.automaticDataCollectionEnabled),
        (this._container = n),
        this.container.addComponent(new x(`app`, () => this, `PUBLIC`)));
    }
    get automaticDataCollectionEnabled() {
      return (this.checkDestroyed(), this._automaticDataCollectionEnabled);
    }
    set automaticDataCollectionEnabled(e) {
      (this.checkDestroyed(), (this._automaticDataCollectionEnabled = e));
    }
    get name() {
      return (this.checkDestroyed(), this._name);
    }
    get options() {
      return (this.checkDestroyed(), this._options);
    }
    get config() {
      return (this.checkDestroyed(), this._config);
    }
    get container() {
      return this._container;
    }
    get isDeleted() {
      return this._isDeleted;
    }
    set isDeleted(e) {
      this._isDeleted = e;
    }
    checkDestroyed() {
      if (this.isDeleted) throw E.create(`app-deleted`, { appName: this._name });
    }
  },
  nn = Kt;
function rn(e, t = {}) {
  let n = e;
  typeof t != `object` && (t = { name: t });
  let r = { name: qt, automaticDataCollectionEnabled: !0, ...t },
    i = r.name;
  if (typeof i != `string` || !i) throw E.create(`bad-app-name`, { appName: String(i) });
  if (((n ||= h()), !n)) throw E.create(`no-options`);
  let a = Yt.get(i);
  if (a) {
    if (we(n, a.options) && we(r, a.config)) return a;
    throw E.create(`duplicate-app`, { appName: i });
  }
  let o = new Ve(i);
  for (let e of Zt.values()) o.addComponent(e);
  let s = new tn(n, r, o);
  return (Yt.set(i, s), s);
}
function an(e = qt) {
  let t = Yt.get(e);
  if (!t && e === `[DEFAULT]` && h()) return rn();
  if (!t) throw E.create(`no-app`, { appName: e });
  return t;
}
function D(e, t, n) {
  let r = Jt[e] ?? e;
  n && (r += `-${n}`);
  let i = r.match(/\s|\//),
    a = t.match(/\s|\//);
  if (i || a) {
    let e = [`Unable to register library "${r}" with version "${t}":`];
    (i && e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),
      i && a && e.push(`and`),
      a && e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),
      bt.warn(e.join(` `)));
    return;
  }
  $t(new x(`${r}-version`, () => ({ library: r, version: t }), `VERSION`));
}
var on = `firebase-heartbeat-database`,
  sn = 1,
  cn = `firebase-heartbeat-store`,
  ln = null;
function un() {
  return (
    (ln ||= dt(on, sn, {
      upgrade: (e, t) => {
        switch (t) {
          case 0:
            try {
              e.createObjectStore(cn);
            } catch (e) {
              console.warn(e);
            }
        }
      },
    }).catch((e) => {
      throw E.create(`idb-open`, { originalErrorMessage: e.message });
    })),
    ln
  );
}
async function dn(e) {
  try {
    let t = (await un()).transaction(cn),
      n = await t.objectStore(cn).get(pn(e));
    return (await t.done, n);
  } catch (e) {
    if (e instanceof ye) bt.warn(e.message);
    else {
      let t = E.create(`idb-get`, { originalErrorMessage: e?.message });
      bt.warn(t.message);
    }
  }
}
async function fn(e, t) {
  try {
    let n = (await un()).transaction(cn, `readwrite`);
    (await n.objectStore(cn).put(t, pn(e)), await n.done);
  } catch (e) {
    if (e instanceof ye) bt.warn(e.message);
    else {
      let t = E.create(`idb-set`, { originalErrorMessage: e?.message });
      bt.warn(t.message);
    }
  }
}
function pn(e) {
  return `${e.name}!${e.options.appId}`;
}
var mn = 1024,
  hn = 30,
  gn = class {
    constructor(e) {
      ((this.container = e),
        (this._heartbeatsCache = null),
        (this._storage = new O(this.container.getProvider(`app`).getImmediate())),
        (this._heartbeatsCachePromise = this._storage
          .read()
          .then((e) => ((this._heartbeatsCache = e), e))));
    }
    async triggerHeartbeat() {
      try {
        let e = this.container
            .getProvider(`platform-logger`)
            .getImmediate()
            .getPlatformInfoString(),
          t = _n();
        if (
          (this._heartbeatsCache?.heartbeats == null &&
            ((this._heartbeatsCache = await this._heartbeatsCachePromise),
            this._heartbeatsCache?.heartbeats == null)) ||
          this._heartbeatsCache.lastSentHeartbeatDate === t ||
          this._heartbeatsCache.heartbeats.some((e) => e.date === t)
        )
          return;
        if (
          (this._heartbeatsCache.heartbeats.push({ date: t, agent: e }),
          this._heartbeatsCache.heartbeats.length > hn)
        ) {
          let e = bn(this._heartbeatsCache.heartbeats);
          this._heartbeatsCache.heartbeats.splice(e, 1);
        }
        return this._storage.overwrite(this._heartbeatsCache);
      } catch (e) {
        bt.warn(e);
      }
    }
    async getHeartbeatsHeader() {
      try {
        if (
          (this._heartbeatsCache === null && (await this._heartbeatsCachePromise),
          this._heartbeatsCache?.heartbeats == null ||
            this._heartbeatsCache.heartbeats.length === 0)
        )
          return ``;
        let e = _n(),
          { heartbeatsToSend: t, unsentEntries: n } = vn(this._heartbeatsCache.heartbeats),
          r = o(JSON.stringify({ version: 2, heartbeats: t }));
        return (
          (this._heartbeatsCache.lastSentHeartbeatDate = e),
          n.length > 0
            ? ((this._heartbeatsCache.heartbeats = n),
              await this._storage.overwrite(this._heartbeatsCache))
            : ((this._heartbeatsCache.heartbeats = []),
              this._storage.overwrite(this._heartbeatsCache)),
          r
        );
      } catch (e) {
        return (bt.warn(e), ``);
      }
    }
  };
function _n() {
  return new Date().toISOString().substring(0, 10);
}
function vn(e, t = mn) {
  let n = [],
    r = e.slice();
  for (let i of e) {
    let e = n.find((e) => e.agent === i.agent);
    if (e) {
      if ((e.dates.push(i.date), yn(n) > t)) {
        e.dates.pop();
        break;
      }
    } else if ((n.push({ agent: i.agent, dates: [i.date] }), yn(n) > t)) {
      n.pop();
      break;
    }
    r = r.slice(1);
  }
  return { heartbeatsToSend: n, unsentEntries: r };
}
var O = class {
  constructor(e) {
    ((this.app = e), (this._canUseIndexedDBPromise = this.runIndexedDBEnvironmentCheck()));
  }
  async runIndexedDBEnvironmentCheck() {
    return he()
      ? ge()
          .then(() => !0)
          .catch(() => !1)
      : !1;
  }
  async read() {
    if (await this._canUseIndexedDBPromise) {
      let e = await dn(this.app);
      return e?.heartbeats ? e : { heartbeats: [] };
    } else return { heartbeats: [] };
  }
  async overwrite(e) {
    if (await this._canUseIndexedDBPromise) {
      let t = await this.read();
      return fn(this.app, {
        lastSentHeartbeatDate: e.lastSentHeartbeatDate ?? t.lastSentHeartbeatDate,
        heartbeats: e.heartbeats,
      });
    } else return;
  }
  async add(e) {
    if (await this._canUseIndexedDBPromise) {
      let t = await this.read();
      return fn(this.app, {
        lastSentHeartbeatDate: e.lastSentHeartbeatDate ?? t.lastSentHeartbeatDate,
        heartbeats: [...t.heartbeats, ...e.heartbeats],
      });
    } else return;
  }
};
function yn(e) {
  return o(JSON.stringify({ version: 2, heartbeats: e })).length;
}
function bn(e) {
  if (e.length === 0) return -1;
  let t = 0,
    n = e[0].date;
  for (let r = 1; r < e.length; r++) e[r].date < n && ((n = e[r].date), (t = r));
  return t;
}
function xn(e) {
  ($t(new x(`platform-logger`, (e) => new gt(e), `PRIVATE`)),
    $t(new x(`heartbeat`, (e) => new gn(e), `PRIVATE`)),
    D(vt, yt, e),
    D(vt, yt, `esm2020`),
    D(`fire-js`, ``));
}
(xn(``), D(`firebase`, `12.8.0`, `app`));
function Sn() {
  return {
    "dependent-sdk-initialized-before-auth":
      "Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",
  };
}
var Cn = Sn,
  wn = new be(`auth`, `Firebase`, Sn()),
  Tn = new qe(`@firebase/auth`);
function En(e, ...t) {
  Tn.logLevel <= S.WARN && Tn.warn(`Auth (${nn}): ${e}`, ...t);
}
function Dn(e, ...t) {
  Tn.logLevel <= S.ERROR && Tn.error(`Auth (${nn}): ${e}`, ...t);
}
function k(e, ...t) {
  throw Mn(e, ...t);
}
function On(e, ...t) {
  return Mn(e, ...t);
}
function kn(e, t, n) {
  return new be(`auth`, `Firebase`, { ...Cn(), [t]: n }).create(t, { appName: e.name });
}
function An(e) {
  return kn(
    e,
    `operation-not-supported-in-this-environment`,
    `Operations that alter the current user are not supported in conjunction with FirebaseServerApp`
  );
}
function jn(e, t, n) {
  let r = n;
  if (!(t instanceof r))
    throw (
      r.name !== t.constructor.name && k(e, `argument-error`),
      kn(
        e,
        `argument-error`,
        `Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`
      )
    );
}
function Mn(e, ...t) {
  if (typeof e != `string`) {
    let n = t[0],
      r = [...t.slice(1)];
    return (r[0] && (r[0].appName = e.name), e._errorFactory.create(n, ...r));
  }
  return wn.create(e, ...t);
}
function A(e, t, ...n) {
  if (!e) throw Mn(t, ...n);
}
function Nn(e) {
  let t = `INTERNAL ASSERTION FAILED: ` + e;
  throw (Dn(t), Error(t));
}
function j(e, t) {
  e || Nn(t);
}
function Pn() {
  return (typeof self < `u` && self.location?.href) || ``;
}
function Fn() {
  return In() === `http:` || In() === `https:`;
}
function In() {
  return (typeof self < `u` && self.location?.protocol) || null;
}
function Ln() {
  return typeof navigator < `u` &&
    navigator &&
    `onLine` in navigator &&
    typeof navigator.onLine == `boolean` &&
    (Fn() || de() || `connection` in navigator)
    ? navigator.onLine
    : !0;
}
function Rn() {
  if (typeof navigator > `u`) return null;
  let e = navigator;
  return (e.languages && e.languages[0]) || e.language || null;
}
var zn = class {
  constructor(e, t) {
    ((this.shortDelay = e),
      (this.longDelay = t),
      j(t > e, `Short delay should be less than long delay!`),
      (this.isMobile = v() || fe()));
  }
  get() {
    return Ln()
      ? this.isMobile
        ? this.longDelay
        : this.shortDelay
      : Math.min(5e3, this.shortDelay);
  }
};
function Bn(e, t) {
  j(e.emulator, `Emulator should always be set here`);
  let { url: n } = e.emulator;
  return t ? `${n}${t.startsWith(`/`) ? t.slice(1) : t}` : n;
}
var Vn = class {
    static initialize(e, t, n) {
      ((this.fetchImpl = e), t && (this.headersImpl = t), n && (this.responseImpl = n));
    }
    static fetch() {
      if (this.fetchImpl) return this.fetchImpl;
      if (typeof self < `u` && `fetch` in self) return self.fetch;
      if (typeof globalThis < `u` && globalThis.fetch) return globalThis.fetch;
      if (typeof fetch < `u`) return fetch;
      Nn(
        `Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`
      );
    }
    static headers() {
      if (this.headersImpl) return this.headersImpl;
      if (typeof self < `u` && `Headers` in self) return self.Headers;
      if (typeof globalThis < `u` && globalThis.Headers) return globalThis.Headers;
      if (typeof Headers < `u`) return Headers;
      Nn(
        `Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`
      );
    }
    static response() {
      if (this.responseImpl) return this.responseImpl;
      if (typeof self < `u` && `Response` in self) return self.Response;
      if (typeof globalThis < `u` && globalThis.Response) return globalThis.Response;
      if (typeof Response < `u`) return Response;
      Nn(
        `Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`
      );
    }
  },
  Hn = {
    CREDENTIAL_MISMATCH: `custom-token-mismatch`,
    MISSING_CUSTOM_TOKEN: `internal-error`,
    INVALID_IDENTIFIER: `invalid-email`,
    MISSING_CONTINUE_URI: `internal-error`,
    INVALID_PASSWORD: `wrong-password`,
    MISSING_PASSWORD: `missing-password`,
    INVALID_LOGIN_CREDENTIALS: `invalid-credential`,
    EMAIL_EXISTS: `email-already-in-use`,
    PASSWORD_LOGIN_DISABLED: `operation-not-allowed`,
    INVALID_IDP_RESPONSE: `invalid-credential`,
    INVALID_PENDING_TOKEN: `invalid-credential`,
    FEDERATED_USER_ID_ALREADY_LINKED: `credential-already-in-use`,
    MISSING_REQ_TYPE: `internal-error`,
    EMAIL_NOT_FOUND: `user-not-found`,
    RESET_PASSWORD_EXCEED_LIMIT: `too-many-requests`,
    EXPIRED_OOB_CODE: `expired-action-code`,
    INVALID_OOB_CODE: `invalid-action-code`,
    MISSING_OOB_CODE: `internal-error`,
    CREDENTIAL_TOO_OLD_LOGIN_AGAIN: `requires-recent-login`,
    INVALID_ID_TOKEN: `invalid-user-token`,
    TOKEN_EXPIRED: `user-token-expired`,
    USER_NOT_FOUND: `user-token-expired`,
    TOO_MANY_ATTEMPTS_TRY_LATER: `too-many-requests`,
    PASSWORD_DOES_NOT_MEET_REQUIREMENTS: `password-does-not-meet-requirements`,
    INVALID_CODE: `invalid-verification-code`,
    INVALID_SESSION_INFO: `invalid-verification-id`,
    INVALID_TEMPORARY_PROOF: `invalid-credential`,
    MISSING_SESSION_INFO: `missing-verification-id`,
    SESSION_EXPIRED: `code-expired`,
    MISSING_ANDROID_PACKAGE_NAME: `missing-android-pkg-name`,
    UNAUTHORIZED_DOMAIN: `unauthorized-continue-uri`,
    INVALID_OAUTH_CLIENT_ID: `invalid-oauth-client-id`,
    ADMIN_ONLY_OPERATION: `admin-restricted-operation`,
    INVALID_MFA_PENDING_CREDENTIAL: `invalid-multi-factor-session`,
    MFA_ENROLLMENT_NOT_FOUND: `multi-factor-info-not-found`,
    MISSING_MFA_ENROLLMENT_ID: `missing-multi-factor-info`,
    MISSING_MFA_PENDING_CREDENTIAL: `missing-multi-factor-session`,
    SECOND_FACTOR_EXISTS: `second-factor-already-in-use`,
    SECOND_FACTOR_LIMIT_EXCEEDED: `maximum-second-factor-count-exceeded`,
    BLOCKING_FUNCTION_ERROR_RESPONSE: `internal-error`,
    RECAPTCHA_NOT_ENABLED: `recaptcha-not-enabled`,
    MISSING_RECAPTCHA_TOKEN: `missing-recaptcha-token`,
    INVALID_RECAPTCHA_TOKEN: `invalid-recaptcha-token`,
    INVALID_RECAPTCHA_ACTION: `invalid-recaptcha-action`,
    MISSING_CLIENT_TYPE: `missing-client-type`,
    MISSING_RECAPTCHA_VERSION: `missing-recaptcha-version`,
    INVALID_RECAPTCHA_VERSION: `invalid-recaptcha-version`,
    INVALID_REQ_TYPE: `invalid-req-type`,
  },
  Un = [
    `/v1/accounts:signInWithCustomToken`,
    `/v1/accounts:signInWithEmailLink`,
    `/v1/accounts:signInWithIdp`,
    `/v1/accounts:signInWithPassword`,
    `/v1/accounts:signInWithPhoneNumber`,
    `/v1/token`,
  ],
  Wn = new zn(3e4, 6e4);
function M(e, t) {
  return e.tenantId && !t.tenantId ? { ...t, tenantId: e.tenantId } : t;
}
async function N(e, t, n, r, i = {}) {
  return Gn(e, i, async () => {
    let i = {},
      a = {};
    r && (t === `GET` ? (a = r) : (i = { body: JSON.stringify(r) }));
    let o = Ee({ key: e.config.apiKey, ...a }).slice(1),
      s = await e._getAdditionalHeaders();
    ((s[`Content-Type`] = `application/json`),
      e.languageCode && (s[`X-Firebase-Locale`] = e.languageCode));
    let c = { method: t, headers: s, ...i };
    return (
      ue() || (c.referrerPolicy = `no-referrer`),
      e.emulatorConfig && te(e.emulatorConfig.host) && (c.credentials = `include`),
      Vn.fetch()(await Kn(e, e.config.apiHost, n, o), c)
    );
  });
}
async function Gn(e, t, n) {
  e._canInitEmulator = !1;
  let r = { ...Hn, ...t };
  try {
    let t = new Jn(e),
      i = await Promise.race([n(), t.promise]);
    t.clearNetworkTimeout();
    let a = await i.json();
    if (`needConfirmation` in a) throw Yn(e, `account-exists-with-different-credential`, a);
    if (i.ok && !(`errorMessage` in a)) return a;
    {
      let [t, n] = (i.ok ? a.errorMessage : a.error.message).split(` : `);
      if (t === `FEDERATED_USER_ID_ALREADY_LINKED`) throw Yn(e, `credential-already-in-use`, a);
      if (t === `EMAIL_EXISTS`) throw Yn(e, `email-already-in-use`, a);
      if (t === `USER_DISABLED`) throw Yn(e, `user-disabled`, a);
      let o = r[t] || t.toLowerCase().replace(/[_\s]+/g, `-`);
      if (n) throw kn(e, o, n);
      k(e, o);
    }
  } catch (t) {
    if (t instanceof ye) throw t;
    k(e, `network-request-failed`, { message: String(t) });
  }
}
async function P(e, t, n, r, i = {}) {
  let a = await N(e, t, n, r, i);
  return (
    `mfaPendingCredential` in a && k(e, `multi-factor-auth-required`, { _serverResponse: a }),
    a
  );
}
async function Kn(e, t, n, r) {
  let i = `${t}${n}?${r}`,
    a = e,
    o = a.config.emulator ? Bn(e.config, i) : `${e.config.apiScheme}://${i}`;
  return Un.includes(n) &&
    (await a._persistenceManagerAvailable, a._getPersistenceType() === `COOKIE`)
    ? a._getPersistence()._getFinalTarget(o).toString()
    : o;
}
function qn(e) {
  switch (e) {
    case `ENFORCE`:
      return `ENFORCE`;
    case `AUDIT`:
      return `AUDIT`;
    case `OFF`:
      return `OFF`;
    default:
      return `ENFORCEMENT_STATE_UNSPECIFIED`;
  }
}
var Jn = class {
  clearNetworkTimeout() {
    clearTimeout(this.timer);
  }
  constructor(e) {
    ((this.auth = e),
      (this.timer = null),
      (this.promise = new Promise((e, t) => {
        this.timer = setTimeout(() => t(On(this.auth, `network-request-failed`)), Wn.get());
      })));
  }
};
function Yn(e, t, n) {
  let r = { appName: e.name };
  (n.email && (r.email = n.email), n.phoneNumber && (r.phoneNumber = n.phoneNumber));
  let i = On(e, t, r);
  return ((i.customData._tokenResponse = n), i);
}
function Xn(e) {
  return e !== void 0 && e.enterprise !== void 0;
}
var Zn = class {
  constructor(e) {
    if (((this.siteKey = ``), (this.recaptchaEnforcementState = []), e.recaptchaKey === void 0))
      throw Error(`recaptchaKey undefined`);
    ((this.siteKey = e.recaptchaKey.split(`/`)[3]),
      (this.recaptchaEnforcementState = e.recaptchaEnforcementState));
  }
  getProviderEnforcementState(e) {
    if (!this.recaptchaEnforcementState || this.recaptchaEnforcementState.length === 0) return null;
    for (let t of this.recaptchaEnforcementState)
      if (t.provider && t.provider === e) return qn(t.enforcementState);
    return null;
  }
  isProviderEnabled(e) {
    return (
      this.getProviderEnforcementState(e) === `ENFORCE` ||
      this.getProviderEnforcementState(e) === `AUDIT`
    );
  }
  isAnyProviderEnabled() {
    return (
      this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`) || this.isProviderEnabled(`PHONE_PROVIDER`)
    );
  }
};
async function Qn(e, t) {
  return N(e, `GET`, `/v2/recaptchaConfig`, M(e, t));
}
async function $n(e, t) {
  return N(e, `POST`, `/v1/accounts:delete`, t);
}
async function er(e, t) {
  return N(e, `POST`, `/v1/accounts:lookup`, t);
}
function tr(e) {
  if (e)
    try {
      let t = new Date(Number(e));
      if (!isNaN(t.getTime())) return t.toUTCString();
    } catch {}
}
async function nr(e, t = !1) {
  let n = b(e),
    r = await n.getIdToken(t),
    i = ir(r);
  A(i && i.exp && i.auth_time && i.iat, n.auth, `internal-error`);
  let a = typeof i.firebase == `object` ? i.firebase : void 0,
    o = a?.sign_in_provider;
  return {
    claims: i,
    token: r,
    authTime: tr(rr(i.auth_time)),
    issuedAtTime: tr(rr(i.iat)),
    expirationTime: tr(rr(i.exp)),
    signInProvider: o || null,
    signInSecondFactor: a?.sign_in_second_factor || null,
  };
}
function rr(e) {
  return Number(e) * 1e3;
}
function ir(e) {
  let [t, n, r] = e.split(`.`);
  if (t === void 0 || n === void 0 || r === void 0)
    return (Dn(`JWT malformed, contained fewer than 3 sections`), null);
  try {
    let e = s(n);
    return e ? JSON.parse(e) : (Dn(`Failed to decode base64 JWT payload`), null);
  } catch (e) {
    return (Dn(`Caught error parsing JWT payload as JSON`, e?.toString()), null);
  }
}
function ar(e) {
  let t = ir(e);
  return (
    A(t, `internal-error`),
    A(t.exp !== void 0, `internal-error`),
    A(t.iat !== void 0, `internal-error`),
    Number(t.exp) - Number(t.iat)
  );
}
async function or(e, t, n = !1) {
  if (n) return t;
  try {
    return await t;
  } catch (t) {
    throw (t instanceof ye && sr(t) && e.auth.currentUser === e && (await e.auth.signOut()), t);
  }
}
function sr({ code: e }) {
  return e === `auth/user-disabled` || e === `auth/user-token-expired`;
}
var cr = class {
    constructor(e) {
      ((this.user = e), (this.isRunning = !1), (this.timerId = null), (this.errorBackoff = 3e4));
    }
    _start() {
      this.isRunning || ((this.isRunning = !0), this.schedule());
    }
    _stop() {
      this.isRunning &&
        ((this.isRunning = !1), this.timerId !== null && clearTimeout(this.timerId));
    }
    getInterval(e) {
      if (e) {
        let e = this.errorBackoff;
        return ((this.errorBackoff = Math.min(this.errorBackoff * 2, 96e4)), e);
      } else {
        this.errorBackoff = 3e4;
        let e = (this.user.stsTokenManager.expirationTime ?? 0) - Date.now() - 3e5;
        return Math.max(0, e);
      }
    }
    schedule(e = !1) {
      if (!this.isRunning) return;
      let t = this.getInterval(e);
      this.timerId = setTimeout(async () => {
        await this.iteration();
      }, t);
    }
    async iteration() {
      try {
        await this.user.getIdToken(!0);
      } catch (e) {
        e?.code === `auth/network-request-failed` && this.schedule(!0);
        return;
      }
      this.schedule();
    }
  },
  lr = class {
    constructor(e, t) {
      ((this.createdAt = e), (this.lastLoginAt = t), this._initializeTime());
    }
    _initializeTime() {
      ((this.lastSignInTime = tr(this.lastLoginAt)), (this.creationTime = tr(this.createdAt)));
    }
    _copy(e) {
      ((this.createdAt = e.createdAt), (this.lastLoginAt = e.lastLoginAt), this._initializeTime());
    }
    toJSON() {
      return { createdAt: this.createdAt, lastLoginAt: this.lastLoginAt };
    }
  };
async function ur(e) {
  let t = e.auth,
    n = await or(e, er(t, { idToken: await e.getIdToken() }));
  A(n?.users.length, t, `internal-error`);
  let r = n.users[0];
  e._notifyReloadListener(r);
  let i = r.providerUserInfo?.length ? pr(r.providerUserInfo) : [],
    a = fr(e.providerData, i),
    o = e.isAnonymous,
    s = !(e.email && r.passwordHash) && !a?.length,
    c = o ? s : !1,
    l = {
      uid: r.localId,
      displayName: r.displayName || null,
      photoURL: r.photoUrl || null,
      email: r.email || null,
      emailVerified: r.emailVerified || !1,
      phoneNumber: r.phoneNumber || null,
      tenantId: r.tenantId || null,
      providerData: a,
      metadata: new lr(r.createdAt, r.lastLoginAt),
      isAnonymous: c,
    };
  Object.assign(e, l);
}
async function dr(e) {
  let t = b(e);
  (await ur(t), await t.auth._persistUserIfCurrent(t), t.auth._notifyListenersIfCurrent(t));
}
function fr(e, t) {
  return [...e.filter((e) => !t.some((t) => t.providerId === e.providerId)), ...t];
}
function pr(e) {
  return e.map(({ providerId: e, ...t }) => ({
    providerId: e,
    uid: t.rawId || ``,
    displayName: t.displayName || null,
    email: t.email || null,
    phoneNumber: t.phoneNumber || null,
    photoURL: t.photoUrl || null,
  }));
}
async function mr(e, t) {
  let n = await Gn(e, {}, async () => {
    let n = Ee({ grant_type: `refresh_token`, refresh_token: t }).slice(1),
      { tokenApiHost: r, apiKey: i } = e.config,
      a = await Kn(e, r, `/v1/token`, `key=${i}`),
      o = await e._getAdditionalHeaders();
    o[`Content-Type`] = `application/x-www-form-urlencoded`;
    let s = { method: `POST`, headers: o, body: n };
    return (
      e.emulatorConfig && te(e.emulatorConfig.host) && (s.credentials = `include`),
      Vn.fetch()(a, s)
    );
  });
  return { accessToken: n.access_token, expiresIn: n.expires_in, refreshToken: n.refresh_token };
}
async function hr(e, t) {
  return N(e, `POST`, `/v2/accounts:revokeToken`, M(e, t));
}
var gr = class e {
  constructor() {
    ((this.refreshToken = null), (this.accessToken = null), (this.expirationTime = null));
  }
  get isExpired() {
    return !this.expirationTime || Date.now() > this.expirationTime - 3e4;
  }
  updateFromServerResponse(e) {
    (A(e.idToken, `internal-error`),
      A(e.idToken !== void 0, `internal-error`),
      A(e.refreshToken !== void 0, `internal-error`));
    let t = `expiresIn` in e && e.expiresIn !== void 0 ? Number(e.expiresIn) : ar(e.idToken);
    this.updateTokensAndExpiration(e.idToken, e.refreshToken, t);
  }
  updateFromIdToken(e) {
    A(e.length !== 0, `internal-error`);
    let t = ar(e);
    this.updateTokensAndExpiration(e, null, t);
  }
  async getToken(e, t = !1) {
    return !t && this.accessToken && !this.isExpired
      ? this.accessToken
      : (A(this.refreshToken, e, `user-token-expired`),
        this.refreshToken ? (await this.refresh(e, this.refreshToken), this.accessToken) : null);
  }
  clearRefreshToken() {
    this.refreshToken = null;
  }
  async refresh(e, t) {
    let { accessToken: n, refreshToken: r, expiresIn: i } = await mr(e, t);
    this.updateTokensAndExpiration(n, r, Number(i));
  }
  updateTokensAndExpiration(e, t, n) {
    ((this.refreshToken = t || null),
      (this.accessToken = e || null),
      (this.expirationTime = Date.now() + n * 1e3));
  }
  static fromJSON(t, n) {
    let { refreshToken: r, accessToken: i, expirationTime: a } = n,
      o = new e();
    return (
      r && (A(typeof r == `string`, `internal-error`, { appName: t }), (o.refreshToken = r)),
      i && (A(typeof i == `string`, `internal-error`, { appName: t }), (o.accessToken = i)),
      a && (A(typeof a == `number`, `internal-error`, { appName: t }), (o.expirationTime = a)),
      o
    );
  }
  toJSON() {
    return {
      refreshToken: this.refreshToken,
      accessToken: this.accessToken,
      expirationTime: this.expirationTime,
    };
  }
  _assign(e) {
    ((this.accessToken = e.accessToken),
      (this.refreshToken = e.refreshToken),
      (this.expirationTime = e.expirationTime));
  }
  _clone() {
    return Object.assign(new e(), this.toJSON());
  }
  _performRefresh() {
    return Nn(`not implemented`);
  }
};
function _r(e, t) {
  A(typeof e == `string` || e === void 0, `internal-error`, { appName: t });
}
var vr = class e {
    constructor({ uid: e, auth: t, stsTokenManager: n, ...r }) {
      ((this.providerId = `firebase`),
        (this.proactiveRefresh = new cr(this)),
        (this.reloadUserInfo = null),
        (this.reloadListener = null),
        (this.uid = e),
        (this.auth = t),
        (this.stsTokenManager = n),
        (this.accessToken = n.accessToken),
        (this.displayName = r.displayName || null),
        (this.email = r.email || null),
        (this.emailVerified = r.emailVerified || !1),
        (this.phoneNumber = r.phoneNumber || null),
        (this.photoURL = r.photoURL || null),
        (this.isAnonymous = r.isAnonymous || !1),
        (this.tenantId = r.tenantId || null),
        (this.providerData = r.providerData ? [...r.providerData] : []),
        (this.metadata = new lr(r.createdAt || void 0, r.lastLoginAt || void 0)));
    }
    async getIdToken(e) {
      let t = await or(this, this.stsTokenManager.getToken(this.auth, e));
      return (
        A(t, this.auth, `internal-error`),
        this.accessToken !== t &&
          ((this.accessToken = t),
          await this.auth._persistUserIfCurrent(this),
          this.auth._notifyListenersIfCurrent(this)),
        t
      );
    }
    getIdTokenResult(e) {
      return nr(this, e);
    }
    reload() {
      return dr(this);
    }
    _assign(e) {
      this !== e &&
        (A(this.uid === e.uid, this.auth, `internal-error`),
        (this.displayName = e.displayName),
        (this.photoURL = e.photoURL),
        (this.email = e.email),
        (this.emailVerified = e.emailVerified),
        (this.phoneNumber = e.phoneNumber),
        (this.isAnonymous = e.isAnonymous),
        (this.tenantId = e.tenantId),
        (this.providerData = e.providerData.map((e) => ({ ...e }))),
        this.metadata._copy(e.metadata),
        this.stsTokenManager._assign(e.stsTokenManager));
    }
    _clone(t) {
      let n = new e({ ...this, auth: t, stsTokenManager: this.stsTokenManager._clone() });
      return (n.metadata._copy(this.metadata), n);
    }
    _onReload(e) {
      (A(!this.reloadListener, this.auth, `internal-error`),
        (this.reloadListener = e),
        (this.reloadUserInfo &&= (this._notifyReloadListener(this.reloadUserInfo), null)));
    }
    _notifyReloadListener(e) {
      this.reloadListener ? this.reloadListener(e) : (this.reloadUserInfo = e);
    }
    _startProactiveRefresh() {
      this.proactiveRefresh._start();
    }
    _stopProactiveRefresh() {
      this.proactiveRefresh._stop();
    }
    async _updateTokensIfNecessary(e, t = !1) {
      let n = !1;
      (e.idToken &&
        e.idToken !== this.stsTokenManager.accessToken &&
        (this.stsTokenManager.updateFromServerResponse(e), (n = !0)),
        t && (await ur(this)),
        await this.auth._persistUserIfCurrent(this),
        n && this.auth._notifyListenersIfCurrent(this));
    }
    async delete() {
      if (T(this.auth.app)) return Promise.reject(An(this.auth));
      let e = await this.getIdToken();
      return (
        await or(this, $n(this.auth, { idToken: e })),
        this.stsTokenManager.clearRefreshToken(),
        this.auth.signOut()
      );
    }
    toJSON() {
      return {
        uid: this.uid,
        email: this.email || void 0,
        emailVerified: this.emailVerified,
        displayName: this.displayName || void 0,
        isAnonymous: this.isAnonymous,
        photoURL: this.photoURL || void 0,
        phoneNumber: this.phoneNumber || void 0,
        tenantId: this.tenantId || void 0,
        providerData: this.providerData.map((e) => ({ ...e })),
        stsTokenManager: this.stsTokenManager.toJSON(),
        _redirectEventId: this._redirectEventId,
        ...this.metadata.toJSON(),
        apiKey: this.auth.config.apiKey,
        appName: this.auth.name,
      };
    }
    get refreshToken() {
      return this.stsTokenManager.refreshToken || ``;
    }
    static _fromJSON(t, n) {
      let r = n.displayName ?? void 0,
        i = n.email ?? void 0,
        a = n.phoneNumber ?? void 0,
        o = n.photoURL ?? void 0,
        s = n.tenantId ?? void 0,
        c = n._redirectEventId ?? void 0,
        l = n.createdAt ?? void 0,
        u = n.lastLoginAt ?? void 0,
        { uid: d, emailVerified: f, isAnonymous: p, providerData: m, stsTokenManager: h } = n;
      A(d && h, t, `internal-error`);
      let g = gr.fromJSON(this.name, h);
      (A(typeof d == `string`, t, `internal-error`),
        _r(r, t.name),
        _r(i, t.name),
        A(typeof f == `boolean`, t, `internal-error`),
        A(typeof p == `boolean`, t, `internal-error`),
        _r(a, t.name),
        _r(o, t.name),
        _r(s, t.name),
        _r(c, t.name),
        _r(l, t.name),
        _r(u, t.name));
      let ee = new e({
        uid: d,
        auth: t,
        email: i,
        emailVerified: f,
        displayName: r,
        isAnonymous: p,
        photoURL: o,
        phoneNumber: a,
        tenantId: s,
        stsTokenManager: g,
        createdAt: l,
        lastLoginAt: u,
      });
      return (
        m && Array.isArray(m) && (ee.providerData = m.map((e) => ({ ...e }))),
        c && (ee._redirectEventId = c),
        ee
      );
    }
    static async _fromIdTokenResponse(t, n, r = !1) {
      let i = new gr();
      i.updateFromServerResponse(n);
      let a = new e({ uid: n.localId, auth: t, stsTokenManager: i, isAnonymous: r });
      return (await ur(a), a);
    }
    static async _fromGetAccountInfoResponse(t, n, r) {
      let i = n.users[0];
      A(i.localId !== void 0, `internal-error`);
      let a = i.providerUserInfo === void 0 ? [] : pr(i.providerUserInfo),
        o = !(i.email && i.passwordHash) && !a?.length,
        s = new gr();
      s.updateFromIdToken(r);
      let c = new e({ uid: i.localId, auth: t, stsTokenManager: s, isAnonymous: o }),
        l = {
          uid: i.localId,
          displayName: i.displayName || null,
          photoURL: i.photoUrl || null,
          email: i.email || null,
          emailVerified: i.emailVerified || !1,
          phoneNumber: i.phoneNumber || null,
          tenantId: i.tenantId || null,
          providerData: a,
          metadata: new lr(i.createdAt, i.lastLoginAt),
          isAnonymous: !(i.email && i.passwordHash) && !a?.length,
        };
      return (Object.assign(c, l), c);
    }
  },
  yr = new Map();
function br(e) {
  j(e instanceof Function, `Expected a class definition`);
  let t = yr.get(e);
  return t
    ? (j(t instanceof e, `Instance stored in cache mismatched with class`), t)
    : ((t = new e()), yr.set(e, t), t);
}
var xr = class {
  constructor() {
    ((this.type = `NONE`), (this.storage = {}));
  }
  async _isAvailable() {
    return !0;
  }
  async _set(e, t) {
    this.storage[e] = t;
  }
  async _get(e) {
    let t = this.storage[e];
    return t === void 0 ? null : t;
  }
  async _remove(e) {
    delete this.storage[e];
  }
  _addListener(e, t) {}
  _removeListener(e, t) {}
};
xr.type = `NONE`;
var Sr = xr;
function Cr(e, t, n) {
  return `firebase:${e}:${t}:${n}`;
}
var wr = class e {
  constructor(e, t, n) {
    ((this.persistence = e), (this.auth = t), (this.userKey = n));
    let { config: r, name: i } = this.auth;
    ((this.fullUserKey = Cr(this.userKey, r.apiKey, i)),
      (this.fullPersistenceKey = Cr(`persistence`, r.apiKey, i)),
      (this.boundEventHandler = t._onStorageEvent.bind(t)),
      this.persistence._addListener(this.fullUserKey, this.boundEventHandler));
  }
  setCurrentUser(e) {
    return this.persistence._set(this.fullUserKey, e.toJSON());
  }
  async getCurrentUser() {
    let e = await this.persistence._get(this.fullUserKey);
    if (!e) return null;
    if (typeof e == `string`) {
      let t = await er(this.auth, { idToken: e }).catch(() => void 0);
      return t ? vr._fromGetAccountInfoResponse(this.auth, t, e) : null;
    }
    return vr._fromJSON(this.auth, e);
  }
  removeCurrentUser() {
    return this.persistence._remove(this.fullUserKey);
  }
  savePersistenceForRedirect() {
    return this.persistence._set(this.fullPersistenceKey, this.persistence.type);
  }
  async setPersistence(e) {
    if (this.persistence === e) return;
    let t = await this.getCurrentUser();
    if ((await this.removeCurrentUser(), (this.persistence = e), t)) return this.setCurrentUser(t);
  }
  delete() {
    this.persistence._removeListener(this.fullUserKey, this.boundEventHandler);
  }
  static async create(t, n, r = `authUser`) {
    if (!n.length) return new e(br(Sr), t, r);
    let i = (
        await Promise.all(
          n.map(async (e) => {
            if (await e._isAvailable()) return e;
          })
        )
      ).filter((e) => e),
      a = i[0] || br(Sr),
      o = Cr(r, t.config.apiKey, t.name),
      s = null;
    for (let e of n)
      try {
        let n = await e._get(o);
        if (n) {
          let r;
          if (typeof n == `string`) {
            let e = await er(t, { idToken: n }).catch(() => void 0);
            if (!e) break;
            r = await vr._fromGetAccountInfoResponse(t, e, n);
          } else r = vr._fromJSON(t, n);
          (e !== a && (s = r), (a = e));
          break;
        }
      } catch {}
    let c = i.filter((e) => e._shouldAllowMigration);
    return !a._shouldAllowMigration || !c.length
      ? new e(a, t, r)
      : ((a = c[0]),
        s && (await a._set(o, s.toJSON())),
        await Promise.all(
          n.map(async (e) => {
            if (e !== a)
              try {
                await e._remove(o);
              } catch {}
          })
        ),
        new e(a, t, r));
  }
};
function Tr(e) {
  let t = e.toLowerCase();
  if (t.includes(`opera/`) || t.includes(`opr/`) || t.includes(`opios/`)) return `Opera`;
  if (kr(t)) return `IEMobile`;
  if (t.includes(`msie`) || t.includes(`trident/`)) return `IE`;
  if (t.includes(`edge/`)) return `Edge`;
  if (Er(t)) return `Firefox`;
  if (t.includes(`silk/`)) return `Silk`;
  if (jr(t)) return `Blackberry`;
  if (Mr(t)) return `Webos`;
  if (Dr(t)) return `Safari`;
  if ((t.includes(`chrome/`) || Or(t)) && !t.includes(`edge/`)) return `Chrome`;
  if (Ar(t)) return `Android`;
  {
    let t = e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);
    if (t?.length === 2) return t[1];
  }
  return `Other`;
}
function Er(e = _()) {
  return /firefox\//i.test(e);
}
function Dr(e = _()) {
  let t = e.toLowerCase();
  return (
    t.includes(`safari/`) &&
    !t.includes(`chrome/`) &&
    !t.includes(`crios/`) &&
    !t.includes(`android`)
  );
}
function Or(e = _()) {
  return /crios\//i.test(e);
}
function kr(e = _()) {
  return /iemobile/i.test(e);
}
function Ar(e = _()) {
  return /android/i.test(e);
}
function jr(e = _()) {
  return /blackberry/i.test(e);
}
function Mr(e = _()) {
  return /webos/i.test(e);
}
function Nr(e = _()) {
  return /iphone|ipad|ipod/i.test(e) || (/macintosh/i.test(e) && /mobile/i.test(e));
}
function Pr(e = _()) {
  return Nr(e) && !!window.navigator?.standalone;
}
function Fr() {
  return pe() && document.documentMode === 10;
}
function Ir(e = _()) {
  return Nr(e) || Ar(e) || Mr(e) || jr(e) || /windows phone/i.test(e) || kr(e);
}
function Lr(e, t = []) {
  let n;
  switch (e) {
    case `Browser`:
      n = Tr(_());
      break;
    case `Worker`:
      n = `${Tr(_())}-${e}`;
      break;
    default:
      n = e;
  }
  let r = t.length ? t.join(`,`) : `FirebaseCore-web`;
  return `${n}/JsCore/${nn}/${r}`;
}
var Rr = class {
  constructor(e) {
    ((this.auth = e), (this.queue = []));
  }
  pushCallback(e, t) {
    let n = (t) =>
      new Promise((n, r) => {
        try {
          n(e(t));
        } catch (e) {
          r(e);
        }
      });
    ((n.onAbort = t), this.queue.push(n));
    let r = this.queue.length - 1;
    return () => {
      this.queue[r] = () => Promise.resolve();
    };
  }
  async runMiddleware(e) {
    if (this.auth.currentUser === e) return;
    let t = [];
    try {
      for (let n of this.queue) (await n(e), n.onAbort && t.push(n.onAbort));
    } catch (e) {
      t.reverse();
      for (let e of t)
        try {
          e();
        } catch {}
      throw this.auth._errorFactory.create(`login-blocked`, { originalMessage: e?.message });
    }
  }
};
async function zr(e, t = {}) {
  return N(e, `GET`, `/v2/passwordPolicy`, M(e, t));
}
var Br = 6,
  Vr = class {
    constructor(e) {
      let t = e.customStrengthOptions;
      ((this.customStrengthOptions = {}),
        (this.customStrengthOptions.minPasswordLength = t.minPasswordLength ?? Br),
        t.maxPasswordLength && (this.customStrengthOptions.maxPasswordLength = t.maxPasswordLength),
        t.containsLowercaseCharacter !== void 0 &&
          (this.customStrengthOptions.containsLowercaseLetter = t.containsLowercaseCharacter),
        t.containsUppercaseCharacter !== void 0 &&
          (this.customStrengthOptions.containsUppercaseLetter = t.containsUppercaseCharacter),
        t.containsNumericCharacter !== void 0 &&
          (this.customStrengthOptions.containsNumericCharacter = t.containsNumericCharacter),
        t.containsNonAlphanumericCharacter !== void 0 &&
          (this.customStrengthOptions.containsNonAlphanumericCharacter =
            t.containsNonAlphanumericCharacter),
        (this.enforcementState = e.enforcementState),
        this.enforcementState === `ENFORCEMENT_STATE_UNSPECIFIED` &&
          (this.enforcementState = `OFF`),
        (this.allowedNonAlphanumericCharacters =
          e.allowedNonAlphanumericCharacters?.join(``) ?? ``),
        (this.forceUpgradeOnSignin = e.forceUpgradeOnSignin ?? !1),
        (this.schemaVersion = e.schemaVersion));
    }
    validatePassword(e) {
      let t = { isValid: !0, passwordPolicy: this };
      return (
        this.validatePasswordLengthOptions(e, t),
        this.validatePasswordCharacterOptions(e, t),
        (t.isValid &&= t.meetsMinPasswordLength ?? !0),
        (t.isValid &&= t.meetsMaxPasswordLength ?? !0),
        (t.isValid &&= t.containsLowercaseLetter ?? !0),
        (t.isValid &&= t.containsUppercaseLetter ?? !0),
        (t.isValid &&= t.containsNumericCharacter ?? !0),
        (t.isValid &&= t.containsNonAlphanumericCharacter ?? !0),
        t
      );
    }
    validatePasswordLengthOptions(e, t) {
      let n = this.customStrengthOptions.minPasswordLength,
        r = this.customStrengthOptions.maxPasswordLength;
      (n && (t.meetsMinPasswordLength = e.length >= n),
        r && (t.meetsMaxPasswordLength = e.length <= r));
    }
    validatePasswordCharacterOptions(e, t) {
      this.updatePasswordCharacterOptionsStatuses(t, !1, !1, !1, !1);
      let n;
      for (let r = 0; r < e.length; r++)
        ((n = e.charAt(r)),
          this.updatePasswordCharacterOptionsStatuses(
            t,
            n >= `a` && n <= `z`,
            n >= `A` && n <= `Z`,
            n >= `0` && n <= `9`,
            this.allowedNonAlphanumericCharacters.includes(n)
          ));
    }
    updatePasswordCharacterOptionsStatuses(e, t, n, r, i) {
      (this.customStrengthOptions.containsLowercaseLetter && (e.containsLowercaseLetter ||= t),
        this.customStrengthOptions.containsUppercaseLetter && (e.containsUppercaseLetter ||= n),
        this.customStrengthOptions.containsNumericCharacter && (e.containsNumericCharacter ||= r),
        this.customStrengthOptions.containsNonAlphanumericCharacter &&
          (e.containsNonAlphanumericCharacter ||= i));
    }
  },
  Hr = class {
    constructor(e, t, n, r) {
      ((this.app = e),
        (this.heartbeatServiceProvider = t),
        (this.appCheckServiceProvider = n),
        (this.config = r),
        (this.currentUser = null),
        (this.emulatorConfig = null),
        (this.operations = Promise.resolve()),
        (this.authStateSubscription = new Wr(this)),
        (this.idTokenSubscription = new Wr(this)),
        (this.beforeStateQueue = new Rr(this)),
        (this.redirectUser = null),
        (this.isProactiveRefreshEnabled = !1),
        (this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION = 1),
        (this._canInitEmulator = !0),
        (this._isInitialized = !1),
        (this._deleted = !1),
        (this._initializationPromise = null),
        (this._popupRedirectResolver = null),
        (this._errorFactory = wn),
        (this._agentRecaptchaConfig = null),
        (this._tenantRecaptchaConfigs = {}),
        (this._projectPasswordPolicy = null),
        (this._tenantPasswordPolicies = {}),
        (this._resolvePersistenceManagerAvailable = void 0),
        (this.lastNotifiedUid = void 0),
        (this.languageCode = null),
        (this.tenantId = null),
        (this.settings = { appVerificationDisabledForTesting: !1 }),
        (this.frameworks = []),
        (this.name = e.name),
        (this.clientVersion = r.sdkClientVersion),
        (this._persistenceManagerAvailable = new Promise(
          (e) => (this._resolvePersistenceManagerAvailable = e)
        )));
    }
    _initializeWithPersistence(e, t) {
      return (
        t && (this._popupRedirectResolver = br(t)),
        (this._initializationPromise = this.queue(async () => {
          if (
            !this._deleted &&
            ((this.persistenceManager = await wr.create(this, e)),
            this._resolvePersistenceManagerAvailable?.(),
            !this._deleted)
          ) {
            if (this._popupRedirectResolver?._shouldInitProactively)
              try {
                await this._popupRedirectResolver._initialize(this);
              } catch {}
            (await this.initializeCurrentUser(t),
              (this.lastNotifiedUid = this.currentUser?.uid || null),
              !this._deleted && (this._isInitialized = !0));
          }
        })),
        this._initializationPromise
      );
    }
    async _onStorageEvent() {
      if (this._deleted) return;
      let e = await this.assertedPersistence.getCurrentUser();
      if (!(!this.currentUser && !e)) {
        if (this.currentUser && e && this.currentUser.uid === e.uid) {
          (this._currentUser._assign(e), await this.currentUser.getIdToken());
          return;
        }
        await this._updateCurrentUser(e, !0);
      }
    }
    async initializeCurrentUserFromIdToken(e) {
      try {
        let t = await er(this, { idToken: e }),
          n = await vr._fromGetAccountInfoResponse(this, t, e);
        await this.directlySetCurrentUser(n);
      } catch (e) {
        (console.warn(`FirebaseServerApp could not login user with provided authIdToken: `, e),
          await this.directlySetCurrentUser(null));
      }
    }
    async initializeCurrentUser(e) {
      if (T(this.app)) {
        let e = this.app.settings.authIdToken;
        return e
          ? new Promise((t) => {
              setTimeout(() => this.initializeCurrentUserFromIdToken(e).then(t, t));
            })
          : this.directlySetCurrentUser(null);
      }
      let t = await this.assertedPersistence.getCurrentUser(),
        n = t,
        r = !1;
      if (e && this.config.authDomain) {
        await this.getOrInitRedirectPersistenceManager();
        let t = this.redirectUser?._redirectEventId,
          i = n?._redirectEventId,
          a = await this.tryRedirectSignIn(e);
        (!t || t === i) && a?.user && ((n = a.user), (r = !0));
      }
      if (!n) return this.directlySetCurrentUser(null);
      if (!n._redirectEventId) {
        if (r)
          try {
            await this.beforeStateQueue.runMiddleware(n);
          } catch (e) {
            ((n = t),
              this._popupRedirectResolver._overrideRedirectResult(this, () => Promise.reject(e)));
          }
        return n ? this.reloadAndSetCurrentUserOrClear(n) : this.directlySetCurrentUser(null);
      }
      return (
        A(this._popupRedirectResolver, this, `argument-error`),
        await this.getOrInitRedirectPersistenceManager(),
        this.redirectUser && this.redirectUser._redirectEventId === n._redirectEventId
          ? this.directlySetCurrentUser(n)
          : this.reloadAndSetCurrentUserOrClear(n)
      );
    }
    async tryRedirectSignIn(e) {
      let t = null;
      try {
        t = await this._popupRedirectResolver._completeRedirectFn(this, e, !0);
      } catch {
        await this._setRedirectUser(null);
      }
      return t;
    }
    async reloadAndSetCurrentUserOrClear(e) {
      try {
        await ur(e);
      } catch (e) {
        if (e?.code !== `auth/network-request-failed`) return this.directlySetCurrentUser(null);
      }
      return this.directlySetCurrentUser(e);
    }
    useDeviceLanguage() {
      this.languageCode = Rn();
    }
    async _delete() {
      this._deleted = !0;
    }
    async updateCurrentUser(e) {
      if (T(this.app)) return Promise.reject(An(this));
      let t = e ? b(e) : null;
      return (
        t && A(t.auth.config.apiKey === this.config.apiKey, this, `invalid-user-token`),
        this._updateCurrentUser(t && t._clone(this))
      );
    }
    async _updateCurrentUser(e, t = !1) {
      if (!this._deleted)
        return (
          e && A(this.tenantId === e.tenantId, this, `tenant-id-mismatch`),
          t || (await this.beforeStateQueue.runMiddleware(e)),
          this.queue(async () => {
            (await this.directlySetCurrentUser(e), this.notifyAuthListeners());
          })
        );
    }
    async signOut() {
      return T(this.app)
        ? Promise.reject(An(this))
        : (await this.beforeStateQueue.runMiddleware(null),
          (this.redirectPersistenceManager || this._popupRedirectResolver) &&
            (await this._setRedirectUser(null)),
          this._updateCurrentUser(null, !0));
    }
    setPersistence(e) {
      return T(this.app)
        ? Promise.reject(An(this))
        : this.queue(async () => {
            await this.assertedPersistence.setPersistence(br(e));
          });
    }
    _getRecaptchaConfig() {
      return this.tenantId == null
        ? this._agentRecaptchaConfig
        : this._tenantRecaptchaConfigs[this.tenantId];
    }
    async validatePassword(e) {
      this._getPasswordPolicyInternal() || (await this._updatePasswordPolicy());
      let t = this._getPasswordPolicyInternal();
      return t.schemaVersion === this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION
        ? t.validatePassword(e)
        : Promise.reject(
            this._errorFactory.create(`unsupported-password-policy-schema-version`, {})
          );
    }
    _getPasswordPolicyInternal() {
      return this.tenantId === null
        ? this._projectPasswordPolicy
        : this._tenantPasswordPolicies[this.tenantId];
    }
    async _updatePasswordPolicy() {
      let e = new Vr(await zr(this));
      this.tenantId === null
        ? (this._projectPasswordPolicy = e)
        : (this._tenantPasswordPolicies[this.tenantId] = e);
    }
    _getPersistenceType() {
      return this.assertedPersistence.persistence.type;
    }
    _getPersistence() {
      return this.assertedPersistence.persistence;
    }
    _updateErrorMap(e) {
      this._errorFactory = new be(`auth`, `Firebase`, e());
    }
    onAuthStateChanged(e, t, n) {
      return this.registerStateListener(this.authStateSubscription, e, t, n);
    }
    beforeAuthStateChanged(e, t) {
      return this.beforeStateQueue.pushCallback(e, t);
    }
    onIdTokenChanged(e, t, n) {
      return this.registerStateListener(this.idTokenSubscription, e, t, n);
    }
    authStateReady() {
      return new Promise((e, t) => {
        if (this.currentUser) e();
        else {
          let n = this.onAuthStateChanged(() => {
            (n(), e());
          }, t);
        }
      });
    }
    async revokeAccessToken(e) {
      if (this.currentUser) {
        let t = {
          providerId: `apple.com`,
          tokenType: `ACCESS_TOKEN`,
          token: e,
          idToken: await this.currentUser.getIdToken(),
        };
        (this.tenantId != null && (t.tenantId = this.tenantId), await hr(this, t));
      }
    }
    toJSON() {
      return {
        apiKey: this.config.apiKey,
        authDomain: this.config.authDomain,
        appName: this.name,
        currentUser: this._currentUser?.toJSON(),
      };
    }
    async _setRedirectUser(e, t) {
      let n = await this.getOrInitRedirectPersistenceManager(t);
      return e === null ? n.removeCurrentUser() : n.setCurrentUser(e);
    }
    async getOrInitRedirectPersistenceManager(e) {
      if (!this.redirectPersistenceManager) {
        let t = (e && br(e)) || this._popupRedirectResolver;
        (A(t, this, `argument-error`),
          (this.redirectPersistenceManager = await wr.create(
            this,
            [br(t._redirectPersistence)],
            `redirectUser`
          )),
          (this.redirectUser = await this.redirectPersistenceManager.getCurrentUser()));
      }
      return this.redirectPersistenceManager;
    }
    async _redirectUserForId(e) {
      return (
        this._isInitialized && (await this.queue(async () => {})),
        this._currentUser?._redirectEventId === e
          ? this._currentUser
          : this.redirectUser?._redirectEventId === e
            ? this.redirectUser
            : null
      );
    }
    async _persistUserIfCurrent(e) {
      if (e === this.currentUser) return this.queue(async () => this.directlySetCurrentUser(e));
    }
    _notifyListenersIfCurrent(e) {
      e === this.currentUser && this.notifyAuthListeners();
    }
    _key() {
      return `${this.config.authDomain}:${this.config.apiKey}:${this.name}`;
    }
    _startProactiveRefresh() {
      ((this.isProactiveRefreshEnabled = !0),
        this.currentUser && this._currentUser._startProactiveRefresh());
    }
    _stopProactiveRefresh() {
      ((this.isProactiveRefreshEnabled = !1),
        this.currentUser && this._currentUser._stopProactiveRefresh());
    }
    get _currentUser() {
      return this.currentUser;
    }
    notifyAuthListeners() {
      if (!this._isInitialized) return;
      this.idTokenSubscription.next(this.currentUser);
      let e = this.currentUser?.uid ?? null;
      this.lastNotifiedUid !== e &&
        ((this.lastNotifiedUid = e), this.authStateSubscription.next(this.currentUser));
    }
    registerStateListener(e, t, n, r) {
      if (this._deleted) return () => {};
      let i = typeof t == `function` ? t : t.next.bind(t),
        a = !1,
        o = this._isInitialized ? Promise.resolve() : this._initializationPromise;
      if (
        (A(o, this, `internal-error`),
        o.then(() => {
          a || i(this.currentUser);
        }),
        typeof t == `function`)
      ) {
        let i = e.addObserver(t, n, r);
        return () => {
          ((a = !0), i());
        };
      } else {
        let n = e.addObserver(t);
        return () => {
          ((a = !0), n());
        };
      }
    }
    async directlySetCurrentUser(e) {
      (this.currentUser && this.currentUser !== e && this._currentUser._stopProactiveRefresh(),
        e && this.isProactiveRefreshEnabled && e._startProactiveRefresh(),
        (this.currentUser = e),
        e
          ? await this.assertedPersistence.setCurrentUser(e)
          : await this.assertedPersistence.removeCurrentUser());
    }
    queue(e) {
      return ((this.operations = this.operations.then(e, e)), this.operations);
    }
    get assertedPersistence() {
      return (A(this.persistenceManager, this, `internal-error`), this.persistenceManager);
    }
    _logFramework(e) {
      !e ||
        this.frameworks.includes(e) ||
        (this.frameworks.push(e),
        this.frameworks.sort(),
        (this.clientVersion = Lr(this.config.clientPlatform, this._getFrameworks())));
    }
    _getFrameworks() {
      return this.frameworks;
    }
    async _getAdditionalHeaders() {
      let e = { "X-Client-Version": this.clientVersion };
      this.app.options.appId && (e[`X-Firebase-gmpid`] = this.app.options.appId);
      let t = await this.heartbeatServiceProvider
        .getImmediate({ optional: !0 })
        ?.getHeartbeatsHeader();
      t && (e[`X-Firebase-Client`] = t);
      let n = await this._getAppCheckToken();
      return (n && (e[`X-Firebase-AppCheck`] = n), e);
    }
    async _getAppCheckToken() {
      if (T(this.app) && this.app.settings.appCheckToken) return this.app.settings.appCheckToken;
      let e = await this.appCheckServiceProvider.getImmediate({ optional: !0 })?.getToken();
      return (e?.error && En(`Error while retrieving App Check token: ${e.error}`), e?.token);
    }
  };
function Ur(e) {
  return b(e);
}
var Wr = class {
    constructor(e) {
      ((this.auth = e),
        (this.observer = null),
        (this.addObserver = ke((e) => (this.observer = e))));
    }
    get next() {
      return (
        A(this.observer, this.auth, `internal-error`),
        this.observer.next.bind(this.observer)
      );
    }
  },
  Gr = {
    async loadJS() {
      throw Error(`Unable to load external scripts`);
    },
    recaptchaV2Script: ``,
    recaptchaEnterpriseScript: ``,
    gapiScript: ``,
  };
function Kr(e) {
  Gr = e;
}
function qr(e) {
  return Gr.loadJS(e);
}
function Jr() {
  return Gr.recaptchaEnterpriseScript;
}
function Yr() {
  return Gr.gapiScript;
}
function Xr(e) {
  return `__${e}${Math.floor(Math.random() * 1e6)}`;
}
var Zr = class {
    constructor() {
      this.enterprise = new Qr();
    }
    ready(e) {
      e();
    }
    execute(e, t) {
      return Promise.resolve(`token`);
    }
    render(e, t) {
      return ``;
    }
  },
  Qr = class {
    ready(e) {
      e();
    }
    execute(e, t) {
      return Promise.resolve(`token`);
    }
    render(e, t) {
      return ``;
    }
  },
  $r = `recaptcha-enterprise`,
  ei = `NO_RECAPTCHA`,
  ti = class {
    constructor(e) {
      ((this.type = $r), (this.auth = Ur(e)));
    }
    async verify(e = `verify`, t = !1) {
      async function n(e) {
        if (!t) {
          if (e.tenantId == null && e._agentRecaptchaConfig != null)
            return e._agentRecaptchaConfig.siteKey;
          if (e.tenantId != null && e._tenantRecaptchaConfigs[e.tenantId] !== void 0)
            return e._tenantRecaptchaConfigs[e.tenantId].siteKey;
        }
        return new Promise(async (t, n) => {
          Qn(e, { clientType: `CLIENT_TYPE_WEB`, version: `RECAPTCHA_ENTERPRISE` })
            .then((r) => {
              if (r.recaptchaKey === void 0) n(Error(`recaptcha Enterprise site key undefined`));
              else {
                let n = new Zn(r);
                return (
                  e.tenantId == null
                    ? (e._agentRecaptchaConfig = n)
                    : (e._tenantRecaptchaConfigs[e.tenantId] = n),
                  t(n.siteKey)
                );
              }
            })
            .catch((e) => {
              n(e);
            });
        });
      }
      function r(t, n, r) {
        let i = window.grecaptcha;
        Xn(i)
          ? i.enterprise.ready(() => {
              i.enterprise
                .execute(t, { action: e })
                .then((e) => {
                  n(e);
                })
                .catch(() => {
                  n(ei);
                });
            })
          : r(Error(`No reCAPTCHA enterprise script loaded.`));
      }
      return this.auth.settings.appVerificationDisabledForTesting
        ? new Zr().execute(`siteKey`, { action: `verify` })
        : new Promise((e, i) => {
            n(this.auth)
              .then((n) => {
                if (!t && Xn(window.grecaptcha)) r(n, e, i);
                else {
                  if (typeof window > `u`) {
                    i(Error(`RecaptchaVerifier is only supported in browser`));
                    return;
                  }
                  let t = Jr();
                  (t.length !== 0 && (t += n),
                    qr(t)
                      .then(() => {
                        r(n, e, i);
                      })
                      .catch((e) => {
                        i(e);
                      }));
                }
              })
              .catch((e) => {
                i(e);
              });
          });
    }
  };
async function ni(e, t, n, r = !1, i = !1) {
  let a = new ti(e),
    o;
  if (i) o = ei;
  else
    try {
      o = await a.verify(n);
    } catch {
      o = await a.verify(n, !0);
    }
  let s = { ...t };
  if (n === `mfaSmsEnrollment` || n === `mfaSmsSignIn`) {
    if (`phoneEnrollmentInfo` in s) {
      let e = s.phoneEnrollmentInfo.phoneNumber,
        t = s.phoneEnrollmentInfo.recaptchaToken;
      Object.assign(s, {
        phoneEnrollmentInfo: {
          phoneNumber: e,
          recaptchaToken: t,
          captchaResponse: o,
          clientType: `CLIENT_TYPE_WEB`,
          recaptchaVersion: `RECAPTCHA_ENTERPRISE`,
        },
      });
    } else if (`phoneSignInInfo` in s) {
      let e = s.phoneSignInInfo.recaptchaToken;
      Object.assign(s, {
        phoneSignInInfo: {
          recaptchaToken: e,
          captchaResponse: o,
          clientType: `CLIENT_TYPE_WEB`,
          recaptchaVersion: `RECAPTCHA_ENTERPRISE`,
        },
      });
    }
    return s;
  }
  return (
    r ? Object.assign(s, { captchaResp: o }) : Object.assign(s, { captchaResponse: o }),
    Object.assign(s, { clientType: `CLIENT_TYPE_WEB` }),
    Object.assign(s, { recaptchaVersion: `RECAPTCHA_ENTERPRISE` }),
    s
  );
}
async function ri(e, t, n, r, i) {
  return i === `EMAIL_PASSWORD_PROVIDER`
    ? e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)
      ? r(e, await ni(e, t, n, n === `getOobCode`))
      : r(e, t).catch(async (i) =>
          i.code === `auth/missing-recaptcha-token`
            ? (console.log(
                `${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`
              ),
              r(e, await ni(e, t, n, n === `getOobCode`)))
            : Promise.reject(i)
        )
    : i === `PHONE_PROVIDER`
      ? e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)
        ? r(e, await ni(e, t, n)).catch(async (i) =>
            e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`) === `AUDIT` &&
            (i.code === `auth/missing-recaptcha-token` || i.code === `auth/invalid-app-credential`)
              ? (console.log(
                  `Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`
                ),
                r(e, await ni(e, t, n, !1, !0)))
              : Promise.reject(i)
          )
        : r(e, await ni(e, t, n, !1, !0))
      : Promise.reject(i + ` provider is not supported.`);
}
async function ii(e) {
  let t = Ur(e),
    n = new Zn(await Qn(t, { clientType: `CLIENT_TYPE_WEB`, version: `RECAPTCHA_ENTERPRISE` }));
  (t.tenantId == null ? (t._agentRecaptchaConfig = n) : (t._tenantRecaptchaConfigs[t.tenantId] = n),
    n.isAnyProviderEnabled() && new ti(t).verify());
}
function ai(e, t) {
  let n = en(e, `auth`);
  if (n.isInitialized()) {
    let e = n.getImmediate();
    if (we(n.getOptions(), t ?? {})) return e;
    k(e, `already-initialized`);
  }
  return n.initialize({ options: t });
}
function oi(e, t) {
  let n = t?.persistence || [],
    r = (Array.isArray(n) ? n : [n]).map(br);
  (t?.errorMap && e._updateErrorMap(t.errorMap),
    e._initializeWithPersistence(r, t?.popupRedirectResolver));
}
function si(e, t, n) {
  let r = Ur(e);
  A(/^https?:\/\//.test(t), r, `invalid-emulator-scheme`);
  let i = !!n?.disableWarnings,
    a = ci(t),
    { host: o, port: s } = li(t),
    c = s === null ? `` : `:${s}`,
    l = { url: `${a}//${o}${c}/` },
    u = Object.freeze({
      host: o,
      port: s,
      protocol: a.replace(`:`, ``),
      options: Object.freeze({ disableWarnings: i }),
    });
  if (!r._canInitEmulator) {
    (A(r.config.emulator && r.emulatorConfig, r, `emulator-config-failed`),
      A(we(l, r.config.emulator) && we(u, r.emulatorConfig), r, `emulator-config-failed`));
    return;
  }
  ((r.config.emulator = l),
    (r.emulatorConfig = u),
    (r.settings.appVerificationDisabledForTesting = !0),
    te(o) ? (ne(`${a}//${o}${c}`), ce(`Auth`, !0)) : i || di());
}
function ci(e) {
  let t = e.indexOf(`:`);
  return t < 0 ? `` : e.substr(0, t + 1);
}
function li(e) {
  let t = ci(e),
    n = /(\/\/)?([^?#/]+)/.exec(e.substr(t.length));
  if (!n) return { host: ``, port: null };
  let r = n[2].split(`@`).pop() || ``,
    i = /^(\[[^\]]+\])(:|$)/.exec(r);
  if (i) {
    let e = i[1];
    return { host: e, port: ui(r.substr(e.length + 1)) };
  } else {
    let [e, t] = r.split(`:`);
    return { host: e, port: ui(t) };
  }
}
function ui(e) {
  if (!e) return null;
  let t = Number(e);
  return isNaN(t) ? null : t;
}
function di() {
  function e() {
    let e = document.createElement(`p`),
      t = e.style;
    ((e.innerText = `Running in emulator mode. Do not use with production credentials.`),
      (t.position = `fixed`),
      (t.width = `100%`),
      (t.backgroundColor = `#ffffff`),
      (t.border = `.1em solid #000000`),
      (t.color = `#b50000`),
      (t.bottom = `0px`),
      (t.left = `0px`),
      (t.margin = `0px`),
      (t.zIndex = `10000`),
      (t.textAlign = `center`),
      e.classList.add(`firebase-emulator-warning`),
      document.body.appendChild(e));
  }
  (typeof console < `u` &&
    typeof console.info == `function` &&
    console.info(
      `WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`
    ),
    typeof window < `u` &&
      typeof document < `u` &&
      (document.readyState === `loading` ? window.addEventListener(`DOMContentLoaded`, e) : e()));
}
var fi = class {
  constructor(e, t) {
    ((this.providerId = e), (this.signInMethod = t));
  }
  toJSON() {
    return Nn(`not implemented`);
  }
  _getIdTokenResponse(e) {
    return Nn(`not implemented`);
  }
  _linkToIdToken(e, t) {
    return Nn(`not implemented`);
  }
  _getReauthenticationResolver(e) {
    return Nn(`not implemented`);
  }
};
async function pi(e, t) {
  return N(e, `POST`, `/v1/accounts:signUp`, t);
}
async function mi(e, t) {
  return P(e, `POST`, `/v1/accounts:signInWithPassword`, M(e, t));
}
async function hi(e, t) {
  return P(e, `POST`, `/v1/accounts:signInWithEmailLink`, M(e, t));
}
async function gi(e, t) {
  return P(e, `POST`, `/v1/accounts:signInWithEmailLink`, M(e, t));
}
var _i = class e extends fi {
  constructor(e, t, n, r = null) {
    (super(`password`, n), (this._email = e), (this._password = t), (this._tenantId = r));
  }
  static _fromEmailAndPassword(t, n) {
    return new e(t, n, `password`);
  }
  static _fromEmailAndCode(t, n, r = null) {
    return new e(t, n, `emailLink`, r);
  }
  toJSON() {
    return {
      email: this._email,
      password: this._password,
      signInMethod: this.signInMethod,
      tenantId: this._tenantId,
    };
  }
  static fromJSON(e) {
    let t = typeof e == `string` ? JSON.parse(e) : e;
    if (t?.email && t?.password) {
      if (t.signInMethod === `password`) return this._fromEmailAndPassword(t.email, t.password);
      if (t.signInMethod === `emailLink`)
        return this._fromEmailAndCode(t.email, t.password, t.tenantId);
    }
    return null;
  }
  async _getIdTokenResponse(e) {
    switch (this.signInMethod) {
      case `password`:
        return ri(
          e,
          {
            returnSecureToken: !0,
            email: this._email,
            password: this._password,
            clientType: `CLIENT_TYPE_WEB`,
          },
          `signInWithPassword`,
          mi,
          `EMAIL_PASSWORD_PROVIDER`
        );
      case `emailLink`:
        return hi(e, { email: this._email, oobCode: this._password });
      default:
        k(e, `internal-error`);
    }
  }
  async _linkToIdToken(e, t) {
    switch (this.signInMethod) {
      case `password`:
        return ri(
          e,
          {
            idToken: t,
            returnSecureToken: !0,
            email: this._email,
            password: this._password,
            clientType: `CLIENT_TYPE_WEB`,
          },
          `signUpPassword`,
          pi,
          `EMAIL_PASSWORD_PROVIDER`
        );
      case `emailLink`:
        return gi(e, { idToken: t, email: this._email, oobCode: this._password });
      default:
        k(e, `internal-error`);
    }
  }
  _getReauthenticationResolver(e) {
    return this._getIdTokenResponse(e);
  }
};
async function vi(e, t) {
  return P(e, `POST`, `/v1/accounts:signInWithIdp`, M(e, t));
}
var yi = `http://localhost`,
  bi = class e extends fi {
    constructor() {
      (super(...arguments), (this.pendingToken = null));
    }
    static _fromParams(t) {
      let n = new e(t.providerId, t.signInMethod);
      return (
        t.idToken || t.accessToken
          ? (t.idToken && (n.idToken = t.idToken),
            t.accessToken && (n.accessToken = t.accessToken),
            t.nonce && !t.pendingToken && (n.nonce = t.nonce),
            t.pendingToken && (n.pendingToken = t.pendingToken))
          : t.oauthToken && t.oauthTokenSecret
            ? ((n.accessToken = t.oauthToken), (n.secret = t.oauthTokenSecret))
            : k(`argument-error`),
        n
      );
    }
    toJSON() {
      return {
        idToken: this.idToken,
        accessToken: this.accessToken,
        secret: this.secret,
        nonce: this.nonce,
        pendingToken: this.pendingToken,
        providerId: this.providerId,
        signInMethod: this.signInMethod,
      };
    }
    static fromJSON(t) {
      let { providerId: n, signInMethod: r, ...i } = typeof t == `string` ? JSON.parse(t) : t;
      if (!n || !r) return null;
      let a = new e(n, r);
      return (
        (a.idToken = i.idToken || void 0),
        (a.accessToken = i.accessToken || void 0),
        (a.secret = i.secret),
        (a.nonce = i.nonce),
        (a.pendingToken = i.pendingToken || null),
        a
      );
    }
    _getIdTokenResponse(e) {
      return vi(e, this.buildRequest());
    }
    _linkToIdToken(e, t) {
      let n = this.buildRequest();
      return ((n.idToken = t), vi(e, n));
    }
    _getReauthenticationResolver(e) {
      let t = this.buildRequest();
      return ((t.autoCreate = !1), vi(e, t));
    }
    buildRequest() {
      let e = { requestUri: yi, returnSecureToken: !0 };
      if (this.pendingToken) e.pendingToken = this.pendingToken;
      else {
        let t = {};
        (this.idToken && (t.id_token = this.idToken),
          this.accessToken && (t.access_token = this.accessToken),
          this.secret && (t.oauth_token_secret = this.secret),
          (t.providerId = this.providerId),
          this.nonce && !this.pendingToken && (t.nonce = this.nonce),
          (e.postBody = Ee(t)));
      }
      return e;
    }
  };
async function xi(e, t) {
  return N(e, `POST`, `/v1/accounts:sendVerificationCode`, M(e, t));
}
async function Si(e, t) {
  return P(e, `POST`, `/v1/accounts:signInWithPhoneNumber`, M(e, t));
}
async function Ci(e, t) {
  let n = await P(e, `POST`, `/v1/accounts:signInWithPhoneNumber`, M(e, t));
  if (n.temporaryProof) throw Yn(e, `account-exists-with-different-credential`, n);
  return n;
}
var wi = { USER_NOT_FOUND: `user-not-found` };
async function Ti(e, t) {
  return P(
    e,
    `POST`,
    `/v1/accounts:signInWithPhoneNumber`,
    M(e, { ...t, operation: `REAUTH` }),
    wi
  );
}
var Ei = class e extends fi {
  constructor(e) {
    (super(`phone`, `phone`), (this.params = e));
  }
  static _fromVerification(t, n) {
    return new e({ verificationId: t, verificationCode: n });
  }
  static _fromTokenResponse(t, n) {
    return new e({ phoneNumber: t, temporaryProof: n });
  }
  _getIdTokenResponse(e) {
    return Si(e, this._makeVerificationRequest());
  }
  _linkToIdToken(e, t) {
    return Ci(e, { idToken: t, ...this._makeVerificationRequest() });
  }
  _getReauthenticationResolver(e) {
    return Ti(e, this._makeVerificationRequest());
  }
  _makeVerificationRequest() {
    let { temporaryProof: e, phoneNumber: t, verificationId: n, verificationCode: r } = this.params;
    return e && t ? { temporaryProof: e, phoneNumber: t } : { sessionInfo: n, code: r };
  }
  toJSON() {
    let e = { providerId: this.providerId };
    return (
      this.params.phoneNumber && (e.phoneNumber = this.params.phoneNumber),
      this.params.temporaryProof && (e.temporaryProof = this.params.temporaryProof),
      this.params.verificationCode && (e.verificationCode = this.params.verificationCode),
      this.params.verificationId && (e.verificationId = this.params.verificationId),
      e
    );
  }
  static fromJSON(t) {
    typeof t == `string` && (t = JSON.parse(t));
    let { verificationId: n, verificationCode: r, phoneNumber: i, temporaryProof: a } = t;
    return !r && !n && !i && !a
      ? null
      : new e({ verificationId: n, verificationCode: r, phoneNumber: i, temporaryProof: a });
  }
};
function Di(e) {
  switch (e) {
    case `recoverEmail`:
      return `RECOVER_EMAIL`;
    case `resetPassword`:
      return `PASSWORD_RESET`;
    case `signIn`:
      return `EMAIL_SIGNIN`;
    case `verifyEmail`:
      return `VERIFY_EMAIL`;
    case `verifyAndChangeEmail`:
      return `VERIFY_AND_CHANGE_EMAIL`;
    case `revertSecondFactorAddition`:
      return `REVERT_SECOND_FACTOR_ADDITION`;
    default:
      return null;
  }
}
function Oi(e) {
  let t = De(Oe(e)).link,
    n = t ? De(Oe(t)).deep_link_id : null,
    r = De(Oe(e)).deep_link_id;
  return (r ? De(Oe(r)).link : null) || r || n || t || e;
}
var ki = class e {
    constructor(e) {
      let t = De(Oe(e)),
        n = t.apiKey ?? null,
        r = t.oobCode ?? null,
        i = Di(t.mode ?? null);
      (A(n && r && i, `argument-error`),
        (this.apiKey = n),
        (this.operation = i),
        (this.code = r),
        (this.continueUrl = t.continueUrl ?? null),
        (this.languageCode = t.lang ?? null),
        (this.tenantId = t.tenantId ?? null));
    }
    static parseLink(t) {
      let n = Oi(t);
      try {
        return new e(n);
      } catch {
        return null;
      }
    }
  },
  Ai = class e {
    constructor() {
      this.providerId = e.PROVIDER_ID;
    }
    static credential(e, t) {
      return _i._fromEmailAndPassword(e, t);
    }
    static credentialWithLink(e, t) {
      let n = ki.parseLink(t);
      return (A(n, `argument-error`), _i._fromEmailAndCode(e, n.code, n.tenantId));
    }
  };
((Ai.PROVIDER_ID = `password`),
  (Ai.EMAIL_PASSWORD_SIGN_IN_METHOD = `password`),
  (Ai.EMAIL_LINK_SIGN_IN_METHOD = `emailLink`));
var ji = class {
    constructor(e) {
      ((this.providerId = e), (this.defaultLanguageCode = null), (this.customParameters = {}));
    }
    setDefaultLanguage(e) {
      this.defaultLanguageCode = e;
    }
    setCustomParameters(e) {
      return ((this.customParameters = e), this);
    }
    getCustomParameters() {
      return this.customParameters;
    }
  },
  Mi = class extends ji {
    constructor() {
      (super(...arguments), (this.scopes = []));
    }
    addScope(e) {
      return (this.scopes.includes(e) || this.scopes.push(e), this);
    }
    getScopes() {
      return [...this.scopes];
    }
  },
  Ni = class e extends Mi {
    constructor() {
      super(`facebook.com`);
    }
    static credential(t) {
      return bi._fromParams({
        providerId: e.PROVIDER_ID,
        signInMethod: e.FACEBOOK_SIGN_IN_METHOD,
        accessToken: t,
      });
    }
    static credentialFromResult(t) {
      return e.credentialFromTaggedObject(t);
    }
    static credentialFromError(t) {
      return e.credentialFromTaggedObject(t.customData || {});
    }
    static credentialFromTaggedObject({ _tokenResponse: t }) {
      if (!t || !(`oauthAccessToken` in t) || !t.oauthAccessToken) return null;
      try {
        return e.credential(t.oauthAccessToken);
      } catch {
        return null;
      }
    }
  };
((Ni.FACEBOOK_SIGN_IN_METHOD = `facebook.com`), (Ni.PROVIDER_ID = `facebook.com`));
var Pi = class e extends Mi {
  constructor() {
    (super(`google.com`), this.addScope(`profile`));
  }
  static credential(t, n) {
    return bi._fromParams({
      providerId: e.PROVIDER_ID,
      signInMethod: e.GOOGLE_SIGN_IN_METHOD,
      idToken: t,
      accessToken: n,
    });
  }
  static credentialFromResult(t) {
    return e.credentialFromTaggedObject(t);
  }
  static credentialFromError(t) {
    return e.credentialFromTaggedObject(t.customData || {});
  }
  static credentialFromTaggedObject({ _tokenResponse: t }) {
    if (!t) return null;
    let { oauthIdToken: n, oauthAccessToken: r } = t;
    if (!n && !r) return null;
    try {
      return e.credential(n, r);
    } catch {
      return null;
    }
  }
};
((Pi.GOOGLE_SIGN_IN_METHOD = `google.com`), (Pi.PROVIDER_ID = `google.com`));
var Fi = class e extends Mi {
  constructor() {
    super(`github.com`);
  }
  static credential(t) {
    return bi._fromParams({
      providerId: e.PROVIDER_ID,
      signInMethod: e.GITHUB_SIGN_IN_METHOD,
      accessToken: t,
    });
  }
  static credentialFromResult(t) {
    return e.credentialFromTaggedObject(t);
  }
  static credentialFromError(t) {
    return e.credentialFromTaggedObject(t.customData || {});
  }
  static credentialFromTaggedObject({ _tokenResponse: t }) {
    if (!t || !(`oauthAccessToken` in t) || !t.oauthAccessToken) return null;
    try {
      return e.credential(t.oauthAccessToken);
    } catch {
      return null;
    }
  }
};
((Fi.GITHUB_SIGN_IN_METHOD = `github.com`), (Fi.PROVIDER_ID = `github.com`));
var Ii = class e extends Mi {
  constructor() {
    super(`twitter.com`);
  }
  static credential(t, n) {
    return bi._fromParams({
      providerId: e.PROVIDER_ID,
      signInMethod: e.TWITTER_SIGN_IN_METHOD,
      oauthToken: t,
      oauthTokenSecret: n,
    });
  }
  static credentialFromResult(t) {
    return e.credentialFromTaggedObject(t);
  }
  static credentialFromError(t) {
    return e.credentialFromTaggedObject(t.customData || {});
  }
  static credentialFromTaggedObject({ _tokenResponse: t }) {
    if (!t) return null;
    let { oauthAccessToken: n, oauthTokenSecret: r } = t;
    if (!n || !r) return null;
    try {
      return e.credential(n, r);
    } catch {
      return null;
    }
  }
};
((Ii.TWITTER_SIGN_IN_METHOD = `twitter.com`), (Ii.PROVIDER_ID = `twitter.com`));
var Li = class e {
  constructor(e) {
    ((this.user = e.user),
      (this.providerId = e.providerId),
      (this._tokenResponse = e._tokenResponse),
      (this.operationType = e.operationType));
  }
  static async _fromIdTokenResponse(t, n, r, i = !1) {
    return new e({
      user: await vr._fromIdTokenResponse(t, r, i),
      providerId: Ri(r),
      _tokenResponse: r,
      operationType: n,
    });
  }
  static async _forOperation(t, n, r) {
    return (
      await t._updateTokensIfNecessary(r, !0),
      new e({ user: t, providerId: Ri(r), _tokenResponse: r, operationType: n })
    );
  }
};
function Ri(e) {
  return e.providerId ? e.providerId : `phoneNumber` in e ? `phone` : null;
}
var zi = class e extends ye {
  constructor(t, n, r, i) {
    (super(n.code, n.message),
      (this.operationType = r),
      (this.user = i),
      Object.setPrototypeOf(this, e.prototype),
      (this.customData = {
        appName: t.name,
        tenantId: t.tenantId ?? void 0,
        _serverResponse: n.customData._serverResponse,
        operationType: r,
      }));
  }
  static _fromErrorAndOperation(t, n, r, i) {
    return new e(t, n, r, i);
  }
};
function Bi(e, t, n, r) {
  return (
    t === `reauthenticate` ? n._getReauthenticationResolver(e) : n._getIdTokenResponse(e)
  ).catch((n) => {
    throw n.code === `auth/multi-factor-auth-required` ? zi._fromErrorAndOperation(e, n, t, r) : n;
  });
}
async function Vi(e, t, n = !1) {
  let r = await or(e, t._linkToIdToken(e.auth, await e.getIdToken()), n);
  return Li._forOperation(e, `link`, r);
}
async function Hi(e, t, n = !1) {
  let { auth: r } = e;
  if (T(r.app)) return Promise.reject(An(r));
  let i = `reauthenticate`;
  try {
    let a = await or(e, Bi(r, i, t, e), n);
    A(a.idToken, r, `internal-error`);
    let o = ir(a.idToken);
    A(o, r, `internal-error`);
    let { sub: s } = o;
    return (A(e.uid === s, r, `user-mismatch`), Li._forOperation(e, i, a));
  } catch (e) {
    throw (e?.code === `auth/user-not-found` && k(r, `user-mismatch`), e);
  }
}
async function Ui(e, t, n = !1) {
  if (T(e.app)) return Promise.reject(An(e));
  let r = `signIn`,
    i = await Bi(e, r, t),
    a = await Li._fromIdTokenResponse(e, r, i);
  return (n || (await e._updateCurrentUser(a.user)), a);
}
function Wi(e, t, n, r) {
  return b(e).onIdTokenChanged(t, n, r);
}
function Gi(e, t, n) {
  return b(e).beforeAuthStateChanged(t, n);
}
function Ki(e, t) {
  return N(e, `POST`, `/v2/accounts/mfaEnrollment:start`, M(e, t));
}
function qi(e, t) {
  return N(e, `POST`, `/v2/accounts/mfaEnrollment:finalize`, M(e, t));
}
function Ji(e, t) {
  return N(e, `POST`, `/v2/accounts/mfaEnrollment:start`, M(e, t));
}
function Yi(e, t) {
  return N(e, `POST`, `/v2/accounts/mfaEnrollment:finalize`, M(e, t));
}
var Xi = `__sak`,
  Zi = class {
    constructor(e, t) {
      ((this.storageRetriever = e), (this.type = t));
    }
    _isAvailable() {
      try {
        return this.storage
          ? (this.storage.setItem(Xi, `1`), this.storage.removeItem(Xi), Promise.resolve(!0))
          : Promise.resolve(!1);
      } catch {
        return Promise.resolve(!1);
      }
    }
    _set(e, t) {
      return (this.storage.setItem(e, JSON.stringify(t)), Promise.resolve());
    }
    _get(e) {
      let t = this.storage.getItem(e);
      return Promise.resolve(t ? JSON.parse(t) : null);
    }
    _remove(e) {
      return (this.storage.removeItem(e), Promise.resolve());
    }
    get storage() {
      return this.storageRetriever();
    }
  },
  Qi = 1e3,
  $i = 10,
  ea = class extends Zi {
    constructor() {
      (super(() => window.localStorage, `LOCAL`),
        (this.boundEventHandler = (e, t) => this.onStorageEvent(e, t)),
        (this.listeners = {}),
        (this.localCache = {}),
        (this.pollTimer = null),
        (this.fallbackToPolling = Ir()),
        (this._shouldAllowMigration = !0));
    }
    forAllChangedKeys(e) {
      for (let t of Object.keys(this.listeners)) {
        let n = this.storage.getItem(t),
          r = this.localCache[t];
        n !== r && e(t, r, n);
      }
    }
    onStorageEvent(e, t = !1) {
      if (!e.key) {
        this.forAllChangedKeys((e, t, n) => {
          this.notifyListeners(e, n);
        });
        return;
      }
      let n = e.key;
      t ? this.detachListener() : this.stopPolling();
      let r = () => {
          let e = this.storage.getItem(n);
          (!t && this.localCache[n] === e) || this.notifyListeners(n, e);
        },
        i = this.storage.getItem(n);
      Fr() && i !== e.newValue && e.newValue !== e.oldValue ? setTimeout(r, $i) : r();
    }
    notifyListeners(e, t) {
      this.localCache[e] = t;
      let n = this.listeners[e];
      if (n) for (let e of Array.from(n)) e(t && JSON.parse(t));
    }
    startPolling() {
      (this.stopPolling(),
        (this.pollTimer = setInterval(() => {
          this.forAllChangedKeys((e, t, n) => {
            this.onStorageEvent(
              new StorageEvent(`storage`, { key: e, oldValue: t, newValue: n }),
              !0
            );
          });
        }, Qi)));
    }
    stopPolling() {
      this.pollTimer &&= (clearInterval(this.pollTimer), null);
    }
    attachListener() {
      window.addEventListener(`storage`, this.boundEventHandler);
    }
    detachListener() {
      window.removeEventListener(`storage`, this.boundEventHandler);
    }
    _addListener(e, t) {
      (Object.keys(this.listeners).length === 0 &&
        (this.fallbackToPolling ? this.startPolling() : this.attachListener()),
        this.listeners[e] ||
          ((this.listeners[e] = new Set()), (this.localCache[e] = this.storage.getItem(e))),
        this.listeners[e].add(t));
    }
    _removeListener(e, t) {
      (this.listeners[e] &&
        (this.listeners[e].delete(t), this.listeners[e].size === 0 && delete this.listeners[e]),
        Object.keys(this.listeners).length === 0 && (this.detachListener(), this.stopPolling()));
    }
    async _set(e, t) {
      (await super._set(e, t), (this.localCache[e] = JSON.stringify(t)));
    }
    async _get(e) {
      let t = await super._get(e);
      return ((this.localCache[e] = JSON.stringify(t)), t);
    }
    async _remove(e) {
      (await super._remove(e), delete this.localCache[e]);
    }
  };
ea.type = `LOCAL`;
var ta = ea,
  na = 1e3;
function ra(e) {
  let t = e.replace(/[\\^$.*+?()[\]{}|]/g, `\\$&`),
    n = RegExp(`${t}=([^;]+)`);
  return document.cookie.match(n)?.[1] ?? null;
}
function ia(e) {
  return `${window.location.protocol === `http:` ? `__dev_` : `__HOST-`}FIREBASE_${e.split(`:`)[3]}`;
}
var aa = class {
  constructor() {
    ((this.type = `COOKIE`), (this.listenerUnsubscribes = new Map()));
  }
  _getFinalTarget(e) {
    let t = new URL(`${window.location.origin}/__cookies__`);
    return (t.searchParams.set(`finalTarget`, e), t);
  }
  async _isAvailable() {
    return (typeof isSecureContext == `boolean` && !isSecureContext) ||
      typeof navigator > `u` ||
      typeof document > `u`
      ? !1
      : (navigator.cookieEnabled ?? !0);
  }
  async _set(e, t) {}
  async _get(e) {
    if (!this._isAvailable()) return null;
    let t = ia(e);
    return window.cookieStore ? (await window.cookieStore.get(t))?.value : ra(t);
  }
  async _remove(e) {
    if (!this._isAvailable() || !(await this._get(e))) return;
    let t = ia(e);
    ((document.cookie = `${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`),
      await fetch(`/__cookies__`, { method: `DELETE` }).catch(() => void 0));
  }
  _addListener(e, t) {
    if (!this._isAvailable()) return;
    let n = ia(e);
    if (window.cookieStore) {
      let e = (e) => {
        let r = e.changed.find((e) => e.name === n);
        (r && t(r.value), e.deleted.find((e) => e.name === n) && t(null));
      };
      return (
        this.listenerUnsubscribes.set(t, () => window.cookieStore.removeEventListener(`change`, e)),
        window.cookieStore.addEventListener(`change`, e)
      );
    }
    let r = ra(n),
      i = setInterval(() => {
        let e = ra(n);
        e !== r && (t(e), (r = e));
      }, na);
    this.listenerUnsubscribes.set(t, () => clearInterval(i));
  }
  _removeListener(e, t) {
    let n = this.listenerUnsubscribes.get(t);
    n && (n(), this.listenerUnsubscribes.delete(t));
  }
};
aa.type = `COOKIE`;
var oa = class extends Zi {
  constructor() {
    super(() => window.sessionStorage, `SESSION`);
  }
  _addListener(e, t) {}
  _removeListener(e, t) {}
};
oa.type = `SESSION`;
var sa = oa;
function ca(e) {
  return Promise.all(
    e.map(async (e) => {
      try {
        return { fulfilled: !0, value: await e };
      } catch (e) {
        return { fulfilled: !1, reason: e };
      }
    })
  );
}
var la = class e {
  constructor(e) {
    ((this.eventTarget = e),
      (this.handlersMap = {}),
      (this.boundEventHandler = this.handleEvent.bind(this)));
  }
  static _getInstance(t) {
    let n = this.receivers.find((e) => e.isListeningto(t));
    if (n) return n;
    let r = new e(t);
    return (this.receivers.push(r), r);
  }
  isListeningto(e) {
    return this.eventTarget === e;
  }
  async handleEvent(e) {
    let t = e,
      { eventId: n, eventType: r, data: i } = t.data,
      a = this.handlersMap[r];
    if (!a?.size) return;
    t.ports[0].postMessage({ status: `ack`, eventId: n, eventType: r });
    let o = await ca(Array.from(a).map(async (e) => e(t.origin, i)));
    t.ports[0].postMessage({ status: `done`, eventId: n, eventType: r, response: o });
  }
  _subscribe(e, t) {
    (Object.keys(this.handlersMap).length === 0 &&
      this.eventTarget.addEventListener(`message`, this.boundEventHandler),
      this.handlersMap[e] || (this.handlersMap[e] = new Set()),
      this.handlersMap[e].add(t));
  }
  _unsubscribe(e, t) {
    (this.handlersMap[e] && t && this.handlersMap[e].delete(t),
      (!t || this.handlersMap[e].size === 0) && delete this.handlersMap[e],
      Object.keys(this.handlersMap).length === 0 &&
        this.eventTarget.removeEventListener(`message`, this.boundEventHandler));
  }
};
la.receivers = [];
function ua(e = ``, t = 10) {
  let n = ``;
  for (let e = 0; e < t; e++) n += Math.floor(Math.random() * 10);
  return e + n;
}
var da = class {
  constructor(e) {
    ((this.target = e), (this.handlers = new Set()));
  }
  removeMessageHandler(e) {
    (e.messageChannel &&
      (e.messageChannel.port1.removeEventListener(`message`, e.onMessage),
      e.messageChannel.port1.close()),
      this.handlers.delete(e));
  }
  async _send(e, t, n = 50) {
    let r = typeof MessageChannel < `u` ? new MessageChannel() : null;
    if (!r) throw Error(`connection_unavailable`);
    let i, a;
    return new Promise((o, s) => {
      let c = ua(``, 20);
      r.port1.start();
      let l = setTimeout(() => {
        s(Error(`unsupported_event`));
      }, n);
      ((a = {
        messageChannel: r,
        onMessage(e) {
          let t = e;
          if (t.data.eventId === c)
            switch (t.data.status) {
              case `ack`:
                (clearTimeout(l),
                  (i = setTimeout(() => {
                    s(Error(`timeout`));
                  }, 3e3)));
                break;
              case `done`:
                (clearTimeout(i), o(t.data.response));
                break;
              default:
                (clearTimeout(l), clearTimeout(i), s(Error(`invalid_response`)));
                break;
            }
        },
      }),
        this.handlers.add(a),
        r.port1.addEventListener(`message`, a.onMessage),
        this.target.postMessage({ eventType: e, eventId: c, data: t }, [r.port2]));
    }).finally(() => {
      a && this.removeMessageHandler(a);
    });
  }
};
function fa() {
  return window;
}
function pa(e) {
  fa().location.href = e;
}
function ma() {
  return fa().WorkerGlobalScope !== void 0 && typeof fa().importScripts == `function`;
}
async function ha() {
  if (!navigator?.serviceWorker) return null;
  try {
    return (await navigator.serviceWorker.ready).active;
  } catch {
    return null;
  }
}
function ga() {
  return navigator?.serviceWorker?.controller || null;
}
function _a() {
  return ma() ? self : null;
}
var va = `firebaseLocalStorageDb`,
  ya = 1,
  ba = `firebaseLocalStorage`,
  xa = `fbase_key`,
  Sa = class {
    constructor(e) {
      this.request = e;
    }
    toPromise() {
      return new Promise((e, t) => {
        (this.request.addEventListener(`success`, () => {
          e(this.request.result);
        }),
          this.request.addEventListener(`error`, () => {
            t(this.request.error);
          }));
      });
    }
  };
function Ca(e, t) {
  return e.transaction([ba], t ? `readwrite` : `readonly`).objectStore(ba);
}
function wa() {
  return new Sa(indexedDB.deleteDatabase(va)).toPromise();
}
function Ta() {
  let e = indexedDB.open(va, ya);
  return new Promise((t, n) => {
    (e.addEventListener(`error`, () => {
      n(e.error);
    }),
      e.addEventListener(`upgradeneeded`, () => {
        let t = e.result;
        try {
          t.createObjectStore(ba, { keyPath: xa });
        } catch (e) {
          n(e);
        }
      }),
      e.addEventListener(`success`, async () => {
        let n = e.result;
        n.objectStoreNames.contains(ba) ? t(n) : (n.close(), await wa(), t(await Ta()));
      }));
  });
}
async function Ea(e, t, n) {
  return new Sa(Ca(e, !0).put({ [xa]: t, value: n })).toPromise();
}
async function Da(e, t) {
  let n = await new Sa(Ca(e, !1).get(t)).toPromise();
  return n === void 0 ? null : n.value;
}
function Oa(e, t) {
  return new Sa(Ca(e, !0).delete(t)).toPromise();
}
var ka = 800,
  Aa = 3,
  ja = class {
    constructor() {
      ((this.type = `LOCAL`),
        (this._shouldAllowMigration = !0),
        (this.listeners = {}),
        (this.localCache = {}),
        (this.pollTimer = null),
        (this.pendingWrites = 0),
        (this.receiver = null),
        (this.sender = null),
        (this.serviceWorkerReceiverAvailable = !1),
        (this.activeServiceWorker = null),
        (this._workerInitializationPromise = this.initializeServiceWorkerMessaging().then(
          () => {},
          () => {}
        )));
    }
    async _openDb() {
      return ((this.db ||= await Ta()), this.db);
    }
    async _withRetries(e) {
      let t = 0;
      for (;;)
        try {
          return await e(await this._openDb());
        } catch (e) {
          if (t++ > Aa) throw e;
          this.db &&= (this.db.close(), void 0);
        }
    }
    async initializeServiceWorkerMessaging() {
      return ma() ? this.initializeReceiver() : this.initializeSender();
    }
    async initializeReceiver() {
      ((this.receiver = la._getInstance(_a())),
        this.receiver._subscribe(`keyChanged`, async (e, t) => ({
          keyProcessed: (await this._poll()).includes(t.key),
        })),
        this.receiver._subscribe(`ping`, async (e, t) => [`keyChanged`]));
    }
    async initializeSender() {
      if (((this.activeServiceWorker = await ha()), !this.activeServiceWorker)) return;
      this.sender = new da(this.activeServiceWorker);
      let e = await this.sender._send(`ping`, {}, 800);
      e &&
        e[0]?.fulfilled &&
        e[0]?.value.includes(`keyChanged`) &&
        (this.serviceWorkerReceiverAvailable = !0);
    }
    async notifyServiceWorker(e) {
      if (!(!this.sender || !this.activeServiceWorker || ga() !== this.activeServiceWorker))
        try {
          await this.sender._send(
            `keyChanged`,
            { key: e },
            this.serviceWorkerReceiverAvailable ? 800 : 50
          );
        } catch {}
    }
    async _isAvailable() {
      try {
        if (!indexedDB) return !1;
        let e = await Ta();
        return (await Ea(e, Xi, `1`), await Oa(e, Xi), !0);
      } catch {}
      return !1;
    }
    async _withPendingWrite(e) {
      this.pendingWrites++;
      try {
        await e();
      } finally {
        this.pendingWrites--;
      }
    }
    async _set(e, t) {
      return this._withPendingWrite(
        async () => (
          await this._withRetries((n) => Ea(n, e, t)),
          (this.localCache[e] = t),
          this.notifyServiceWorker(e)
        )
      );
    }
    async _get(e) {
      let t = await this._withRetries((t) => Da(t, e));
      return ((this.localCache[e] = t), t);
    }
    async _remove(e) {
      return this._withPendingWrite(
        async () => (
          await this._withRetries((t) => Oa(t, e)),
          delete this.localCache[e],
          this.notifyServiceWorker(e)
        )
      );
    }
    async _poll() {
      let e = await this._withRetries((e) => new Sa(Ca(e, !1).getAll()).toPromise());
      if (!e || this.pendingWrites !== 0) return [];
      let t = [],
        n = new Set();
      if (e.length !== 0)
        for (let { fbase_key: r, value: i } of e)
          (n.add(r),
            JSON.stringify(this.localCache[r]) !== JSON.stringify(i) &&
              (this.notifyListeners(r, i), t.push(r)));
      for (let e of Object.keys(this.localCache))
        this.localCache[e] && !n.has(e) && (this.notifyListeners(e, null), t.push(e));
      return t;
    }
    notifyListeners(e, t) {
      this.localCache[e] = t;
      let n = this.listeners[e];
      if (n) for (let e of Array.from(n)) e(t);
    }
    startPolling() {
      (this.stopPolling(), (this.pollTimer = setInterval(async () => this._poll(), ka)));
    }
    stopPolling() {
      this.pollTimer &&= (clearInterval(this.pollTimer), null);
    }
    _addListener(e, t) {
      (Object.keys(this.listeners).length === 0 && this.startPolling(),
        this.listeners[e] || ((this.listeners[e] = new Set()), this._get(e)),
        this.listeners[e].add(t));
    }
    _removeListener(e, t) {
      (this.listeners[e] &&
        (this.listeners[e].delete(t), this.listeners[e].size === 0 && delete this.listeners[e]),
        Object.keys(this.listeners).length === 0 && this.stopPolling());
    }
  };
ja.type = `LOCAL`;
var Ma = ja;
function Na(e, t) {
  return N(e, `POST`, `/v2/accounts/mfaSignIn:start`, M(e, t));
}
function Pa(e, t) {
  return N(e, `POST`, `/v2/accounts/mfaSignIn:finalize`, M(e, t));
}
function Fa(e, t) {
  return N(e, `POST`, `/v2/accounts/mfaSignIn:finalize`, M(e, t));
}
(Xr(`rcb`), new zn(3e4, 6e4));
var Ia = `recaptcha`;
async function La(e, t, n) {
  if (!e._getRecaptchaConfig())
    try {
      await ii(e);
    } catch {
      console.log(
        `Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`
      );
    }
  try {
    let r;
    if (((r = typeof t == `string` ? { phoneNumber: t } : t), `session` in r)) {
      let t = r.session;
      if (`phoneNumber` in r)
        return (
          A(t.type === `enroll`, e, `internal-error`),
          (
            await ri(
              e,
              {
                idToken: t.credential,
                phoneEnrollmentInfo: { phoneNumber: r.phoneNumber, clientType: `CLIENT_TYPE_WEB` },
              },
              `mfaSmsEnrollment`,
              async (e, t) =>
                t.phoneEnrollmentInfo.captchaResponse === ei
                  ? (A(n?.type === Ia, e, `argument-error`), Ki(e, await Ra(e, t, n)))
                  : Ki(e, t),
              `PHONE_PROVIDER`
            ).catch((e) => Promise.reject(e))
          ).phoneSessionInfo.sessionInfo
        );
      {
        A(t.type === `signin`, e, `internal-error`);
        let i = r.multiFactorHint?.uid || r.multiFactorUid;
        return (
          A(i, e, `missing-multi-factor-info`),
          (
            await ri(
              e,
              {
                mfaPendingCredential: t.credential,
                mfaEnrollmentId: i,
                phoneSignInInfo: { clientType: `CLIENT_TYPE_WEB` },
              },
              `mfaSmsSignIn`,
              async (e, t) =>
                t.phoneSignInInfo.captchaResponse === ei
                  ? (A(n?.type === Ia, e, `argument-error`), Na(e, await Ra(e, t, n)))
                  : Na(e, t),
              `PHONE_PROVIDER`
            ).catch((e) => Promise.reject(e))
          ).phoneResponseInfo.sessionInfo
        );
      }
    } else
      return (
        await ri(
          e,
          { phoneNumber: r.phoneNumber, clientType: `CLIENT_TYPE_WEB` },
          `sendVerificationCode`,
          async (e, t) =>
            t.captchaResponse === ei
              ? (A(n?.type === Ia, e, `argument-error`), xi(e, await Ra(e, t, n)))
              : xi(e, t),
          `PHONE_PROVIDER`
        ).catch((e) => Promise.reject(e))
      ).sessionInfo;
  } finally {
    n?._reset();
  }
}
async function Ra(e, t, n) {
  A(n.type === Ia, e, `argument-error`);
  let r = await n.verify();
  A(typeof r == `string`, e, `argument-error`);
  let i = { ...t };
  if (`phoneEnrollmentInfo` in i) {
    let e = i.phoneEnrollmentInfo.phoneNumber,
      t = i.phoneEnrollmentInfo.captchaResponse,
      n = i.phoneEnrollmentInfo.clientType,
      a = i.phoneEnrollmentInfo.recaptchaVersion;
    return (
      Object.assign(i, {
        phoneEnrollmentInfo: {
          phoneNumber: e,
          recaptchaToken: r,
          captchaResponse: t,
          clientType: n,
          recaptchaVersion: a,
        },
      }),
      i
    );
  } else if (`phoneSignInInfo` in i) {
    let e = i.phoneSignInInfo.captchaResponse,
      t = i.phoneSignInInfo.clientType,
      n = i.phoneSignInInfo.recaptchaVersion;
    return (
      Object.assign(i, {
        phoneSignInInfo: {
          recaptchaToken: r,
          captchaResponse: e,
          clientType: t,
          recaptchaVersion: n,
        },
      }),
      i
    );
  } else return (Object.assign(i, { recaptchaToken: r }), i);
}
var za = class e {
  constructor(t) {
    ((this.providerId = e.PROVIDER_ID), (this.auth = Ur(t)));
  }
  verifyPhoneNumber(e, t) {
    return La(this.auth, e, b(t));
  }
  static credential(e, t) {
    return Ei._fromVerification(e, t);
  }
  static credentialFromResult(t) {
    let n = t;
    return e.credentialFromTaggedObject(n);
  }
  static credentialFromError(t) {
    return e.credentialFromTaggedObject(t.customData || {});
  }
  static credentialFromTaggedObject({ _tokenResponse: e }) {
    if (!e) return null;
    let { phoneNumber: t, temporaryProof: n } = e;
    return t && n ? Ei._fromTokenResponse(t, n) : null;
  }
};
((za.PROVIDER_ID = `phone`), (za.PHONE_SIGN_IN_METHOD = `phone`));
function Ba(e, t) {
  return t ? br(t) : (A(e._popupRedirectResolver, e, `argument-error`), e._popupRedirectResolver);
}
var Va = class extends fi {
  constructor(e) {
    (super(`custom`, `custom`), (this.params = e));
  }
  _getIdTokenResponse(e) {
    return vi(e, this._buildIdpRequest());
  }
  _linkToIdToken(e, t) {
    return vi(e, this._buildIdpRequest(t));
  }
  _getReauthenticationResolver(e) {
    return vi(e, this._buildIdpRequest());
  }
  _buildIdpRequest(e) {
    let t = {
      requestUri: this.params.requestUri,
      sessionId: this.params.sessionId,
      postBody: this.params.postBody,
      tenantId: this.params.tenantId,
      pendingToken: this.params.pendingToken,
      returnSecureToken: !0,
      returnIdpCredential: !0,
    };
    return (e && (t.idToken = e), t);
  }
};
function Ha(e) {
  return Ui(e.auth, new Va(e), e.bypassAuthState);
}
function Ua(e) {
  let { auth: t, user: n } = e;
  return (A(n, t, `internal-error`), Hi(n, new Va(e), e.bypassAuthState));
}
async function Wa(e) {
  let { auth: t, user: n } = e;
  return (A(n, t, `internal-error`), Vi(n, new Va(e), e.bypassAuthState));
}
var Ga = class {
    constructor(e, t, n, r, i = !1) {
      ((this.auth = e),
        (this.resolver = n),
        (this.user = r),
        (this.bypassAuthState = i),
        (this.pendingPromise = null),
        (this.eventManager = null),
        (this.filter = Array.isArray(t) ? t : [t]));
    }
    execute() {
      return new Promise(async (e, t) => {
        this.pendingPromise = { resolve: e, reject: t };
        try {
          ((this.eventManager = await this.resolver._initialize(this.auth)),
            await this.onExecution(),
            this.eventManager.registerConsumer(this));
        } catch (e) {
          this.reject(e);
        }
      });
    }
    async onAuthEvent(e) {
      let { urlResponse: t, sessionId: n, postBody: r, tenantId: i, error: a, type: o } = e;
      if (a) {
        this.reject(a);
        return;
      }
      let s = {
        auth: this.auth,
        requestUri: t,
        sessionId: n,
        tenantId: i || void 0,
        postBody: r || void 0,
        user: this.user,
        bypassAuthState: this.bypassAuthState,
      };
      try {
        this.resolve(await this.getIdpTask(o)(s));
      } catch (e) {
        this.reject(e);
      }
    }
    onError(e) {
      this.reject(e);
    }
    getIdpTask(e) {
      switch (e) {
        case `signInViaPopup`:
        case `signInViaRedirect`:
          return Ha;
        case `linkViaPopup`:
        case `linkViaRedirect`:
          return Wa;
        case `reauthViaPopup`:
        case `reauthViaRedirect`:
          return Ua;
        default:
          k(this.auth, `internal-error`);
      }
    }
    resolve(e) {
      (j(this.pendingPromise, `Pending promise was never set`),
        this.pendingPromise.resolve(e),
        this.unregisterAndCleanUp());
    }
    reject(e) {
      (j(this.pendingPromise, `Pending promise was never set`),
        this.pendingPromise.reject(e),
        this.unregisterAndCleanUp());
    }
    unregisterAndCleanUp() {
      (this.eventManager && this.eventManager.unregisterConsumer(this),
        (this.pendingPromise = null),
        this.cleanUp());
    }
  },
  Ka = new zn(2e3, 1e4);
async function qa(e, t, n) {
  if (T(e.app)) return Promise.reject(On(e, `operation-not-supported-in-this-environment`));
  let r = Ur(e);
  return (jn(e, t, ji), new Ja(r, `signInViaPopup`, t, Ba(r, n)).executeNotNull());
}
var Ja = class e extends Ga {
  constructor(t, n, r, i, a) {
    (super(t, n, i, a),
      (this.provider = r),
      (this.authWindow = null),
      (this.pollId = null),
      e.currentPopupAction && e.currentPopupAction.cancel(),
      (e.currentPopupAction = this));
  }
  async executeNotNull() {
    let e = await this.execute();
    return (A(e, this.auth, `internal-error`), e);
  }
  async onExecution() {
    j(this.filter.length === 1, `Popup operations only handle one event`);
    let e = ua();
    ((this.authWindow = await this.resolver._openPopup(
      this.auth,
      this.provider,
      this.filter[0],
      e
    )),
      (this.authWindow.associatedEvent = e),
      this.resolver._originValidation(this.auth).catch((e) => {
        this.reject(e);
      }),
      this.resolver._isIframeWebStorageSupported(this.auth, (e) => {
        e || this.reject(On(this.auth, `web-storage-unsupported`));
      }),
      this.pollUserCancellation());
  }
  get eventId() {
    return this.authWindow?.associatedEvent || null;
  }
  cancel() {
    this.reject(On(this.auth, `cancelled-popup-request`));
  }
  cleanUp() {
    (this.authWindow && this.authWindow.close(),
      this.pollId && window.clearTimeout(this.pollId),
      (this.authWindow = null),
      (this.pollId = null),
      (e.currentPopupAction = null));
  }
  pollUserCancellation() {
    let e = () => {
      if (this.authWindow?.window?.closed) {
        this.pollId = window.setTimeout(() => {
          ((this.pollId = null), this.reject(On(this.auth, `popup-closed-by-user`)));
        }, 8e3);
        return;
      }
      this.pollId = window.setTimeout(e, Ka.get());
    };
    e();
  }
};
Ja.currentPopupAction = null;
var Ya = `pendingRedirect`,
  Xa = new Map(),
  Za = class extends Ga {
    constructor(e, t, n = !1) {
      (super(
        e,
        [`signInViaRedirect`, `linkViaRedirect`, `reauthViaRedirect`, `unknown`],
        t,
        void 0,
        n
      ),
        (this.eventId = null));
    }
    async execute() {
      let e = Xa.get(this.auth._key());
      if (!e) {
        try {
          let t = (await Qa(this.resolver, this.auth)) ? await super.execute() : null;
          e = () => Promise.resolve(t);
        } catch (t) {
          e = () => Promise.reject(t);
        }
        Xa.set(this.auth._key(), e);
      }
      return (this.bypassAuthState || Xa.set(this.auth._key(), () => Promise.resolve(null)), e());
    }
    async onAuthEvent(e) {
      if (e.type === `signInViaRedirect`) return super.onAuthEvent(e);
      if (e.type === `unknown`) {
        this.resolve(null);
        return;
      }
      if (e.eventId) {
        let t = await this.auth._redirectUserForId(e.eventId);
        if (t) return ((this.user = t), super.onAuthEvent(e));
        this.resolve(null);
      }
    }
    async onExecution() {}
    cleanUp() {}
  };
async function Qa(e, t) {
  let n = to(t),
    r = eo(e);
  if (!(await r._isAvailable())) return !1;
  let i = (await r._get(n)) === `true`;
  return (await r._remove(n), i);
}
function $a(e, t) {
  Xa.set(e._key(), t);
}
function eo(e) {
  return br(e._redirectPersistence);
}
function to(e) {
  return Cr(Ya, e.config.apiKey, e.name);
}
async function no(e, t, n = !1) {
  if (T(e.app)) return Promise.reject(An(e));
  let r = Ur(e),
    i = await new Za(r, Ba(r, t), n).execute();
  return (
    i &&
      !n &&
      (delete i.user._redirectEventId,
      await r._persistUserIfCurrent(i.user),
      await r._setRedirectUser(null, t)),
    i
  );
}
var ro = 600 * 1e3,
  io = class {
    constructor(e) {
      ((this.auth = e),
        (this.cachedEventUids = new Set()),
        (this.consumers = new Set()),
        (this.queuedRedirectEvent = null),
        (this.hasHandledPotentialRedirect = !1),
        (this.lastProcessedEventTime = Date.now()));
    }
    registerConsumer(e) {
      (this.consumers.add(e),
        this.queuedRedirectEvent &&
          this.isEventForConsumer(this.queuedRedirectEvent, e) &&
          (this.sendToConsumer(this.queuedRedirectEvent, e),
          this.saveEventToCache(this.queuedRedirectEvent),
          (this.queuedRedirectEvent = null)));
    }
    unregisterConsumer(e) {
      this.consumers.delete(e);
    }
    onEvent(e) {
      if (this.hasEventBeenHandled(e)) return !1;
      let t = !1;
      return (
        this.consumers.forEach((n) => {
          this.isEventForConsumer(e, n) &&
            ((t = !0), this.sendToConsumer(e, n), this.saveEventToCache(e));
        }),
        this.hasHandledPotentialRedirect || !so(e)
          ? t
          : ((this.hasHandledPotentialRedirect = !0),
            (t ||= ((this.queuedRedirectEvent = e), !0)),
            t)
      );
    }
    sendToConsumer(e, t) {
      if (e.error && !oo(e)) {
        let n = e.error.code?.split(`auth/`)[1] || `internal-error`;
        t.onError(On(this.auth, n));
      } else t.onAuthEvent(e);
    }
    isEventForConsumer(e, t) {
      let n = t.eventId === null || (!!e.eventId && e.eventId === t.eventId);
      return t.filter.includes(e.type) && n;
    }
    hasEventBeenHandled(e) {
      return (
        Date.now() - this.lastProcessedEventTime >= ro && this.cachedEventUids.clear(),
        this.cachedEventUids.has(ao(e))
      );
    }
    saveEventToCache(e) {
      (this.cachedEventUids.add(ao(e)), (this.lastProcessedEventTime = Date.now()));
    }
  };
function ao(e) {
  return [e.type, e.eventId, e.sessionId, e.tenantId].filter((e) => e).join(`-`);
}
function oo({ type: e, error: t }) {
  return e === `unknown` && t?.code === `auth/no-auth-event`;
}
function so(e) {
  switch (e.type) {
    case `signInViaRedirect`:
    case `linkViaRedirect`:
    case `reauthViaRedirect`:
      return !0;
    case `unknown`:
      return oo(e);
    default:
      return !1;
  }
}
async function co(e, t = {}) {
  return N(e, `GET`, `/v1/projects`, t);
}
var lo = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,
  uo = /^https?/;
async function fo(e) {
  if (e.config.emulator) return;
  let { authorizedDomains: t } = await co(e);
  for (let e of t)
    try {
      if (po(e)) return;
    } catch {}
  k(e, `unauthorized-domain`);
}
function po(e) {
  let t = Pn(),
    { protocol: n, hostname: r } = new URL(t);
  if (e.startsWith(`chrome-extension://`)) {
    let i = new URL(e);
    return i.hostname === `` && r === ``
      ? n === `chrome-extension:` &&
          e.replace(`chrome-extension://`, ``) === t.replace(`chrome-extension://`, ``)
      : n === `chrome-extension:` && i.hostname === r;
  }
  if (!uo.test(n)) return !1;
  if (lo.test(e)) return r === e;
  let i = e.replace(/\./g, `\\.`);
  return RegExp(`^(.+\\.` + i + `|` + i + `)$`, `i`).test(r);
}
var mo = new zn(3e4, 6e4);
function ho() {
  let e = fa().___jsl;
  if (e?.H) {
    for (let t of Object.keys(e.H))
      if (
        ((e.H[t].r = e.H[t].r || []), (e.H[t].L = e.H[t].L || []), (e.H[t].r = [...e.H[t].L]), e.CP)
      )
        for (let t = 0; t < e.CP.length; t++) e.CP[t] = null;
  }
}
function go(e) {
  return new Promise((t, n) => {
    function r() {
      (ho(),
        gapi.load(`gapi.iframes`, {
          callback: () => {
            t(gapi.iframes.getContext());
          },
          ontimeout: () => {
            (ho(), n(On(e, `network-request-failed`)));
          },
          timeout: mo.get(),
        }));
    }
    if (fa().gapi?.iframes?.Iframe) t(gapi.iframes.getContext());
    else if (fa().gapi?.load) r();
    else {
      let t = Xr(`iframefcb`);
      return (
        (fa()[t] = () => {
          gapi.load ? r() : n(On(e, `network-request-failed`));
        }),
        qr(`${Yr()}?onload=${t}`).catch((e) => n(e))
      );
    }
  }).catch((e) => {
    throw ((_o = null), e);
  });
}
var _o = null;
function vo(e) {
  return ((_o ||= go(e)), _o);
}
var yo = new zn(5e3, 15e3),
  bo = `__/auth/iframe`,
  xo = `emulator/auth/iframe`,
  So = {
    style: { position: `absolute`, top: `-100px`, width: `1px`, height: `1px` },
    "aria-hidden": `true`,
    tabindex: `-1`,
  },
  Co = new Map([
    [`identitytoolkit.googleapis.com`, `p`],
    [`staging-identitytoolkit.sandbox.googleapis.com`, `s`],
    [`test-identitytoolkit.sandbox.googleapis.com`, `t`],
  ]);
function wo(e) {
  let t = e.config;
  A(t.authDomain, e, `auth-domain-config-required`);
  let n = t.emulator ? Bn(t, xo) : `https://${e.config.authDomain}/${bo}`,
    r = { apiKey: t.apiKey, appName: e.name, v: nn },
    i = Co.get(e.config.apiHost);
  i && (r.eid = i);
  let a = e._getFrameworks();
  return (a.length && (r.fw = a.join(`,`)), `${n}?${Ee(r).slice(1)}`);
}
async function To(e) {
  let t = await vo(e),
    n = fa().gapi;
  return (
    A(n, e, `internal-error`),
    t.open(
      {
        where: document.body,
        url: wo(e),
        messageHandlersFilter: n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,
        attributes: So,
        dontclear: !0,
      },
      (t) =>
        new Promise(async (n, r) => {
          await t.restyle({ setHideOnLeave: !1 });
          let i = On(e, `network-request-failed`),
            a = fa().setTimeout(() => {
              r(i);
            }, yo.get());
          function o() {
            (fa().clearTimeout(a), n(t));
          }
          t.ping(o).then(o, () => {
            r(i);
          });
        })
    )
  );
}
var Eo = { location: `yes`, resizable: `yes`, statusbar: `yes`, toolbar: `no` },
  Do = 500,
  Oo = 600,
  ko = `_blank`,
  Ao = `http://localhost`,
  jo = class {
    constructor(e) {
      ((this.window = e), (this.associatedEvent = null));
    }
    close() {
      if (this.window)
        try {
          this.window.close();
        } catch {}
    }
  };
function Mo(e, t, n, r = Do, i = Oo) {
  let a = Math.max((window.screen.availHeight - i) / 2, 0).toString(),
    o = Math.max((window.screen.availWidth - r) / 2, 0).toString(),
    s = ``,
    c = { ...Eo, width: r.toString(), height: i.toString(), top: a, left: o },
    l = _().toLowerCase();
  (n && (s = Or(l) ? ko : n), Er(l) && ((t ||= Ao), (c.scrollbars = `yes`)));
  let u = Object.entries(c).reduce((e, [t, n]) => `${e}${t}=${n},`, ``);
  if (Pr(l) && s !== `_self`) return (No(t || ``, s), new jo(null));
  let d = window.open(t || ``, s, u);
  A(d, e, `popup-blocked`);
  try {
    d.focus();
  } catch {}
  return new jo(d);
}
function No(e, t) {
  let n = document.createElement(`a`);
  ((n.href = e), (n.target = t));
  let r = document.createEvent(`MouseEvent`);
  (r.initMouseEvent(`click`, !0, !0, window, 1, 0, 0, 0, 0, !1, !1, !1, !1, 1, null),
    n.dispatchEvent(r));
}
var Po = `__/auth/handler`,
  Fo = `emulator/auth/handler`,
  Io = `fac`;
async function Lo(e, t, n, r, i, a) {
  (A(e.config.authDomain, e, `auth-domain-config-required`),
    A(e.config.apiKey, e, `invalid-api-key`));
  let o = {
    apiKey: e.config.apiKey,
    appName: e.name,
    authType: n,
    redirectUrl: r,
    v: nn,
    eventId: i,
  };
  if (t instanceof ji) {
    (t.setDefaultLanguage(e.languageCode),
      (o.providerId = t.providerId || ``),
      Ce(t.getCustomParameters()) ||
        (o.customParameters = JSON.stringify(t.getCustomParameters())));
    for (let [e, t] of Object.entries(a || {})) o[e] = t;
  }
  if (t instanceof Mi) {
    let e = t.getScopes().filter((e) => e !== ``);
    e.length > 0 && (o.scopes = e.join(`,`));
  }
  e.tenantId && (o.tid = e.tenantId);
  let s = o;
  for (let e of Object.keys(s)) s[e] === void 0 && delete s[e];
  let c = await e._getAppCheckToken(),
    l = c ? `#${Io}=${encodeURIComponent(c)}` : ``;
  return `${Ro(e)}?${Ee(s).slice(1)}${l}`;
}
function Ro({ config: e }) {
  return e.emulator ? Bn(e, Fo) : `https://${e.authDomain}/${Po}`;
}
var zo = `webStorageSupport`,
  Bo = class {
    constructor() {
      ((this.eventManagers = {}),
        (this.iframes = {}),
        (this.originValidationPromises = {}),
        (this._redirectPersistence = sa),
        (this._completeRedirectFn = no),
        (this._overrideRedirectResult = $a));
    }
    async _openPopup(e, t, n, r) {
      return (
        j(this.eventManagers[e._key()]?.manager, `_initialize() not called before _openPopup()`),
        Mo(e, await Lo(e, t, n, Pn(), r), ua())
      );
    }
    async _openRedirect(e, t, n, r) {
      return (
        await this._originValidation(e),
        pa(await Lo(e, t, n, Pn(), r)),
        new Promise(() => {})
      );
    }
    _initialize(e) {
      let t = e._key();
      if (this.eventManagers[t]) {
        let { manager: e, promise: n } = this.eventManagers[t];
        return e ? Promise.resolve(e) : (j(n, `If manager is not set, promise should be`), n);
      }
      let n = this.initAndGetManager(e);
      return (
        (this.eventManagers[t] = { promise: n }),
        n.catch(() => {
          delete this.eventManagers[t];
        }),
        n
      );
    }
    async initAndGetManager(e) {
      let t = await To(e),
        n = new io(e);
      return (
        t.register(
          `authEvent`,
          (t) => (
            A(t?.authEvent, e, `invalid-auth-event`),
            { status: n.onEvent(t.authEvent) ? `ACK` : `ERROR` }
          ),
          gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER
        ),
        (this.eventManagers[e._key()] = { manager: n }),
        (this.iframes[e._key()] = t),
        n
      );
    }
    _isIframeWebStorageSupported(e, t) {
      this.iframes[e._key()].send(
        zo,
        { type: zo },
        (n) => {
          let r = n?.[0]?.[zo];
          (r !== void 0 && t(!!r), k(e, `internal-error`));
        },
        gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER
      );
    }
    _originValidation(e) {
      let t = e._key();
      return (
        this.originValidationPromises[t] || (this.originValidationPromises[t] = fo(e)),
        this.originValidationPromises[t]
      );
    }
    get _shouldInitProactively() {
      return Ir() || Dr() || Nr();
    }
  },
  Vo = class {
    constructor(e) {
      this.factorId = e;
    }
    _process(e, t, n) {
      switch (t.type) {
        case `enroll`:
          return this._finalizeEnroll(e, t.credential, n);
        case `signin`:
          return this._finalizeSignIn(e, t.credential);
        default:
          return Nn(`unexpected MultiFactorSessionType`);
      }
    }
  },
  Ho = class e extends Vo {
    constructor(e) {
      (super(`phone`), (this.credential = e));
    }
    static _fromCredential(t) {
      return new e(t);
    }
    _finalizeEnroll(e, t, n) {
      return qi(e, {
        idToken: t,
        displayName: n,
        phoneVerificationInfo: this.credential._makeVerificationRequest(),
      });
    }
    _finalizeSignIn(e, t) {
      return Pa(e, {
        mfaPendingCredential: t,
        phoneVerificationInfo: this.credential._makeVerificationRequest(),
      });
    }
  },
  Uo = class {
    constructor() {}
    static assertion(e) {
      return Ho._fromCredential(e);
    }
  };
Uo.FACTOR_ID = `phone`;
var Wo = class {
  static assertionForEnrollment(e, t) {
    return Go._fromSecret(e, t);
  }
  static assertionForSignIn(e, t) {
    return Go._fromEnrollmentId(e, t);
  }
  static async generateSecret(e) {
    let t = e;
    A(t.user?.auth !== void 0, `internal-error`);
    let n = await Ji(t.user.auth, { idToken: t.credential, totpEnrollmentInfo: {} });
    return Ko._fromStartTotpMfaEnrollmentResponse(n, t.user.auth);
  }
};
Wo.FACTOR_ID = `totp`;
var Go = class e extends Vo {
    constructor(e, t, n) {
      (super(`totp`), (this.otp = e), (this.enrollmentId = t), (this.secret = n));
    }
    static _fromSecret(t, n) {
      return new e(n, void 0, t);
    }
    static _fromEnrollmentId(t, n) {
      return new e(n, t);
    }
    async _finalizeEnroll(e, t, n) {
      return (
        A(this.secret !== void 0, e, `argument-error`),
        Yi(e, {
          idToken: t,
          displayName: n,
          totpVerificationInfo: this.secret._makeTotpVerificationInfo(this.otp),
        })
      );
    }
    async _finalizeSignIn(e, t) {
      A(this.enrollmentId !== void 0 && this.otp !== void 0, e, `argument-error`);
      let n = { verificationCode: this.otp };
      return Fa(e, {
        mfaPendingCredential: t,
        mfaEnrollmentId: this.enrollmentId,
        totpVerificationInfo: n,
      });
    }
  },
  Ko = class e {
    constructor(e, t, n, r, i, a, o) {
      ((this.sessionInfo = a),
        (this.auth = o),
        (this.secretKey = e),
        (this.hashingAlgorithm = t),
        (this.codeLength = n),
        (this.codeIntervalSeconds = r),
        (this.enrollmentCompletionDeadline = i));
    }
    static _fromStartTotpMfaEnrollmentResponse(t, n) {
      return new e(
        t.totpSessionInfo.sharedSecretKey,
        t.totpSessionInfo.hashingAlgorithm,
        t.totpSessionInfo.verificationCodeLength,
        t.totpSessionInfo.periodSec,
        new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),
        t.totpSessionInfo.sessionInfo,
        n
      );
    }
    _makeTotpVerificationInfo(e) {
      return { sessionInfo: this.sessionInfo, verificationCode: e };
    }
    generateQrCodeUrl(e, t) {
      let n = !1;
      return (
        (qo(e) || qo(t)) && (n = !0),
        n &&
          (qo(e) && (e = this.auth.currentUser?.email || `unknownuser`),
          qo(t) && (t = this.auth.name)),
        `otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`
      );
    }
  };
function qo(e) {
  return e === void 0 || e?.length === 0;
}
var Jo = `@firebase/auth`,
  Yo = `1.12.0`,
  Xo = class {
    constructor(e) {
      ((this.auth = e), (this.internalListeners = new Map()));
    }
    getUid() {
      return (this.assertAuthConfigured(), this.auth.currentUser?.uid || null);
    }
    async getToken(e) {
      return (
        this.assertAuthConfigured(),
        await this.auth._initializationPromise,
        this.auth.currentUser ? { accessToken: await this.auth.currentUser.getIdToken(e) } : null
      );
    }
    addAuthTokenListener(e) {
      if ((this.assertAuthConfigured(), this.internalListeners.has(e))) return;
      let t = this.auth.onIdTokenChanged((t) => {
        e(t?.stsTokenManager.accessToken || null);
      });
      (this.internalListeners.set(e, t), this.updateProactiveRefresh());
    }
    removeAuthTokenListener(e) {
      this.assertAuthConfigured();
      let t = this.internalListeners.get(e);
      t && (this.internalListeners.delete(e), t(), this.updateProactiveRefresh());
    }
    assertAuthConfigured() {
      A(this.auth._initializationPromise, `dependent-sdk-initialized-before-auth`);
    }
    updateProactiveRefresh() {
      this.internalListeners.size > 0
        ? this.auth._startProactiveRefresh()
        : this.auth._stopProactiveRefresh();
    }
  };
function Zo(e) {
  switch (e) {
    case `Node`:
      return `node`;
    case `ReactNative`:
      return `rn`;
    case `Worker`:
      return `webworker`;
    case `Cordova`:
      return `cordova`;
    case `WebExtension`:
      return `web-extension`;
    default:
      return;
  }
}
function Qo(e) {
  ($t(
    new x(
      `auth`,
      (t, { options: n }) => {
        let r = t.getProvider(`app`).getImmediate(),
          i = t.getProvider(`heartbeat`),
          a = t.getProvider(`app-check-internal`),
          { apiKey: o, authDomain: s } = r.options;
        A(o && !o.includes(`:`), `invalid-api-key`, { appName: r.name });
        let c = new Hr(r, i, a, {
          apiKey: o,
          authDomain: s,
          clientPlatform: e,
          apiHost: `identitytoolkit.googleapis.com`,
          tokenApiHost: `securetoken.googleapis.com`,
          apiScheme: `https`,
          sdkClientVersion: Lr(e),
        });
        return (oi(c, n), c);
      },
      `PUBLIC`
    )
      .setInstantiationMode(`EXPLICIT`)
      .setInstanceCreatedCallback((e, t, n) => {
        e.getProvider(`auth-internal`).initialize();
      })
  ),
    $t(
      new x(
        `auth-internal`,
        (e) => ((e) => new Xo(e))(Ur(e.getProvider(`auth`).getImmediate())),
        `PRIVATE`
      ).setInstantiationMode(`EXPLICIT`)
    ),
    D(Jo, Yo, Zo(e)),
    D(Jo, Yo, `esm2020`));
}
var $o = g(`authIdTokenMaxAge`) || 300,
  es = null,
  ts = (e) => async (t) => {
    let n = t && (await t.getIdTokenResult()),
      r = n && (new Date().getTime() - Date.parse(n.issuedAtTime)) / 1e3;
    if (r && r > $o) return;
    let i = n?.token;
    es !== i &&
      ((es = i),
      await fetch(e, {
        method: i ? `POST` : `DELETE`,
        headers: i ? { Authorization: `Bearer ${i}` } : {},
      }));
  };
function ns(e = an()) {
  let t = en(e, `auth`);
  if (t.isInitialized()) return t.getImmediate();
  let n = ai(e, { popupRedirectResolver: Bo, persistence: [Ma, ta, sa] }),
    r = g(`authTokenSyncURL`);
  if (r && typeof isSecureContext == `boolean` && isSecureContext) {
    let e = new URL(r, location.origin);
    if (location.origin === e.origin) {
      let t = ts(e.toString());
      (Gi(n, t, () => t(n.currentUser)), Wi(n, (e) => t(e)));
    }
  }
  let i = p(`auth`);
  return (i && si(n, `http://${i}`), n);
}
function rs() {
  return document.getElementsByTagName(`head`)?.[0] ?? document;
}
(Kr({
  loadJS(e) {
    return new Promise((t, n) => {
      let r = document.createElement(`script`);
      (r.setAttribute(`src`, e),
        (r.onload = t),
        (r.onerror = (e) => {
          let t = On(`internal-error`);
          ((t.customData = e), n(t));
        }),
        (r.type = `text/javascript`),
        (r.charset = `UTF-8`),
        rs().appendChild(r));
    });
  },
  gapiScript: `https://apis.google.com/js/api.js`,
  recaptchaV2Script: `https://www.google.com/recaptcha/api.js`,
  recaptchaEnterpriseScript: `https://www.google.com/recaptcha/enterprise.js?render=`,
}),
  Qo(`Browser`));
var is = `@firebase/installations`,
  as = `0.6.19`,
  os = 1e4,
  ss = `w:${as}`,
  cs = `FIS_v2`,
  ls = `https://firebaseinstallations.googleapis.com/v1`,
  us = 3600 * 1e3,
  ds = new be(`installations`, `Installations`, {
    "missing-app-config-values": `Missing App configuration value: "{$valueName}"`,
    "not-registered": `Firebase Installation is not registered.`,
    "installation-not-found": `Firebase Installation not found.`,
    "request-failed": `{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"`,
    "app-offline": `Could not process request. Application offline.`,
    "delete-pending-registration": `Can't delete installation while there is a pending registration request.`,
  });
function fs(e) {
  return e instanceof ye && e.code.includes(`request-failed`);
}
function ps({ projectId: e }) {
  return `${ls}/projects/${e}/installations`;
}
function ms(e) {
  return { token: e.token, requestStatus: 2, expiresIn: ys(e.expiresIn), creationTime: Date.now() };
}
async function hs(e, t) {
  let n = (await t.json()).error;
  return ds.create(`request-failed`, {
    requestName: e,
    serverCode: n.code,
    serverMessage: n.message,
    serverStatus: n.status,
  });
}
function gs({ apiKey: e }) {
  return new Headers({
    "Content-Type": `application/json`,
    Accept: `application/json`,
    "x-goog-api-key": e,
  });
}
function _s(e, { refreshToken: t }) {
  let n = gs(e);
  return (n.append(`Authorization`, bs(t)), n);
}
async function vs(e) {
  let t = await e();
  return t.status >= 500 && t.status < 600 ? e() : t;
}
function ys(e) {
  return Number(e.replace(`s`, `000`));
}
function bs(e) {
  return `${cs} ${e}`;
}
async function xs({ appConfig: e, heartbeatServiceProvider: t }, { fid: n }) {
  let r = ps(e),
    i = gs(e),
    a = t.getImmediate({ optional: !0 });
  if (a) {
    let e = await a.getHeartbeatsHeader();
    e && i.append(`x-firebase-client`, e);
  }
  let o = { fid: n, authVersion: cs, appId: e.appId, sdkVersion: ss },
    s = { method: `POST`, headers: i, body: JSON.stringify(o) },
    c = await vs(() => fetch(r, s));
  if (c.ok) {
    let e = await c.json();
    return {
      fid: e.fid || n,
      registrationStatus: 2,
      refreshToken: e.refreshToken,
      authToken: ms(e.authToken),
    };
  } else throw await hs(`Create Installation`, c);
}
function Ss(e) {
  return new Promise((t) => {
    setTimeout(t, e);
  });
}
function Cs(e) {
  return btoa(String.fromCharCode(...e))
    .replace(/\+/g, `-`)
    .replace(/\//g, `_`);
}
var ws = /^[cdef][\w-]{21}$/,
  Ts = ``;
function Es() {
  try {
    let e = new Uint8Array(17);
    ((self.crypto || self.msCrypto).getRandomValues(e), (e[0] = 112 + (e[0] % 16)));
    let t = Ds(e);
    return ws.test(t) ? t : Ts;
  } catch {
    return Ts;
  }
}
function Ds(e) {
  return Cs(e).substr(0, 22);
}
function Os(e) {
  return `${e.appName}!${e.appId}`;
}
var ks = new Map();
function As(e, t) {
  let n = Os(e);
  (js(n, t), Ms(n, t));
}
function js(e, t) {
  let n = ks.get(e);
  if (n) for (let e of n) e(t);
}
function Ms(e, t) {
  let n = Ps();
  (n && n.postMessage({ key: e, fid: t }), Fs());
}
var Ns = null;
function Ps() {
  return (
    !Ns &&
      `BroadcastChannel` in self &&
      ((Ns = new BroadcastChannel(`[Firebase] FID Change`)),
      (Ns.onmessage = (e) => {
        js(e.data.key, e.data.fid);
      })),
    Ns
  );
}
function Fs() {
  ks.size === 0 && Ns && (Ns.close(), (Ns = null));
}
var Is = `firebase-installations-database`,
  Ls = 1,
  Rs = `firebase-installations-store`,
  zs = null;
function Bs() {
  return (
    (zs ||= dt(Is, Ls, {
      upgrade: (e, t) => {
        switch (t) {
          case 0:
            e.createObjectStore(Rs);
        }
      },
    })),
    zs
  );
}
async function Vs(e, t) {
  let n = Os(e),
    r = (await Bs()).transaction(Rs, `readwrite`),
    i = r.objectStore(Rs),
    a = await i.get(n);
  return (await i.put(t, n), await r.done, (!a || a.fid !== t.fid) && As(e, t.fid), t);
}
async function Hs(e) {
  let t = Os(e),
    n = (await Bs()).transaction(Rs, `readwrite`);
  (await n.objectStore(Rs).delete(t), await n.done);
}
async function Us(e, t) {
  let n = Os(e),
    r = (await Bs()).transaction(Rs, `readwrite`),
    i = r.objectStore(Rs),
    a = await i.get(n),
    o = t(a);
  return (
    o === void 0 ? await i.delete(n) : await i.put(o, n),
    await r.done,
    o && (!a || a.fid !== o.fid) && As(e, o.fid),
    o
  );
}
async function Ws(e) {
  let t,
    n = await Us(e.appConfig, (n) => {
      let r = Ks(e, Gs(n));
      return ((t = r.registrationPromise), r.installationEntry);
    });
  return n.fid === Ts
    ? { installationEntry: await t }
    : { installationEntry: n, registrationPromise: t };
}
function Gs(e) {
  return Xs(e || { fid: Es(), registrationStatus: 0 });
}
function Ks(e, t) {
  if (t.registrationStatus === 0) {
    if (!navigator.onLine)
      return {
        installationEntry: t,
        registrationPromise: Promise.reject(ds.create(`app-offline`)),
      };
    let n = { fid: t.fid, registrationStatus: 1, registrationTime: Date.now() };
    return { installationEntry: n, registrationPromise: qs(e, n) };
  } else if (t.registrationStatus === 1)
    return { installationEntry: t, registrationPromise: Js(e) };
  else return { installationEntry: t };
}
async function qs(e, t) {
  try {
    let n = await xs(e, t);
    return Vs(e.appConfig, n);
  } catch (n) {
    throw (
      fs(n) && n.customData.serverCode === 409
        ? await Hs(e.appConfig)
        : await Vs(e.appConfig, { fid: t.fid, registrationStatus: 0 }),
      n
    );
  }
}
async function Js(e) {
  let t = await Ys(e.appConfig);
  for (; t.registrationStatus === 1; ) (await Ss(100), (t = await Ys(e.appConfig)));
  if (t.registrationStatus === 0) {
    let { installationEntry: t, registrationPromise: n } = await Ws(e);
    return n || t;
  }
  return t;
}
function Ys(e) {
  return Us(e, (e) => {
    if (!e) throw ds.create(`installation-not-found`);
    return Xs(e);
  });
}
function Xs(e) {
  return Zs(e) ? { fid: e.fid, registrationStatus: 0 } : e;
}
function Zs(e) {
  return e.registrationStatus === 1 && e.registrationTime + os < Date.now();
}
async function Qs({ appConfig: e, heartbeatServiceProvider: t }, n) {
  let r = $s(e, n),
    i = _s(e, n),
    a = t.getImmediate({ optional: !0 });
  if (a) {
    let e = await a.getHeartbeatsHeader();
    e && i.append(`x-firebase-client`, e);
  }
  let o = { installation: { sdkVersion: ss, appId: e.appId } },
    s = { method: `POST`, headers: i, body: JSON.stringify(o) },
    c = await vs(() => fetch(r, s));
  if (c.ok) return ms(await c.json());
  throw await hs(`Generate Auth Token`, c);
}
function $s(e, { fid: t }) {
  return `${ps(e)}/${t}/authTokens:generate`;
}
async function ec(e, t = !1) {
  let n,
    r = await Us(e.appConfig, (r) => {
      if (!ic(r)) throw ds.create(`not-registered`);
      let i = r.authToken;
      if (!t && ac(i)) return r;
      if (i.requestStatus === 1) return ((n = tc(e, t)), r);
      {
        if (!navigator.onLine) throw ds.create(`app-offline`);
        let t = sc(r);
        return ((n = rc(e, t)), t);
      }
    });
  return n ? await n : r.authToken;
}
async function tc(e, t) {
  let n = await nc(e.appConfig);
  for (; n.authToken.requestStatus === 1; ) (await Ss(100), (n = await nc(e.appConfig)));
  let r = n.authToken;
  return r.requestStatus === 0 ? ec(e, t) : r;
}
function nc(e) {
  return Us(e, (e) => {
    if (!ic(e)) throw ds.create(`not-registered`);
    let t = e.authToken;
    return cc(t) ? { ...e, authToken: { requestStatus: 0 } } : e;
  });
}
async function rc(e, t) {
  try {
    let n = await Qs(e, t),
      r = { ...t, authToken: n };
    return (await Vs(e.appConfig, r), n);
  } catch (n) {
    if (fs(n) && (n.customData.serverCode === 401 || n.customData.serverCode === 404))
      await Hs(e.appConfig);
    else {
      let n = { ...t, authToken: { requestStatus: 0 } };
      await Vs(e.appConfig, n);
    }
    throw n;
  }
}
function ic(e) {
  return e !== void 0 && e.registrationStatus === 2;
}
function ac(e) {
  return e.requestStatus === 2 && !oc(e);
}
function oc(e) {
  let t = Date.now();
  return t < e.creationTime || e.creationTime + e.expiresIn < t + us;
}
function sc(e) {
  let t = { requestStatus: 1, requestTime: Date.now() };
  return { ...e, authToken: t };
}
function cc(e) {
  return e.requestStatus === 1 && e.requestTime + os < Date.now();
}
async function lc(e) {
  let t = e,
    { installationEntry: n, registrationPromise: r } = await Ws(t);
  return (r ? r.catch(console.error) : ec(t).catch(console.error), n.fid);
}
async function uc(e, t = !1) {
  let n = e;
  return (await dc(n), (await ec(n, t)).token);
}
async function dc(e) {
  let { registrationPromise: t } = await Ws(e);
  t && (await t);
}
function fc(e) {
  if (!e || !e.options) throw pc(`App Configuration`);
  if (!e.name) throw pc(`App Name`);
  for (let t of [`projectId`, `apiKey`, `appId`]) if (!e.options[t]) throw pc(t);
  return {
    appName: e.name,
    projectId: e.options.projectId,
    apiKey: e.options.apiKey,
    appId: e.options.appId,
  };
}
function pc(e) {
  return ds.create(`missing-app-config-values`, { valueName: e });
}
var mc = `installations`,
  hc = `installations-internal`,
  gc = (e) => {
    let t = e.getProvider(`app`).getImmediate();
    return {
      app: t,
      appConfig: fc(t),
      heartbeatServiceProvider: en(t, `heartbeat`),
      _delete: () => Promise.resolve(),
    };
  },
  _c = (e) => {
    let t = en(e.getProvider(`app`).getImmediate(), mc).getImmediate();
    return { getId: () => lc(t), getToken: (e) => uc(t, e) };
  };
function vc() {
  ($t(new x(mc, gc, `PUBLIC`)), $t(new x(hc, _c, `PRIVATE`)));
}
(vc(), D(is, as), D(is, as, `esm2020`));
var yc = `analytics`,
  bc = `firebase_id`,
  xc = `origin`,
  Sc = 60 * 1e3,
  Cc = `https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig`,
  wc = `https://www.googletagmanager.com/gtag/js`,
  F = new qe(`@firebase/analytics`),
  Tc = new be(`analytics`, `Analytics`, {
    "already-exists": `A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.`,
    "already-initialized": `initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.`,
    "already-initialized-settings": `Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.`,
    "interop-component-reg-failed": `Firebase Analytics Interop Component failed to instantiate: {$reason}`,
    "invalid-analytics-context": `Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}`,
    "indexeddb-unavailable": `IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}`,
    "fetch-throttle": `The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.`,
    "config-fetch-failed": `Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}`,
    "no-api-key": `The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.`,
    "no-app-id": `The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.`,
    "no-client-id": `The "client_id" field is empty.`,
    "invalid-gtag-resource": `Trusted Types detected an invalid gtag resource: {$gtagURL}.`,
  });
function Ec(e) {
  if (!e.startsWith(wc)) {
    let t = Tc.create(`invalid-gtag-resource`, { gtagURL: e });
    return (F.warn(t.message), ``);
  }
  return e;
}
function Dc(e) {
  return Promise.all(e.map((e) => e.catch((e) => e)));
}
function Oc(e, t) {
  let n;
  return (window.trustedTypes && (n = window.trustedTypes.createPolicy(e, t)), n);
}
function kc(e, t) {
  let n = Oc(`firebase-js-sdk-policy`, { createScriptURL: Ec }),
    r = document.createElement(`script`),
    i = `${wc}?l=${e}&id=${t}`;
  ((r.src = n ? n?.createScriptURL(i) : i), (r.async = !0), document.head.appendChild(r));
}
function Ac(e) {
  let t = [];
  return (Array.isArray(window[e]) ? (t = window[e]) : (window[e] = t), t);
}
async function jc(e, t, n, r, i, a) {
  let o = r[i];
  try {
    if (o) await t[o];
    else {
      let e = (await Dc(n)).find((e) => e.measurementId === i);
      e && (await t[e.appId]);
    }
  } catch (e) {
    F.error(e);
  }
  e(`config`, i, a);
}
async function Mc(e, t, n, r, i) {
  try {
    let a = [];
    if (i && i.send_to) {
      let e = i.send_to;
      Array.isArray(e) || (e = [e]);
      let r = await Dc(n);
      for (let n of e) {
        let e = r.find((e) => e.measurementId === n),
          i = e && t[e.appId];
        if (i) a.push(i);
        else {
          a = [];
          break;
        }
      }
    }
    (a.length === 0 && (a = Object.values(t)), await Promise.all(a), e(`event`, r, i || {}));
  } catch (e) {
    F.error(e);
  }
}
function Nc(e, t, n, r) {
  async function i(i, ...a) {
    try {
      if (i === `event`) {
        let [r, i] = a;
        await Mc(e, t, n, r, i);
      } else if (i === `config`) {
        let [i, o] = a;
        await jc(e, t, n, r, i, o);
      } else if (i === `consent`) {
        let [t, n] = a;
        e(`consent`, t, n);
      } else if (i === `get`) {
        let [t, n, r] = a;
        e(`get`, t, n, r);
      } else if (i === `set`) {
        let [t] = a;
        e(`set`, t);
      } else e(i, ...a);
    } catch (e) {
      F.error(e);
    }
  }
  return i;
}
function Pc(e, t, n, r, i) {
  let a = function (...e) {
    window[r].push(arguments);
  };
  return (
    window[i] && typeof window[i] == `function` && (a = window[i]),
    (window[i] = Nc(a, e, t, n)),
    { gtagCore: a, wrappedGtag: window[i] }
  );
}
function Fc(e) {
  let t = window.document.getElementsByTagName(`script`);
  for (let n of Object.values(t)) if (n.src && n.src.includes(wc) && n.src.includes(e)) return n;
  return null;
}
var Ic = 30,
  Lc = 1e3,
  Rc = new (class {
    constructor(e = {}, t = Lc) {
      ((this.throttleMetadata = e), (this.intervalMillis = t));
    }
    getThrottleMetadata(e) {
      return this.throttleMetadata[e];
    }
    setThrottleMetadata(e, t) {
      this.throttleMetadata[e] = t;
    }
    deleteThrottleMetadata(e) {
      delete this.throttleMetadata[e];
    }
  })();
function zc(e) {
  return new Headers({ Accept: `application/json`, "x-goog-api-key": e });
}
async function Bc(e) {
  let { appId: t, apiKey: n } = e,
    r = { method: `GET`, headers: zc(n) },
    i = Cc.replace(`{app-id}`, t),
    a = await fetch(i, r);
  if (a.status !== 200 && a.status !== 304) {
    let e = ``;
    try {
      let t = await a.json();
      t.error?.message && (e = t.error.message);
    } catch {}
    throw Tc.create(`config-fetch-failed`, { httpStatus: a.status, responseMessage: e });
  }
  return a.json();
}
async function Vc(e, t = Rc, n) {
  let { appId: r, apiKey: i, measurementId: a } = e.options;
  if (!r) throw Tc.create(`no-app-id`);
  if (!i) {
    if (a) return { measurementId: a, appId: r };
    throw Tc.create(`no-api-key`);
  }
  let o = t.getThrottleMetadata(r) || { backoffCount: 0, throttleEndTimeMillis: Date.now() },
    s = new Gc();
  return (
    setTimeout(
      async () => {
        s.abort();
      },
      n === void 0 ? Sc : n
    ),
    Hc({ appId: r, apiKey: i, measurementId: a }, o, s, t)
  );
}
async function Hc(e, { throttleEndTimeMillis: t, backoffCount: n }, r, i = Rc) {
  let { appId: a, measurementId: o } = e;
  try {
    await Uc(r, t);
  } catch (e) {
    if (o)
      return (
        F.warn(
          `Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${e?.message}]`
        ),
        { appId: a, measurementId: o }
      );
    throw e;
  }
  try {
    let t = await Bc(e);
    return (i.deleteThrottleMetadata(a), t);
  } catch (t) {
    let s = t;
    if (!Wc(s)) {
      if ((i.deleteThrottleMetadata(a), o))
        return (
          F.warn(
            `Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${s?.message}]`
          ),
          { appId: a, measurementId: o }
        );
      throw t;
    }
    let c =
        Number(s?.customData?.httpStatus) === 503
          ? y(n, i.intervalMillis, Ic)
          : y(n, i.intervalMillis),
      l = { throttleEndTimeMillis: Date.now() + c, backoffCount: n + 1 };
    return (
      i.setThrottleMetadata(a, l),
      F.debug(`Calling attemptFetch again in ${c} millis`),
      Hc(e, l, r, i)
    );
  }
}
function Uc(e, t) {
  return new Promise((n, r) => {
    let i = Math.max(t - Date.now(), 0),
      a = setTimeout(n, i);
    e.addEventListener(() => {
      (clearTimeout(a), r(Tc.create(`fetch-throttle`, { throttleEndTimeMillis: t })));
    });
  });
}
function Wc(e) {
  if (!(e instanceof ye) || !e.customData) return !1;
  let t = Number(e.customData.httpStatus);
  return t === 429 || t === 500 || t === 503 || t === 504;
}
var Gc = class {
    constructor() {
      this.listeners = [];
    }
    addEventListener(e) {
      this.listeners.push(e);
    }
    abort() {
      this.listeners.forEach((e) => e());
    }
  },
  Kc;
async function qc(e, t, n, r, i) {
  if (i && i.global) {
    e(`event`, n, r);
    return;
  } else {
    let i = await t;
    e(`event`, n, { ...r, send_to: i });
  }
}
async function Jc(e, t, n, r) {
  if (r && r.global) {
    let t = {};
    for (let e of Object.keys(n)) t[`user_properties.${e}`] = n[e];
    return (e(`set`, t), Promise.resolve());
  } else e(`config`, await t, { update: !0, user_properties: n });
}
var Yc;
function Xc(e) {
  Yc = e;
}
function Zc(e) {
  Kc = e;
}
async function Qc() {
  if (he())
    try {
      await ge();
    } catch (e) {
      return (F.warn(Tc.create(`indexeddb-unavailable`, { errorInfo: e?.toString() }).message), !1);
    }
  else
    return (
      F.warn(
        Tc.create(`indexeddb-unavailable`, {
          errorInfo: `IndexedDB is not available in this environment.`,
        }).message
      ),
      !1
    );
  return !0;
}
async function $c(e, t, n, r, i, a, o) {
  let s = Vc(e);
  (s
    .then((t) => {
      ((n[t.measurementId] = t.appId),
        e.options.measurementId &&
          t.measurementId !== e.options.measurementId &&
          F.warn(
            `The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`
          ));
    })
    .catch((e) => F.error(e)),
    t.push(s));
  let c = Qc().then((e) => {
      if (e) return r.getId();
    }),
    [l, u] = await Promise.all([s, c]);
  (Fc(a) || kc(a, l.measurementId),
    Yc && (i(`consent`, `default`, Yc), Xc(void 0)),
    i(`js`, new Date()));
  let d = o?.config ?? {};
  return (
    (d[xc] = `firebase`),
    (d.update = !0),
    u != null && (d[bc] = u),
    i(`config`, l.measurementId, d),
    Kc && (i(`set`, Kc), Zc(void 0)),
    l.measurementId
  );
}
var el = class {
    constructor(e) {
      this.app = e;
    }
    _delete() {
      return (delete tl[this.app.options.appId], Promise.resolve());
    }
  },
  tl = {},
  nl = [],
  rl = {},
  il = `dataLayer`,
  al = `gtag`,
  ol,
  sl,
  cl = !1;
function ll() {
  let e = [];
  if (
    (de() && e.push(`This is a browser extension environment.`),
    _e() || e.push(`Cookies are not available.`),
    e.length > 0)
  ) {
    let t = e.map((e, t) => `(${t + 1}) ${e}`).join(` `),
      n = Tc.create(`invalid-analytics-context`, { errorInfo: t });
    F.warn(n.message);
  }
}
function ul(e, t, n) {
  ll();
  let r = e.options.appId;
  if (!r) throw Tc.create(`no-app-id`);
  if (!e.options.apiKey)
    if (e.options.measurementId)
      F.warn(
        `The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`
      );
    else throw Tc.create(`no-api-key`);
  if (tl[r] != null) throw Tc.create(`already-exists`, { id: r });
  if (!cl) {
    Ac(il);
    let { wrappedGtag: e, gtagCore: t } = Pc(tl, nl, rl, il, al);
    ((sl = e), (ol = t), (cl = !0));
  }
  return ((tl[r] = $c(e, nl, rl, t, ol, il, n)), new el(e));
}
function dl(e = an()) {
  e = b(e);
  let t = en(e, yc);
  return t.isInitialized() ? t.getImmediate() : fl(e);
}
function fl(e, t = {}) {
  let n = en(e, yc);
  if (n.isInitialized()) {
    let e = n.getImmediate();
    if (we(t, n.getOptions())) return e;
    throw Tc.create(`already-initialized`);
  }
  return n.initialize({ options: t });
}
function pl(e, t, n) {
  ((e = b(e)), Jc(sl, tl[e.app.options.appId], t, n).catch((e) => F.error(e)));
}
function ml(e, t, n, r) {
  ((e = b(e)), qc(sl, tl[e.app.options.appId], t, n, r).catch((e) => F.error(e)));
}
var hl = `@firebase/analytics`,
  gl = `0.10.19`;
function _l() {
  ($t(
    new x(
      yc,
      (e, { options: t }) =>
        ul(
          e.getProvider(`app`).getImmediate(),
          e.getProvider(`installations-internal`).getImmediate(),
          t
        ),
      `PUBLIC`
    )
  ),
    $t(new x(`analytics-internal`, e, `PRIVATE`)),
    D(hl, gl),
    D(hl, gl, `esm2020`));
  function e(e) {
    try {
      let t = e.getProvider(yc).getImmediate();
      return { logEvent: (e, n, r) => ml(t, e, n, r), setUserProperties: (e, n) => pl(t, e, n) };
    } catch (e) {
      throw Tc.create(`interop-component-reg-failed`, { reason: e });
    }
  }
}
_l();
var vl =
    typeof globalThis < `u`
      ? globalThis
      : typeof window < `u`
        ? window
        : typeof global < `u`
          ? global
          : typeof self < `u`
            ? self
            : {},
  yl = {},
  bl;
(function () {
  var e;
  function t(e, t) {
    function n() {}
    ((n.prototype = t.prototype),
      (e.F = t.prototype),
      (e.prototype = new n()),
      (e.prototype.constructor = e),
      (e.D = function (e, n, r) {
        for (var i = Array(arguments.length - 2), a = 2; a < arguments.length; a++)
          i[a - 2] = arguments[a];
        return t.prototype[n].apply(e, i);
      }));
  }
  function n() {
    this.blockSize = -1;
  }
  function r() {
    ((this.blockSize = -1),
      (this.blockSize = 64),
      (this.g = [, , , ,]),
      (this.C = Array(this.blockSize)),
      (this.o = this.h = 0),
      this.u());
  }
  (t(r, n),
    (r.prototype.u = function () {
      ((this.g[0] = 1732584193),
        (this.g[1] = 4023233417),
        (this.g[2] = 2562383102),
        (this.g[3] = 271733878),
        (this.o = this.h = 0));
    }));
  function i(e, t, n) {
    n ||= 0;
    let r = Array(16);
    if (typeof t == `string`)
      for (var i = 0; i < 16; ++i)
        r[i] =
          t.charCodeAt(n++) |
          (t.charCodeAt(n++) << 8) |
          (t.charCodeAt(n++) << 16) |
          (t.charCodeAt(n++) << 24);
    else for (i = 0; i < 16; ++i) r[i] = t[n++] | (t[n++] << 8) | (t[n++] << 16) | (t[n++] << 24);
    ((t = e.g[0]), (n = e.g[1]), (i = e.g[2]));
    let a = e.g[3],
      o;
    ((o = (t + (a ^ (n & (i ^ a))) + r[0] + 3614090360) & 4294967295),
      (t = n + (((o << 7) & 4294967295) | (o >>> 25))),
      (o = (a + (i ^ (t & (n ^ i))) + r[1] + 3905402710) & 4294967295),
      (a = t + (((o << 12) & 4294967295) | (o >>> 20))),
      (o = (i + (n ^ (a & (t ^ n))) + r[2] + 606105819) & 4294967295),
      (i = a + (((o << 17) & 4294967295) | (o >>> 15))),
      (o = (n + (t ^ (i & (a ^ t))) + r[3] + 3250441966) & 4294967295),
      (n = i + (((o << 22) & 4294967295) | (o >>> 10))),
      (o = (t + (a ^ (n & (i ^ a))) + r[4] + 4118548399) & 4294967295),
      (t = n + (((o << 7) & 4294967295) | (o >>> 25))),
      (o = (a + (i ^ (t & (n ^ i))) + r[5] + 1200080426) & 4294967295),
      (a = t + (((o << 12) & 4294967295) | (o >>> 20))),
      (o = (i + (n ^ (a & (t ^ n))) + r[6] + 2821735955) & 4294967295),
      (i = a + (((o << 17) & 4294967295) | (o >>> 15))),
      (o = (n + (t ^ (i & (a ^ t))) + r[7] + 4249261313) & 4294967295),
      (n = i + (((o << 22) & 4294967295) | (o >>> 10))),
      (o = (t + (a ^ (n & (i ^ a))) + r[8] + 1770035416) & 4294967295),
      (t = n + (((o << 7) & 4294967295) | (o >>> 25))),
      (o = (a + (i ^ (t & (n ^ i))) + r[9] + 2336552879) & 4294967295),
      (a = t + (((o << 12) & 4294967295) | (o >>> 20))),
      (o = (i + (n ^ (a & (t ^ n))) + r[10] + 4294925233) & 4294967295),
      (i = a + (((o << 17) & 4294967295) | (o >>> 15))),
      (o = (n + (t ^ (i & (a ^ t))) + r[11] + 2304563134) & 4294967295),
      (n = i + (((o << 22) & 4294967295) | (o >>> 10))),
      (o = (t + (a ^ (n & (i ^ a))) + r[12] + 1804603682) & 4294967295),
      (t = n + (((o << 7) & 4294967295) | (o >>> 25))),
      (o = (a + (i ^ (t & (n ^ i))) + r[13] + 4254626195) & 4294967295),
      (a = t + (((o << 12) & 4294967295) | (o >>> 20))),
      (o = (i + (n ^ (a & (t ^ n))) + r[14] + 2792965006) & 4294967295),
      (i = a + (((o << 17) & 4294967295) | (o >>> 15))),
      (o = (n + (t ^ (i & (a ^ t))) + r[15] + 1236535329) & 4294967295),
      (n = i + (((o << 22) & 4294967295) | (o >>> 10))),
      (o = (t + (i ^ (a & (n ^ i))) + r[1] + 4129170786) & 4294967295),
      (t = n + (((o << 5) & 4294967295) | (o >>> 27))),
      (o = (a + (n ^ (i & (t ^ n))) + r[6] + 3225465664) & 4294967295),
      (a = t + (((o << 9) & 4294967295) | (o >>> 23))),
      (o = (i + (t ^ (n & (a ^ t))) + r[11] + 643717713) & 4294967295),
      (i = a + (((o << 14) & 4294967295) | (o >>> 18))),
      (o = (n + (a ^ (t & (i ^ a))) + r[0] + 3921069994) & 4294967295),
      (n = i + (((o << 20) & 4294967295) | (o >>> 12))),
      (o = (t + (i ^ (a & (n ^ i))) + r[5] + 3593408605) & 4294967295),
      (t = n + (((o << 5) & 4294967295) | (o >>> 27))),
      (o = (a + (n ^ (i & (t ^ n))) + r[10] + 38016083) & 4294967295),
      (a = t + (((o << 9) & 4294967295) | (o >>> 23))),
      (o = (i + (t ^ (n & (a ^ t))) + r[15] + 3634488961) & 4294967295),
      (i = a + (((o << 14) & 4294967295) | (o >>> 18))),
      (o = (n + (a ^ (t & (i ^ a))) + r[4] + 3889429448) & 4294967295),
      (n = i + (((o << 20) & 4294967295) | (o >>> 12))),
      (o = (t + (i ^ (a & (n ^ i))) + r[9] + 568446438) & 4294967295),
      (t = n + (((o << 5) & 4294967295) | (o >>> 27))),
      (o = (a + (n ^ (i & (t ^ n))) + r[14] + 3275163606) & 4294967295),
      (a = t + (((o << 9) & 4294967295) | (o >>> 23))),
      (o = (i + (t ^ (n & (a ^ t))) + r[3] + 4107603335) & 4294967295),
      (i = a + (((o << 14) & 4294967295) | (o >>> 18))),
      (o = (n + (a ^ (t & (i ^ a))) + r[8] + 1163531501) & 4294967295),
      (n = i + (((o << 20) & 4294967295) | (o >>> 12))),
      (o = (t + (i ^ (a & (n ^ i))) + r[13] + 2850285829) & 4294967295),
      (t = n + (((o << 5) & 4294967295) | (o >>> 27))),
      (o = (a + (n ^ (i & (t ^ n))) + r[2] + 4243563512) & 4294967295),
      (a = t + (((o << 9) & 4294967295) | (o >>> 23))),
      (o = (i + (t ^ (n & (a ^ t))) + r[7] + 1735328473) & 4294967295),
      (i = a + (((o << 14) & 4294967295) | (o >>> 18))),
      (o = (n + (a ^ (t & (i ^ a))) + r[12] + 2368359562) & 4294967295),
      (n = i + (((o << 20) & 4294967295) | (o >>> 12))),
      (o = (t + (n ^ i ^ a) + r[5] + 4294588738) & 4294967295),
      (t = n + (((o << 4) & 4294967295) | (o >>> 28))),
      (o = (a + (t ^ n ^ i) + r[8] + 2272392833) & 4294967295),
      (a = t + (((o << 11) & 4294967295) | (o >>> 21))),
      (o = (i + (a ^ t ^ n) + r[11] + 1839030562) & 4294967295),
      (i = a + (((o << 16) & 4294967295) | (o >>> 16))),
      (o = (n + (i ^ a ^ t) + r[14] + 4259657740) & 4294967295),
      (n = i + (((o << 23) & 4294967295) | (o >>> 9))),
      (o = (t + (n ^ i ^ a) + r[1] + 2763975236) & 4294967295),
      (t = n + (((o << 4) & 4294967295) | (o >>> 28))),
      (o = (a + (t ^ n ^ i) + r[4] + 1272893353) & 4294967295),
      (a = t + (((o << 11) & 4294967295) | (o >>> 21))),
      (o = (i + (a ^ t ^ n) + r[7] + 4139469664) & 4294967295),
      (i = a + (((o << 16) & 4294967295) | (o >>> 16))),
      (o = (n + (i ^ a ^ t) + r[10] + 3200236656) & 4294967295),
      (n = i + (((o << 23) & 4294967295) | (o >>> 9))),
      (o = (t + (n ^ i ^ a) + r[13] + 681279174) & 4294967295),
      (t = n + (((o << 4) & 4294967295) | (o >>> 28))),
      (o = (a + (t ^ n ^ i) + r[0] + 3936430074) & 4294967295),
      (a = t + (((o << 11) & 4294967295) | (o >>> 21))),
      (o = (i + (a ^ t ^ n) + r[3] + 3572445317) & 4294967295),
      (i = a + (((o << 16) & 4294967295) | (o >>> 16))),
      (o = (n + (i ^ a ^ t) + r[6] + 76029189) & 4294967295),
      (n = i + (((o << 23) & 4294967295) | (o >>> 9))),
      (o = (t + (n ^ i ^ a) + r[9] + 3654602809) & 4294967295),
      (t = n + (((o << 4) & 4294967295) | (o >>> 28))),
      (o = (a + (t ^ n ^ i) + r[12] + 3873151461) & 4294967295),
      (a = t + (((o << 11) & 4294967295) | (o >>> 21))),
      (o = (i + (a ^ t ^ n) + r[15] + 530742520) & 4294967295),
      (i = a + (((o << 16) & 4294967295) | (o >>> 16))),
      (o = (n + (i ^ a ^ t) + r[2] + 3299628645) & 4294967295),
      (n = i + (((o << 23) & 4294967295) | (o >>> 9))),
      (o = (t + (i ^ (n | ~a)) + r[0] + 4096336452) & 4294967295),
      (t = n + (((o << 6) & 4294967295) | (o >>> 26))),
      (o = (a + (n ^ (t | ~i)) + r[7] + 1126891415) & 4294967295),
      (a = t + (((o << 10) & 4294967295) | (o >>> 22))),
      (o = (i + (t ^ (a | ~n)) + r[14] + 2878612391) & 4294967295),
      (i = a + (((o << 15) & 4294967295) | (o >>> 17))),
      (o = (n + (a ^ (i | ~t)) + r[5] + 4237533241) & 4294967295),
      (n = i + (((o << 21) & 4294967295) | (o >>> 11))),
      (o = (t + (i ^ (n | ~a)) + r[12] + 1700485571) & 4294967295),
      (t = n + (((o << 6) & 4294967295) | (o >>> 26))),
      (o = (a + (n ^ (t | ~i)) + r[3] + 2399980690) & 4294967295),
      (a = t + (((o << 10) & 4294967295) | (o >>> 22))),
      (o = (i + (t ^ (a | ~n)) + r[10] + 4293915773) & 4294967295),
      (i = a + (((o << 15) & 4294967295) | (o >>> 17))),
      (o = (n + (a ^ (i | ~t)) + r[1] + 2240044497) & 4294967295),
      (n = i + (((o << 21) & 4294967295) | (o >>> 11))),
      (o = (t + (i ^ (n | ~a)) + r[8] + 1873313359) & 4294967295),
      (t = n + (((o << 6) & 4294967295) | (o >>> 26))),
      (o = (a + (n ^ (t | ~i)) + r[15] + 4264355552) & 4294967295),
      (a = t + (((o << 10) & 4294967295) | (o >>> 22))),
      (o = (i + (t ^ (a | ~n)) + r[6] + 2734768916) & 4294967295),
      (i = a + (((o << 15) & 4294967295) | (o >>> 17))),
      (o = (n + (a ^ (i | ~t)) + r[13] + 1309151649) & 4294967295),
      (n = i + (((o << 21) & 4294967295) | (o >>> 11))),
      (o = (t + (i ^ (n | ~a)) + r[4] + 4149444226) & 4294967295),
      (t = n + (((o << 6) & 4294967295) | (o >>> 26))),
      (o = (a + (n ^ (t | ~i)) + r[11] + 3174756917) & 4294967295),
      (a = t + (((o << 10) & 4294967295) | (o >>> 22))),
      (o = (i + (t ^ (a | ~n)) + r[2] + 718787259) & 4294967295),
      (i = a + (((o << 15) & 4294967295) | (o >>> 17))),
      (o = (n + (a ^ (i | ~t)) + r[9] + 3951481745) & 4294967295),
      (e.g[0] = (e.g[0] + t) & 4294967295),
      (e.g[1] = (e.g[1] + (i + (((o << 21) & 4294967295) | (o >>> 11)))) & 4294967295),
      (e.g[2] = (e.g[2] + i) & 4294967295),
      (e.g[3] = (e.g[3] + a) & 4294967295));
  }
  ((r.prototype.v = function (e, t) {
    t === void 0 && (t = e.length);
    let n = t - this.blockSize,
      r = this.C,
      a = this.h,
      o = 0;
    for (; o < t; ) {
      if (a == 0) for (; o <= n; ) (i(this, e, o), (o += this.blockSize));
      if (typeof e == `string`) {
        for (; o < t; )
          if (((r[a++] = e.charCodeAt(o++)), a == this.blockSize)) {
            (i(this, r), (a = 0));
            break;
          }
      } else
        for (; o < t; )
          if (((r[a++] = e[o++]), a == this.blockSize)) {
            (i(this, r), (a = 0));
            break;
          }
    }
    ((this.h = a), (this.o += t));
  }),
    (r.prototype.A = function () {
      var e = Array((this.h < 56 ? this.blockSize : this.blockSize * 2) - this.h);
      e[0] = 128;
      for (var t = 1; t < e.length - 8; ++t) e[t] = 0;
      t = this.o * 8;
      for (var n = e.length - 8; n < e.length; ++n) ((e[n] = t & 255), (t /= 256));
      for (this.v(e), e = Array(16), t = 0, n = 0; n < 4; ++n)
        for (let r = 0; r < 32; r += 8) e[t++] = (this.g[n] >>> r) & 255;
      return e;
    }));
  function a(e, t) {
    var n = s;
    return Object.prototype.hasOwnProperty.call(n, e) ? n[e] : (n[e] = t(e));
  }
  function o(e, t) {
    this.h = t;
    let n = [],
      r = !0;
    for (let i = e.length - 1; i >= 0; i--) {
      let a = e[i] | 0;
      (r && a == t) || ((n[i] = a), (r = !1));
    }
    this.g = n;
  }
  var s = {};
  function c(e) {
    return -128 <= e && e < 128
      ? a(e, function (e) {
          return new o([e | 0], e < 0 ? -1 : 0);
        })
      : new o([e | 0], e < 0 ? -1 : 0);
  }
  function l(e) {
    if (isNaN(e) || !isFinite(e)) return d;
    if (e < 0) return g(l(-e));
    let t = [],
      n = 1;
    for (let r = 0; e >= n; r++) ((t[r] = (e / n) | 0), (n *= 4294967296));
    return new o(t, 0);
  }
  function u(e, t) {
    if (e.length == 0) throw Error(`number format error: empty string`);
    if (((t ||= 10), t < 2 || 36 < t)) throw Error(`radix out of range: ` + t);
    if (e.charAt(0) == `-`) return g(u(e.substring(1), t));
    if (e.indexOf(`-`) >= 0) throw Error(`number format error: interior "-" character`);
    let n = l(t ** 8),
      r = d;
    for (let a = 0; a < e.length; a += 8) {
      var i = Math.min(8, e.length - a);
      let o = parseInt(e.substring(a, a + i), t);
      i < 8 ? ((i = l(t ** +i)), (r = r.j(i).add(l(o)))) : ((r = r.j(n)), (r = r.add(l(o))));
    }
    return r;
  }
  var d = c(0),
    f = c(1),
    p = c(16777216);
  ((e = o.prototype),
    (e.m = function () {
      if (h(this)) return -g(this).m();
      let e = 0,
        t = 1;
      for (let n = 0; n < this.g.length; n++) {
        let r = this.i(n);
        ((e += (r >= 0 ? r : 4294967296 + r) * t), (t *= 4294967296));
      }
      return e;
    }),
    (e.toString = function (e) {
      if (((e ||= 10), e < 2 || 36 < e)) throw Error(`radix out of range: ` + e);
      if (m(this)) return `0`;
      if (h(this)) return `-` + g(this).toString(e);
      let t = l(e ** 6);
      var n = this;
      let r = ``;
      for (;;) {
        let i = re(n, t).g;
        n = ee(n, i.j(t));
        let a = ((n.g.length > 0 ? n.g[0] : n.h) >>> 0).toString(e);
        if (((n = i), m(n))) return a + r;
        for (; a.length < 6; ) a = `0` + a;
        r = a + r;
      }
    }),
    (e.i = function (e) {
      return e < 0 ? 0 : e < this.g.length ? this.g[e] : this.h;
    }));
  function m(e) {
    if (e.h != 0) return !1;
    for (let t = 0; t < e.g.length; t++) if (e.g[t] != 0) return !1;
    return !0;
  }
  function h(e) {
    return e.h == -1;
  }
  e.l = function (e) {
    return ((e = ee(this, e)), h(e) ? -1 : m(e) ? 0 : 1);
  };
  function g(e) {
    let t = e.g.length,
      n = [];
    for (let r = 0; r < t; r++) n[r] = ~e.g[r];
    return new o(n, ~e.h).add(f);
  }
  ((e.abs = function () {
    return h(this) ? g(this) : this;
  }),
    (e.add = function (e) {
      let t = Math.max(this.g.length, e.g.length),
        n = [],
        r = 0;
      for (let i = 0; i <= t; i++) {
        let t = r + (this.i(i) & 65535) + (e.i(i) & 65535),
          a = (t >>> 16) + (this.i(i) >>> 16) + (e.i(i) >>> 16);
        ((r = a >>> 16), (t &= 65535), (a &= 65535), (n[i] = (a << 16) | t));
      }
      return new o(n, n[n.length - 1] & -2147483648 ? -1 : 0);
    }));
  function ee(e, t) {
    return e.add(g(t));
  }
  e.j = function (e) {
    if (m(this) || m(e)) return d;
    if (h(this)) return h(e) ? g(this).j(g(e)) : g(g(this).j(e));
    if (h(e)) return g(this.j(g(e)));
    if (this.l(p) < 0 && e.l(p) < 0) return l(this.m() * e.m());
    let t = this.g.length + e.g.length,
      n = [];
    for (var r = 0; r < 2 * t; r++) n[r] = 0;
    for (r = 0; r < this.g.length; r++)
      for (let t = 0; t < e.g.length; t++) {
        let i = this.i(r) >>> 16,
          a = this.i(r) & 65535,
          o = e.i(t) >>> 16,
          s = e.i(t) & 65535;
        ((n[2 * r + 2 * t] += a * s),
          te(n, 2 * r + 2 * t),
          (n[2 * r + 2 * t + 1] += i * s),
          te(n, 2 * r + 2 * t + 1),
          (n[2 * r + 2 * t + 1] += a * o),
          te(n, 2 * r + 2 * t + 1),
          (n[2 * r + 2 * t + 2] += i * o),
          te(n, 2 * r + 2 * t + 2));
      }
    for (e = 0; e < t; e++) n[e] = (n[2 * e + 1] << 16) | n[2 * e];
    for (e = t; e < 2 * t; e++) n[e] = 0;
    return new o(n, 0);
  };
  function te(e, t) {
    for (; (e[t] & 65535) != e[t]; ) ((e[t + 1] += e[t] >>> 16), (e[t] &= 65535), t++);
  }
  function ne(e, t) {
    ((this.g = e), (this.h = t));
  }
  function re(e, t) {
    if (m(t)) throw Error(`division by zero`);
    if (m(e)) return new ne(d, d);
    if (h(e)) return ((t = re(g(e), t)), new ne(g(t.g), g(t.h)));
    if (h(t)) return ((t = re(e, g(t))), new ne(g(t.g), t.h));
    if (e.g.length > 30) {
      if (h(e) || h(t)) throw Error(`slowDivide_ only works with positive integers.`);
      for (var n = f, r = t; r.l(e) <= 0; ) ((n = ie(n)), (r = ie(r)));
      var i = ae(n, 1),
        a = ae(r, 1);
      for (r = ae(r, 2), n = ae(n, 2); !m(r); ) {
        var o = a.add(r);
        (o.l(e) <= 0 && ((i = i.add(n)), (a = o)), (r = ae(r, 1)), (n = ae(n, 1)));
      }
      return ((t = ee(e, i.j(t))), new ne(i, t));
    }
    for (i = d; e.l(t) >= 0; ) {
      for (
        n = Math.max(1, Math.floor(e.m() / t.m())),
          r = Math.ceil(Math.log(n) / Math.LN2),
          r = r <= 48 ? 1 : 2 ** (r - 48),
          a = l(n),
          o = a.j(t);
        h(o) || o.l(e) > 0;
      )
        ((n -= r), (a = l(n)), (o = a.j(t)));
      (m(a) && (a = f), (i = i.add(a)), (e = ee(e, o)));
    }
    return new ne(i, e);
  }
  ((e.B = function (e) {
    return re(this, e).h;
  }),
    (e.and = function (e) {
      let t = Math.max(this.g.length, e.g.length),
        n = [];
      for (let r = 0; r < t; r++) n[r] = this.i(r) & e.i(r);
      return new o(n, this.h & e.h);
    }),
    (e.or = function (e) {
      let t = Math.max(this.g.length, e.g.length),
        n = [];
      for (let r = 0; r < t; r++) n[r] = this.i(r) | e.i(r);
      return new o(n, this.h | e.h);
    }),
    (e.xor = function (e) {
      let t = Math.max(this.g.length, e.g.length),
        n = [];
      for (let r = 0; r < t; r++) n[r] = this.i(r) ^ e.i(r);
      return new o(n, this.h ^ e.h);
    }));
  function ie(e) {
    let t = e.g.length + 1,
      n = [];
    for (let r = 0; r < t; r++) n[r] = (e.i(r) << 1) | (e.i(r - 1) >>> 31);
    return new o(n, e.h);
  }
  function ae(e, t) {
    let n = t >> 5;
    t %= 32;
    let r = e.g.length - n,
      i = [];
    for (let a = 0; a < r; a++)
      i[a] = t > 0 ? (e.i(a + n) >>> t) | (e.i(a + n + 1) << (32 - t)) : e.i(a + n);
    return new o(i, e.h);
  }
  ((r.prototype.digest = r.prototype.A),
    (r.prototype.reset = r.prototype.u),
    (r.prototype.update = r.prototype.v),
    (yl.Md5 = r),
    (o.prototype.add = o.prototype.add),
    (o.prototype.multiply = o.prototype.j),
    (o.prototype.modulo = o.prototype.B),
    (o.prototype.compare = o.prototype.l),
    (o.prototype.toNumber = o.prototype.m),
    (o.prototype.toString = o.prototype.toString),
    (o.prototype.getBits = o.prototype.i),
    (o.fromNumber = l),
    (o.fromString = u),
    (bl = yl.Integer = o));
}).apply(vl === void 0 ? (typeof self < `u` ? self : typeof window < `u` ? window : {}) : vl);
var xl =
    typeof globalThis < `u`
      ? globalThis
      : typeof window < `u`
        ? window
        : typeof global < `u`
          ? global
          : typeof self < `u`
            ? self
            : {},
  Sl = {},
  Cl,
  wl,
  Tl,
  El,
  Dl,
  Ol,
  kl,
  Al;
(function () {
  var e,
    t = Object.defineProperty;
  function n(e) {
    e = [
      typeof globalThis == `object` && globalThis,
      e,
      typeof window == `object` && window,
      typeof self == `object` && self,
      typeof xl == `object` && xl,
    ];
    for (var t = 0; t < e.length; ++t) {
      var n = e[t];
      if (n && n.Math == Math) return n;
    }
    throw Error(`Cannot find global object`);
  }
  var r = n(this);
  function i(e, n) {
    if (n)
      a: {
        var i = r;
        e = e.split(`.`);
        for (var a = 0; a < e.length - 1; a++) {
          var o = e[a];
          if (!(o in i)) break a;
          i = i[o];
        }
        ((e = e[e.length - 1]),
          (a = i[e]),
          (n = n(a)),
          n != a && n != null && t(i, e, { configurable: !0, writable: !0, value: n }));
      }
  }
  (i(`Symbol.dispose`, function (e) {
    return e || Symbol(`Symbol.dispose`);
  }),
    i(`Array.prototype.values`, function (e) {
      return (
        e ||
        function () {
          return this[Symbol.iterator]();
        }
      );
    }),
    i(`Object.entries`, function (e) {
      return (
        e ||
        function (e) {
          var t = [],
            n;
          for (n in e) Object.prototype.hasOwnProperty.call(e, n) && t.push([n, e[n]]);
          return t;
        }
      );
    }));
  var a = a || {},
    o = this || self;
  function s(e) {
    var t = typeof e;
    return (t == `object` && e != null) || t == `function`;
  }
  function c(e, t, n) {
    return e.call.apply(e.bind, arguments);
  }
  function l(e, t, n) {
    return ((l = c), l.apply(null, arguments));
  }
  function u(e, t) {
    var n = Array.prototype.slice.call(arguments, 1);
    return function () {
      var t = n.slice();
      return (t.push.apply(t, arguments), e.apply(this, t));
    };
  }
  function d(e, t) {
    function n() {}
    ((n.prototype = t.prototype),
      (e.Z = t.prototype),
      (e.prototype = new n()),
      (e.prototype.constructor = e),
      (e.Ob = function (e, n, r) {
        for (var i = Array(arguments.length - 2), a = 2; a < arguments.length; a++)
          i[a - 2] = arguments[a];
        return t.prototype[n].apply(e, i);
      }));
  }
  var f =
    typeof AsyncContext < `u` && typeof AsyncContext.Snapshot == `function`
      ? (e) => e && AsyncContext.Snapshot.wrap(e)
      : (e) => e;
  function p(e) {
    let t = e.length;
    if (t > 0) {
      let n = Array(t);
      for (let r = 0; r < t; r++) n[r] = e[r];
      return n;
    }
    return [];
  }
  function m(e, t) {
    for (let t = 1; t < arguments.length; t++) {
      let r = arguments[t];
      var n = typeof r;
      if (
        ((n = n == `object` ? (r ? (Array.isArray(r) ? `array` : n) : `null`) : n),
        n == `array` || (n == `object` && typeof r.length == `number`))
      ) {
        n = e.length || 0;
        let t = r.length || 0;
        e.length = n + t;
        for (let i = 0; i < t; i++) e[n + i] = r[i];
      } else e.push(r);
    }
  }
  class h {
    constructor(e, t) {
      ((this.i = e), (this.j = t), (this.h = 0), (this.g = null));
    }
    get() {
      let e;
      return (
        this.h > 0 ? (this.h--, (e = this.g), (this.g = e.next), (e.next = null)) : (e = this.i()),
        e
      );
    }
  }
  function g(e) {
    o.setTimeout(() => {
      throw e;
    }, 0);
  }
  function ee() {
    var e = oe;
    let t = null;
    return (e.g && ((t = e.g), (e.g = e.g.next), e.g || (e.h = null), (t.next = null)), t);
  }
  class te {
    constructor() {
      this.h = this.g = null;
    }
    add(e, t) {
      let n = ne.get();
      (n.set(e, t), this.h ? (this.h.next = n) : (this.g = n), (this.h = n));
    }
  }
  var ne = new h(
    () => new re(),
    (e) => e.reset()
  );
  class re {
    constructor() {
      this.next = this.g = this.h = null;
    }
    set(e, t) {
      ((this.h = e), (this.g = t), (this.next = null));
    }
    reset() {
      this.next = this.g = this.h = null;
    }
  }
  let ie,
    ae = !1,
    oe = new te(),
    se = () => {
      let e = Promise.resolve(void 0);
      ie = () => {
        e.then(ce);
      };
    };
  function ce() {
    for (var e; (e = ee()); ) {
      try {
        e.h.call(e.g);
      } catch (e) {
        g(e);
      }
      var t = ne;
      (t.j(e), t.h < 100 && (t.h++, (e.next = t.g), (t.g = e)));
    }
    ae = !1;
  }
  function _() {
    ((this.u = this.u), (this.C = this.C));
  }
  ((_.prototype.u = !1),
    (_.prototype.dispose = function () {
      this.u || ((this.u = !0), this.N());
    }),
    (_.prototype[Symbol.dispose] = function () {
      this.dispose();
    }),
    (_.prototype.N = function () {
      if (this.C) for (; this.C.length; ) this.C.shift()();
    }));
  function v(e, t) {
    ((this.type = e), (this.g = this.target = t), (this.defaultPrevented = !1));
  }
  v.prototype.h = function () {
    this.defaultPrevented = !0;
  };
  var le = (function () {
    if (!o.addEventListener || !Object.defineProperty) return !1;
    var e = !1,
      t = Object.defineProperty({}, `passive`, {
        get: function () {
          e = !0;
        },
      });
    try {
      let e = () => {};
      (o.addEventListener(`test`, e, t), o.removeEventListener(`test`, e, t));
    } catch {}
    return e;
  })();
  function ue(e) {
    return /^[\s\xa0]*$/.test(e);
  }
  function de(e, t) {
    (v.call(this, e ? e.type : ``),
      (this.relatedTarget = this.g = this.target = null),
      (this.button = this.screenY = this.screenX = this.clientY = this.clientX = 0),
      (this.key = ``),
      (this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1),
      (this.state = null),
      (this.pointerId = 0),
      (this.pointerType = ``),
      (this.i = null),
      e && this.init(e, t));
  }
  (d(de, v),
    (de.prototype.init = function (e, t) {
      let n = (this.type = e.type),
        r = e.changedTouches && e.changedTouches.length ? e.changedTouches[0] : null;
      ((this.target = e.target || e.srcElement),
        (this.g = t),
        (t = e.relatedTarget),
        t || (n == `mouseover` ? (t = e.fromElement) : n == `mouseout` && (t = e.toElement)),
        (this.relatedTarget = t),
        r
          ? ((this.clientX = r.clientX === void 0 ? r.pageX : r.clientX),
            (this.clientY = r.clientY === void 0 ? r.pageY : r.clientY),
            (this.screenX = r.screenX || 0),
            (this.screenY = r.screenY || 0))
          : ((this.clientX = e.clientX === void 0 ? e.pageX : e.clientX),
            (this.clientY = e.clientY === void 0 ? e.pageY : e.clientY),
            (this.screenX = e.screenX || 0),
            (this.screenY = e.screenY || 0)),
        (this.button = e.button),
        (this.key = e.key || ``),
        (this.ctrlKey = e.ctrlKey),
        (this.altKey = e.altKey),
        (this.shiftKey = e.shiftKey),
        (this.metaKey = e.metaKey),
        (this.pointerId = e.pointerId || 0),
        (this.pointerType = e.pointerType),
        (this.state = e.state),
        (this.i = e),
        e.defaultPrevented && de.Z.h.call(this));
    }),
    (de.prototype.h = function () {
      de.Z.h.call(this);
      let e = this.i;
      e.preventDefault ? e.preventDefault() : (e.returnValue = !1);
    }));
  var fe = `closure_listenable_` + ((Math.random() * 1e6) | 0),
    pe = 0;
  function me(e, t, n, r, i) {
    ((this.listener = e),
      (this.proxy = null),
      (this.src = t),
      (this.type = n),
      (this.capture = !!r),
      (this.ha = i),
      (this.key = ++pe),
      (this.da = this.fa = !1));
  }
  function he(e) {
    ((e.da = !0), (e.listener = null), (e.proxy = null), (e.src = null), (e.ha = null));
  }
  function ge(e, t, n) {
    for (let r in e) t.call(n, e[r], r, e);
  }
  function _e(e, t) {
    for (let n in e) t.call(void 0, e[n], n, e);
  }
  function ve(e) {
    let t = {};
    for (let n in e) t[n] = e[n];
    return t;
  }
  let ye =
    `constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(
      ` `
    );
  function be(e, t) {
    let n, r;
    for (let t = 1; t < arguments.length; t++) {
      for (n in ((r = arguments[t]), r)) e[n] = r[n];
      for (let t = 0; t < ye.length; t++)
        ((n = ye[t]), Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n]));
    }
  }
  function xe(e) {
    ((this.src = e), (this.g = {}), (this.h = 0));
  }
  xe.prototype.add = function (e, t, n, r, i) {
    let a = e.toString();
    ((e = this.g[a]), e || ((e = this.g[a] = []), this.h++));
    let o = Ce(e, t, r, i);
    return (
      o > -1
        ? ((t = e[o]), n || (t.fa = !1))
        : ((t = new me(t, this.src, a, !!r, i)), (t.fa = n), e.push(t)),
      t
    );
  };
  function Se(e, t) {
    let n = t.type;
    if (n in e.g) {
      var r = e.g[n],
        i = Array.prototype.indexOf.call(r, t, void 0),
        a;
      ((a = i >= 0) && Array.prototype.splice.call(r, i, 1),
        a && (he(t), e.g[n].length == 0 && (delete e.g[n], e.h--)));
    }
  }
  function Ce(e, t, n, r) {
    for (let i = 0; i < e.length; ++i) {
      let a = e[i];
      if (!a.da && a.listener == t && a.capture == !!n && a.ha == r) return i;
    }
    return -1;
  }
  var we = `closure_lm_` + ((Math.random() * 1e6) | 0),
    Te = {};
  function Ee(e, t, n, r, i) {
    if (r && r.once) return ke(e, t, n, r, i);
    if (Array.isArray(t)) {
      for (let a = 0; a < t.length; a++) Ee(e, t[a], n, r, i);
      return null;
    }
    return (
      (n = Ie(n)),
      e && e[fe] ? e.J(t, n, s(r) ? !!r.capture : !!r, i) : De(e, t, n, !1, r, i)
    );
  }
  function De(e, t, n, r, i, a) {
    if (!t) throw Error(`Invalid event type`);
    let o = s(i) ? !!i.capture : !!i,
      c = Pe(e);
    if ((c || (e[we] = c = new xe(e)), (n = c.add(t, n, r, o, a)), n.proxy)) return n;
    if (((r = Oe()), (n.proxy = r), (r.src = e), (r.listener = n), e.addEventListener))
      (le || (i = o), i === void 0 && (i = !1), e.addEventListener(t.toString(), r, i));
    else if (e.attachEvent) e.attachEvent(Me(t.toString()), r);
    else if (e.addListener && e.removeListener) e.addListener(r);
    else throw Error(`addEventListener and attachEvent are unavailable.`);
    return n;
  }
  function Oe() {
    function e(n) {
      return t.call(e.src, e.listener, n);
    }
    let t = Ne;
    return e;
  }
  function ke(e, t, n, r, i) {
    if (Array.isArray(t)) {
      for (let a = 0; a < t.length; a++) ke(e, t[a], n, r, i);
      return null;
    }
    return (
      (n = Ie(n)),
      e && e[fe] ? e.K(t, n, s(r) ? !!r.capture : !!r, i) : De(e, t, n, !0, r, i)
    );
  }
  function Ae(e, t, n, r, i) {
    if (Array.isArray(t)) for (var a = 0; a < t.length; a++) Ae(e, t[a], n, r, i);
    else
      ((r = s(r) ? !!r.capture : !!r),
        (n = Ie(n)),
        e && e[fe]
          ? ((e = e.i),
            (a = String(t).toString()),
            a in e.g &&
              ((t = e.g[a]),
              (n = Ce(t, n, r, i)),
              n > -1 &&
                (he(t[n]),
                Array.prototype.splice.call(t, n, 1),
                t.length == 0 && (delete e.g[a], e.h--))))
          : (e &&= Pe(e)) &&
            ((t = e.g[t.toString()]),
            (e = -1),
            t && (e = Ce(t, n, r, i)),
            (n = e > -1 ? t[e] : null) && je(n)));
  }
  function je(e) {
    if (typeof e != `number` && e && !e.da) {
      var t = e.src;
      if (t && t[fe]) Se(t.i, e);
      else {
        var n = e.type,
          r = e.proxy;
        (t.removeEventListener
          ? t.removeEventListener(n, r, e.capture)
          : t.detachEvent
            ? t.detachEvent(Me(n), r)
            : t.addListener && t.removeListener && t.removeListener(r),
          (n = Pe(t)) ? (Se(n, e), n.h == 0 && ((n.src = null), (t[we] = null))) : he(e));
      }
    }
  }
  function Me(e) {
    return e in Te ? Te[e] : (Te[e] = `on` + e);
  }
  function Ne(e, t) {
    if (e.da) e = !0;
    else {
      t = new de(t, this);
      let n = e.listener,
        r = e.ha || e.src;
      (e.fa && je(e), (e = n.call(r, t)));
    }
    return e;
  }
  function Pe(e) {
    return ((e = e[we]), e instanceof xe ? e : null);
  }
  var Fe = `__closure_events_fn_` + ((Math.random() * 1e9) >>> 0);
  function Ie(e) {
    return typeof e == `function`
      ? e
      : (e[Fe] ||
          (e[Fe] = function (t) {
            return e.handleEvent(t);
          }),
        e[Fe]);
  }
  function y() {
    (_.call(this), (this.i = new xe(this)), (this.M = this), (this.G = null));
  }
  (d(y, _),
    (y.prototype[fe] = !0),
    (y.prototype.removeEventListener = function (e, t, n, r) {
      Ae(this, e, t, n, r);
    }));
  function b(e, t) {
    var n,
      r = e.G;
    if (r) for (n = []; r; r = r.G) n.push(r);
    if (((e = e.M), (r = t.type || t), typeof t == `string`)) t = new v(t, e);
    else if (t instanceof v) t.target = t.target || e;
    else {
      var i = t;
      ((t = new v(r, e)), be(t, i));
    }
    i = !0;
    let a, o;
    if (n) for (o = n.length - 1; o >= 0; o--) ((a = t.g = n[o]), (i = x(a, r, !0, t) && i));
    if (((a = t.g = e), (i = x(a, r, !0, t) && i), (i = x(a, r, !1, t) && i), n))
      for (o = 0; o < n.length; o++) ((a = t.g = n[o]), (i = x(a, r, !1, t) && i));
  }
  ((y.prototype.N = function () {
    if ((y.Z.N.call(this), this.i)) {
      var e = this.i;
      for (let t in e.g) {
        let n = e.g[t];
        for (let e = 0; e < n.length; e++) he(n[e]);
        (delete e.g[t], e.h--);
      }
    }
    this.G = null;
  }),
    (y.prototype.J = function (e, t, n, r) {
      return this.i.add(String(e), t, !1, n, r);
    }),
    (y.prototype.K = function (e, t, n, r) {
      return this.i.add(String(e), t, !0, n, r);
    }));
  function x(e, t, n, r) {
    if (((t = e.i.g[String(t)]), !t)) return !0;
    t = t.concat();
    let i = !0;
    for (let a = 0; a < t.length; ++a) {
      let o = t[a];
      if (o && !o.da && o.capture == n) {
        let t = o.listener,
          n = o.ha || o.src;
        (o.fa && Se(e.i, o), (i = t.call(n, r) !== !1 && i));
      }
    }
    return i && !r.defaultPrevented;
  }
  function Le(e, t) {
    if (typeof e != `function`)
      if (e && typeof e.handleEvent == `function`) e = l(e.handleEvent, e);
      else throw Error(`Invalid listener argument`);
    return Number(t) > 2147483647 ? -1 : o.setTimeout(e, t || 0);
  }
  function Re(e) {
    e.g = Le(() => {
      ((e.g = null), e.i && ((e.i = !1), Re(e)));
    }, e.l);
    let t = e.h;
    ((e.h = null), e.m.apply(null, t));
  }
  class ze extends _ {
    constructor(e, t) {
      (super(), (this.m = e), (this.l = t), (this.h = null), (this.i = !1), (this.g = null));
    }
    j(e) {
      ((this.h = arguments), this.g ? (this.i = !0) : Re(this));
    }
    N() {
      (super.N(),
        this.g && (o.clearTimeout(this.g), (this.g = null), (this.i = !1), (this.h = null)));
    }
  }
  function Be(e) {
    (_.call(this), (this.h = e), (this.g = {}));
  }
  d(Be, _);
  var Ve = [];
  function He(e) {
    (ge(
      e.g,
      function (e, t) {
        this.g.hasOwnProperty(t) && je(e);
      },
      e
    ),
      (e.g = {}));
  }
  ((Be.prototype.N = function () {
    (Be.Z.N.call(this), He(this));
  }),
    (Be.prototype.handleEvent = function () {
      throw Error(`EventHandler.handleEvent not implemented`);
    }));
  var S = o.JSON.stringify,
    Ue = o.JSON.parse,
    We = class {
      stringify(e) {
        return o.JSON.stringify(e, void 0);
      }
      parse(e) {
        return o.JSON.parse(e, void 0);
      }
    };
  function Ge() {}
  function Ke() {}
  var qe = { OPEN: `a`, hb: `b`, ERROR: `c`, tb: `d` };
  function Je() {
    v.call(this, `d`);
  }
  d(Je, v);
  function Ye() {
    v.call(this, `c`);
  }
  d(Ye, v);
  var Xe = {},
    Ze = null;
  function Qe() {
    return (Ze ||= new y());
  }
  Xe.Ia = `serverreachability`;
  function $e(e) {
    v.call(this, Xe.Ia, e);
  }
  d($e, v);
  function et(e) {
    let t = Qe();
    b(t, new $e(t));
  }
  Xe.STAT_EVENT = `statevent`;
  function tt(e, t) {
    (v.call(this, Xe.STAT_EVENT, e), (this.stat = t));
  }
  d(tt, v);
  function C(e) {
    let t = Qe();
    b(t, new tt(t, e));
  }
  Xe.Ja = `timingevent`;
  function nt(e, t) {
    (v.call(this, Xe.Ja, e), (this.size = t));
  }
  d(nt, v);
  function rt(e, t) {
    if (typeof e != `function`) throw Error(`Fn must not be null and must be a function`);
    return o.setTimeout(function () {
      e();
    }, t);
  }
  function it() {
    this.g = !0;
  }
  it.prototype.ua = function () {
    this.g = !1;
  };
  function at(e, t, n, r, i, a) {
    e.info(function () {
      if (e.g)
        if (a) {
          var o = ``,
            s = a.split(`&`);
          for (let e = 0; e < s.length; e++) {
            var c = s[e].split(`=`);
            if (c.length > 1) {
              let e = c[0];
              c = c[1];
              let t = e.split(`_`);
              o =
                t.length >= 2 && t[1] == `type` ? o + (e + `=` + c + `&`) : o + (e + `=redacted&`);
            }
          }
        } else o = null;
      else o = a;
      return (
        `XMLHTTP REQ (` +
        r +
        `) [attempt ` +
        i +
        `]: ` +
        t +
        `
` +
        n +
        `
` +
        o
      );
    });
  }
  function ot(e, t, n, r, i, a, o) {
    e.info(function () {
      return (
        `XMLHTTP RESP (` +
        r +
        `) [ attempt ` +
        i +
        `]: ` +
        t +
        `
` +
        n +
        `
` +
        a +
        ` ` +
        o
      );
    });
  }
  function st(e, t, n, r) {
    e.info(function () {
      return `XMLHTTP TEXT (` + t + `): ` + lt(e, n) + (r ? ` ` + r : ``);
    });
  }
  function ct(e, t) {
    e.info(function () {
      return `TIMEOUT: ` + t;
    });
  }
  it.prototype.info = function () {};
  function lt(e, t) {
    if (!e.g) return t;
    if (!t) return null;
    try {
      let a = JSON.parse(t);
      if (a) {
        for (e = 0; e < a.length; e++)
          if (Array.isArray(a[e])) {
            var n = a[e];
            if (!(n.length < 2)) {
              var r = n[1];
              if (Array.isArray(r) && !(r.length < 1)) {
                var i = r[0];
                if (i != `noop` && i != `stop` && i != `close`)
                  for (let e = 1; e < r.length; e++) r[e] = ``;
              }
            }
          }
      }
      return S(a);
    } catch {
      return t;
    }
  }
  var ut = { NO_ERROR: 0, cb: 1, qb: 2, pb: 3, kb: 4, ob: 5, rb: 6, Ga: 7, TIMEOUT: 8, ub: 9 },
    dt = {
      ib: `complete`,
      Fb: `success`,
      ERROR: `error`,
      Ga: `abort`,
      xb: `ready`,
      yb: `readystatechange`,
      TIMEOUT: `timeout`,
      sb: `incrementaldata`,
      wb: `progress`,
      lb: `downloadprogress`,
      Nb: `uploadprogress`,
    },
    ft;
  function pt() {}
  (d(pt, Ge),
    (pt.prototype.g = function () {
      return new XMLHttpRequest();
    }),
    (ft = new pt()));
  function mt(e) {
    return encodeURIComponent(String(e));
  }
  function ht(e) {
    var t = 1;
    e = e.split(`:`);
    let n = [];
    for (; t > 0 && e.length; ) (n.push(e.shift()), t--);
    return (e.length && n.push(e.join(`:`)), n);
  }
  function gt(e, t, n, r) {
    ((this.j = e),
      (this.i = t),
      (this.l = n),
      (this.S = r || 1),
      (this.V = new Be(this)),
      (this.H = 45e3),
      (this.J = null),
      (this.o = !1),
      (this.u = this.B = this.A = this.M = this.F = this.T = this.D = null),
      (this.G = []),
      (this.g = null),
      (this.C = 0),
      (this.m = this.v = null),
      (this.X = -1),
      (this.K = !1),
      (this.P = 0),
      (this.O = null),
      (this.W = this.L = this.U = this.R = !1),
      (this.h = new _t()));
  }
  function _t() {
    ((this.i = null), (this.g = ``), (this.h = !1));
  }
  var vt = {},
    yt = {};
  function bt(e, t, n) {
    ((e.M = 1), (e.A = Kt(Ht(t))), (e.u = n), (e.R = !0), xt(e, null));
  }
  function xt(e, t) {
    ((e.F = Date.now()), Tt(e), (e.B = Ht(e.A)));
    var n = e.B,
      r = e.S;
    (Array.isArray(r) || (r = [String(r)]),
      an(n.i, `t`, r),
      (e.C = 0),
      (n = e.j.L),
      (e.h = new _t()),
      (e.g = M(e.j, n ? t : null, !e.u)),
      e.P > 0 && (e.O = new ze(l(e.Y, e, e.g), e.P)),
      (t = e.V),
      (n = e.g),
      (r = e.ba));
    var i = `readystatechange`;
    Array.isArray(i) || (i && (Ve[0] = i.toString()), (i = Ve));
    for (let e = 0; e < i.length; e++) {
      let a = Ee(n, i[e], r || t.handleEvent, !1, t.h || t);
      if (!a) break;
      t.g[a.key] = a;
    }
    ((t = e.J ? ve(e.J) : {}),
      e.u
        ? ((e.v ||= `POST`),
          (t[`Content-Type`] = `application/x-www-form-urlencoded`),
          e.g.ea(e.B, e.v, e.u, t))
        : ((e.v = `GET`), e.g.ea(e.B, e.v, null, t)),
      et(),
      at(e.i, e.v, e.B, e.l, e.S, e.u));
  }
  ((gt.prototype.ba = function (e) {
    e = e.target;
    let t = this.O;
    t && Tn(e) == 3 ? t.j() : this.Y(e);
  }),
    (gt.prototype.Y = function (e) {
      try {
        if (e == this.g)
          a: {
            let s = Tn(this.g),
              c = this.g.ya(),
              l = this.g.ca();
            if (!(s < 3) && (s != 3 || (this.g && (this.h.h || this.g.la() || En(this.g))))) {
              (this.K || s != 4 || c == 7 || et(c == 8 || l <= 0 ? 3 : 2), Dt(this));
              var t = this.g.ca();
              this.X = t;
              var n = St(this);
              if (((this.o = t == 200), ot(this.i, this.v, this.B, this.l, this.S, s, t), this.o)) {
                if (this.U && !this.L) {
                  b: {
                    if (this.g) {
                      var r,
                        i = this.g;
                      if (
                        (r = i.g ? i.g.getResponseHeader(`X-HTTP-Initial-Response`) : null) &&
                        !ue(r)
                      ) {
                        var a = r;
                        break b;
                      }
                    }
                    a = null;
                  }
                  if ((e = a))
                    (st(
                      this.i,
                      this.l,
                      e,
                      `Initial handshake response via X-HTTP-Initial-Response`
                    ),
                      (this.L = !0),
                      At(this, e));
                  else {
                    ((this.o = !1), (this.m = 3), C(12), kt(this), Ot(this));
                    break a;
                  }
                }
                if (this.R) {
                  e = !0;
                  let t;
                  for (; !this.K && this.C < n.length; )
                    if (((t = wt(this, n)), t == yt)) {
                      (s == 4 && ((this.m = 4), C(14), (e = !1)),
                        st(this.i, this.l, null, `[Incomplete Response]`));
                      break;
                    } else if (t == vt) {
                      ((this.m = 4), C(15), st(this.i, this.l, n, `[Invalid Chunk]`), (e = !1));
                      break;
                    } else (st(this.i, this.l, t, null), At(this, t));
                  if (
                    (Ct(this) && this.C != 0 && ((this.h.g = this.h.g.slice(this.C)), (this.C = 0)),
                    s != 4 || n.length != 0 || this.h.h || ((this.m = 1), C(16), (e = !1)),
                    (this.o = this.o && e),
                    !e)
                  )
                    (st(this.i, this.l, n, `[Invalid Chunked Response]`), kt(this), Ot(this));
                  else if (n.length > 0 && !this.W) {
                    this.W = !0;
                    var o = this.j;
                    o.g == this &&
                      o.aa &&
                      !o.P &&
                      (o.j.info(`Great, no buffering proxy detected. Bytes received: ` + n.length),
                      Ln(o),
                      (o.P = !0),
                      C(11));
                  }
                } else (st(this.i, this.l, n, null), At(this, n));
                (s == 4 && kt(this),
                  this.o && !this.K && (s == 4 ? Bn(this.j, this) : ((this.o = !1), Tt(this))));
              } else
                (Dn(this.g),
                  t == 400 && n.indexOf(`Unknown SID`) > 0
                    ? ((this.m = 3), C(12))
                    : ((this.m = 0), C(13)),
                  kt(this),
                  Ot(this));
            }
          }
      } catch {}
    }));
  function St(e) {
    if (!Ct(e)) return e.g.la();
    let t = En(e.g);
    if (t === ``) return ``;
    let n = ``,
      r = t.length,
      i = Tn(e.g) == 4;
    if (!e.h.i) {
      if (typeof TextDecoder > `u`) return (kt(e), Ot(e), ``);
      e.h.i = new o.TextDecoder();
    }
    for (let a = 0; a < r; a++)
      ((e.h.h = !0), (n += e.h.i.decode(t[a], { stream: !(i && a == r - 1) })));
    return ((t.length = 0), (e.h.g += n), (e.C = 0), e.h.g);
  }
  function Ct(e) {
    return e.g ? e.v == `GET` && e.M != 2 && e.j.Aa : !1;
  }
  function wt(e, t) {
    var n = e.C,
      r = t.indexOf(
        `
`,
        n
      );
    return r == -1
      ? yt
      : ((n = Number(t.substring(n, r))),
        isNaN(n)
          ? vt
          : ((r += 1), r + n > t.length ? yt : ((t = t.slice(r, r + n)), (e.C = r + n), t)));
  }
  gt.prototype.cancel = function () {
    ((this.K = !0), kt(this));
  };
  function Tt(e) {
    ((e.T = Date.now() + e.H), Et(e, e.H));
  }
  function Et(e, t) {
    if (e.D != null) throw Error(`WatchDog timer not null`);
    e.D = rt(l(e.aa, e), t);
  }
  function Dt(e) {
    e.D &&= (o.clearTimeout(e.D), null);
  }
  gt.prototype.aa = function () {
    this.D = null;
    let e = Date.now();
    e - this.T >= 0
      ? (ct(this.i, this.B), this.M != 2 && (et(), C(17)), kt(this), (this.m = 2), Ot(this))
      : Et(this, this.T - e);
  };
  function Ot(e) {
    e.j.I == 0 || e.K || Bn(e.j, e);
  }
  function kt(e) {
    Dt(e);
    var t = e.O;
    (t && typeof t.dispose == `function` && t.dispose(),
      (e.O = null),
      He(e.V),
      e.g && ((t = e.g), (e.g = null), t.abort(), t.dispose()));
  }
  function At(e, t) {
    try {
      var n = e.j;
      if (n.I != 0 && (n.g == e || Ft(n.h, e))) {
        if (!e.L && Ft(n.h, e) && n.I == 3) {
          try {
            var r = n.Ba.g.parse(t);
          } catch {
            r = null;
          }
          if (Array.isArray(r) && r.length == 3) {
            var i = r;
            if (i[0] == 0) {
              a: if (!n.v) {
                if (n.g)
                  if (n.g.F + 3e3 < e.F) (zn(n), An(n));
                  else break a;
                (In(n), C(18));
              }
            } else
              ((n.xa = i[1]),
                0 < n.xa - n.K &&
                  i[2] < 37500 &&
                  n.F &&
                  n.A == 0 &&
                  !n.C &&
                  (n.C = rt(l(n.Va, n), 6e3)));
            Pt(n.h) <= 1 && n.ta && (n.ta = void 0);
          } else Hn(n, 11);
        } else if (((e.L || n.g == e) && zn(n), !ue(t)))
          for (i = n.Ba.g.parse(t), t = 0; t < i.length; t++) {
            let l = i[t],
              u = l[0];
            if (!(u <= n.K))
              if (((n.K = u), (l = l[1]), n.I == 2))
                if (l[0] == `c`) {
                  ((n.M = l[1]), (n.ba = l[2]));
                  let t = l[3];
                  t != null && ((n.ka = t), n.j.info(`VER=` + n.ka));
                  let i = l[4];
                  i != null && ((n.za = i), n.j.info(`SVER=` + n.za));
                  let u = l[5];
                  (u != null &&
                    typeof u == `number` &&
                    u > 0 &&
                    ((r = 1.5 * u), (n.O = r), n.j.info(`backChannelRequestTimeoutMs_=` + r)),
                    (r = n));
                  let d = e.g;
                  if (d) {
                    let e = d.g ? d.g.getResponseHeader(`X-Client-Wire-Protocol`) : null;
                    if (e) {
                      var a = r.h;
                      a.g ||
                        (e.indexOf(`spdy`) == -1 &&
                          e.indexOf(`quic`) == -1 &&
                          e.indexOf(`h2`) == -1) ||
                        ((a.j = a.l), (a.g = new Set()), (a.h &&= (It(a, a.h), null)));
                    }
                    if (r.G) {
                      let e = d.g ? d.g.getResponseHeader(`X-HTTP-Session-Id`) : null;
                      e && ((r.wa = e), w(r.J, r.G, e));
                    }
                  }
                  ((n.I = 3),
                    n.l && n.l.ra(),
                    n.aa && ((n.T = Date.now() - e.F), n.j.info(`Handshake RTT: ` + n.T + `ms`)),
                    (r = n));
                  var o = e;
                  if (((r.na = Wn(r, r.L ? r.ba : null, r.W)), o.L)) {
                    Lt(r.h, o);
                    var s = o,
                      c = r.O;
                    (c && (s.H = c), s.D && (Dt(s), Tt(s)), (r.g = o));
                  } else Fn(r);
                  n.i.length > 0 && Mn(n);
                } else (l[0] != `stop` && l[0] != `close`) || Hn(n, 7);
              else
                n.I == 3 &&
                  (l[0] == `stop` || l[0] == `close`
                    ? l[0] == `stop`
                      ? Hn(n, 7)
                      : kn(n)
                    : l[0] != `noop` && n.l && n.l.qa(l),
                  (n.A = 0));
          }
      }
      et(4);
    } catch {}
  }
  var jt = class {
    constructor(e, t) {
      ((this.g = e), (this.map = t));
    }
  };
  function Mt(e) {
    ((this.l = e || 10),
      o.PerformanceNavigationTiming
        ? ((e = o.performance.getEntriesByType(`navigation`)),
          (e = e.length > 0 && (e[0].nextHopProtocol == `hq` || e[0].nextHopProtocol == `h2`)))
        : (e = !!(
            o.chrome &&
            o.chrome.loadTimes &&
            o.chrome.loadTimes() &&
            o.chrome.loadTimes().wasFetchedViaSpdy
          )),
      (this.j = e ? this.l : 1),
      (this.g = null),
      this.j > 1 && (this.g = new Set()),
      (this.h = null),
      (this.i = []));
  }
  function Nt(e) {
    return e.h ? !0 : e.g ? e.g.size >= e.j : !1;
  }
  function Pt(e) {
    return e.h ? 1 : e.g ? e.g.size : 0;
  }
  function Ft(e, t) {
    return e.h ? e.h == t : e.g ? e.g.has(t) : !1;
  }
  function It(e, t) {
    e.g ? e.g.add(t) : (e.h = t);
  }
  function Lt(e, t) {
    e.h && e.h == t ? (e.h = null) : e.g && e.g.has(t) && e.g.delete(t);
  }
  Mt.prototype.cancel = function () {
    if (((this.i = Rt(this)), this.h)) (this.h.cancel(), (this.h = null));
    else if (this.g && this.g.size !== 0) {
      for (let e of this.g.values()) e.cancel();
      this.g.clear();
    }
  };
  function Rt(e) {
    if (e.h != null) return e.i.concat(e.h.G);
    if (e.g != null && e.g.size !== 0) {
      let t = e.i;
      for (let n of e.g.values()) t = t.concat(n.G);
      return t;
    }
    return p(e.i);
  }
  var zt = RegExp(
    `^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`
  );
  function Bt(e, t) {
    if (e) {
      e = e.split(`&`);
      for (let n = 0; n < e.length; n++) {
        let r = e[n].indexOf(`=`),
          i,
          a = null;
        (r >= 0 ? ((i = e[n].substring(0, r)), (a = e[n].substring(r + 1))) : (i = e[n]),
          t(i, a ? decodeURIComponent(a.replace(/\+/g, ` `)) : ``));
      }
    }
  }
  function Vt(e) {
    ((this.g = this.o = this.j = ``), (this.u = null), (this.m = this.h = ``), (this.l = !1));
    let t;
    e instanceof Vt
      ? ((this.l = e.l),
        Ut(this, e.j),
        (this.o = e.o),
        (this.g = e.g),
        Wt(this, e.u),
        (this.h = e.h),
        Gt(this, D(e.i)),
        (this.m = e.m))
      : e && (t = String(e).match(zt))
        ? ((this.l = !1),
          Ut(this, t[1] || ``, !0),
          (this.o = qt(t[2] || ``)),
          (this.g = qt(t[3] || ``, !0)),
          Wt(this, t[4]),
          (this.h = qt(t[5] || ``, !0)),
          Gt(this, t[6] || ``, !0),
          (this.m = qt(t[7] || ``)))
        : ((this.l = !1), (this.i = new T(null, this.l)));
  }
  ((Vt.prototype.toString = function () {
    let e = [];
    var t = this.j;
    t && e.push(Jt(t, Xt, !0), `:`);
    var n = this.g;
    return (
      (n || t == `file`) &&
        (e.push(`//`),
        (t = this.o) && e.push(Jt(t, Xt, !0), `@`),
        e.push(mt(n).replace(/%25([0-9a-fA-F]{2})/g, `%$1`)),
        (n = this.u),
        n != null && e.push(`:`, String(n))),
      (n = this.h) &&
        (this.g && n.charAt(0) != `/` && e.push(`/`),
        e.push(Jt(n, n.charAt(0) == `/` ? Qt : Zt, !0))),
      (n = this.i.toString()) && e.push(`?`, n),
      (n = this.m) && e.push(`#`, Jt(n, en)),
      e.join(``)
    );
  }),
    (Vt.prototype.resolve = function (e) {
      let t = Ht(this),
        n = !!e.j;
      (n ? Ut(t, e.j) : (n = !!e.o),
        n ? (t.o = e.o) : (n = !!e.g),
        n ? (t.g = e.g) : (n = e.u != null));
      var r = e.h;
      if (n) Wt(t, e.u);
      else if ((n = !!e.h)) {
        if (r.charAt(0) != `/`)
          if (this.g && !this.h) r = `/` + r;
          else {
            var i = t.h.lastIndexOf(`/`);
            i != -1 && (r = t.h.slice(0, i + 1) + r);
          }
        if (((i = r), i == `..` || i == `.`)) r = ``;
        else if (i.indexOf(`./`) != -1 || i.indexOf(`/.`) != -1) {
          ((r = i.lastIndexOf(`/`, 0) == 0), (i = i.split(`/`)));
          let e = [];
          for (let t = 0; t < i.length; ) {
            let n = i[t++];
            n == `.`
              ? r && t == i.length && e.push(``)
              : n == `..`
                ? ((e.length > 1 || (e.length == 1 && e[0] != ``)) && e.pop(),
                  r && t == i.length && e.push(``))
                : (e.push(n), (r = !0));
          }
          r = e.join(`/`);
        } else r = i;
      }
      return (
        n ? (t.h = r) : (n = e.i.toString() !== ``),
        n ? Gt(t, D(e.i)) : (n = !!e.m),
        n && (t.m = e.m),
        t
      );
    }));
  function Ht(e) {
    return new Vt(e);
  }
  function Ut(e, t, n) {
    ((e.j = n ? qt(t, !0) : t), (e.j &&= e.j.replace(/:$/, ``)));
  }
  function Wt(e, t) {
    if (t) {
      if (((t = Number(t)), isNaN(t) || t < 0)) throw Error(`Bad port number ` + t);
      e.u = t;
    } else e.u = null;
  }
  function Gt(e, t, n) {
    t instanceof T ? ((e.i = t), sn(e.i, e.l)) : (n || (t = Jt(t, $t)), (e.i = new T(t, e.l)));
  }
  function w(e, t, n) {
    e.i.set(t, n);
  }
  function Kt(e) {
    return (
      w(
        e,
        `zx`,
        Math.floor(Math.random() * 2147483648).toString(36) +
          Math.abs(Math.floor(Math.random() * 2147483648) ^ Date.now()).toString(36)
      ),
      e
    );
  }
  function qt(e, t) {
    return e ? (t ? decodeURI(e.replace(/%25/g, `%2525`)) : decodeURIComponent(e)) : ``;
  }
  function Jt(e, t, n) {
    return typeof e == `string`
      ? ((e = encodeURI(e).replace(t, Yt)), n && (e = e.replace(/%25([0-9a-fA-F]{2})/g, `%$1`)), e)
      : null;
  }
  function Yt(e) {
    return ((e = e.charCodeAt(0)), `%` + ((e >> 4) & 15).toString(16) + (e & 15).toString(16));
  }
  var Xt = /[#\/\?@]/g,
    Zt = /[#\?:]/g,
    Qt = /[#\?]/g,
    $t = /[#\?@]/g,
    en = /#/g;
  function T(e, t) {
    ((this.h = this.g = null), (this.i = e || null), (this.j = !!t));
  }
  function E(e) {
    e.g ||
      ((e.g = new Map()),
      (e.h = 0),
      e.i &&
        Bt(e.i, function (t, n) {
          e.add(decodeURIComponent(t.replace(/\+/g, ` `)), n);
        }));
  }
  ((e = T.prototype),
    (e.add = function (e, t) {
      (E(this), (this.i = null), (e = on(this, e)));
      let n = this.g.get(e);
      return (n || this.g.set(e, (n = [])), n.push(t), (this.h += 1), this);
    }));
  function tn(e, t) {
    (E(e), (t = on(e, t)), e.g.has(t) && ((e.i = null), (e.h -= e.g.get(t).length), e.g.delete(t)));
  }
  function nn(e, t) {
    return (E(e), (t = on(e, t)), e.g.has(t));
  }
  e.forEach = function (e, t) {
    (E(this),
      this.g.forEach(function (n, r) {
        n.forEach(function (n) {
          e.call(t, n, r, this);
        }, this);
      }, this));
  };
  function rn(e, t) {
    E(e);
    let n = [];
    if (typeof t == `string`) nn(e, t) && (n = n.concat(e.g.get(on(e, t))));
    else for (e = Array.from(e.g.values()), t = 0; t < e.length; t++) n = n.concat(e[t]);
    return n;
  }
  ((e.set = function (e, t) {
    return (
      E(this),
      (this.i = null),
      (e = on(this, e)),
      nn(this, e) && (this.h -= this.g.get(e).length),
      this.g.set(e, [t]),
      (this.h += 1),
      this
    );
  }),
    (e.get = function (e, t) {
      return e ? ((e = rn(this, e)), e.length > 0 ? String(e[0]) : t) : t;
    }));
  function an(e, t, n) {
    (tn(e, t), n.length > 0 && ((e.i = null), e.g.set(on(e, t), p(n)), (e.h += n.length)));
  }
  e.toString = function () {
    if (this.i) return this.i;
    if (!this.g) return ``;
    let e = [],
      t = Array.from(this.g.keys());
    for (let r = 0; r < t.length; r++) {
      var n = t[r];
      let i = mt(n);
      n = rn(this, n);
      for (let t = 0; t < n.length; t++) {
        let r = i;
        (n[t] !== `` && (r += `=` + mt(n[t])), e.push(r));
      }
    }
    return (this.i = e.join(`&`));
  };
  function D(e) {
    let t = new T();
    return ((t.i = e.i), e.g && ((t.g = new Map(e.g)), (t.h = e.h)), t);
  }
  function on(e, t) {
    return ((t = String(t)), e.j && (t = t.toLowerCase()), t);
  }
  function sn(e, t) {
    (t &&
      !e.j &&
      (E(e),
      (e.i = null),
      e.g.forEach(function (e, t) {
        let n = t.toLowerCase();
        t != n && (tn(this, t), an(this, n, e));
      }, e)),
      (e.j = t));
  }
  function cn(e, t) {
    let n = new it();
    if (o.Image) {
      let r = new Image();
      ((r.onload = u(un, n, `TestLoadImage: loaded`, !0, t, r)),
        (r.onerror = u(un, n, `TestLoadImage: error`, !1, t, r)),
        (r.onabort = u(un, n, `TestLoadImage: abort`, !1, t, r)),
        (r.ontimeout = u(un, n, `TestLoadImage: timeout`, !1, t, r)),
        o.setTimeout(function () {
          r.ontimeout && r.ontimeout();
        }, 1e4),
        (r.src = e));
    } else t(!1);
  }
  function ln(e, t) {
    let n = new it(),
      r = new AbortController(),
      i = setTimeout(() => {
        (r.abort(), un(n, `TestPingServer: timeout`, !1, t));
      }, 1e4);
    fetch(e, { signal: r.signal })
      .then((e) => {
        (clearTimeout(i),
          e.ok ? un(n, `TestPingServer: ok`, !0, t) : un(n, `TestPingServer: server error`, !1, t));
      })
      .catch(() => {
        (clearTimeout(i), un(n, `TestPingServer: error`, !1, t));
      });
  }
  function un(e, t, n, r, i) {
    try {
      (i && ((i.onload = null), (i.onerror = null), (i.onabort = null), (i.ontimeout = null)),
        r(n));
    } catch {}
  }
  function dn() {
    this.g = new We();
  }
  function fn(e) {
    ((this.i = e.Sb || null), (this.h = e.ab || !1));
  }
  (d(fn, Ge),
    (fn.prototype.g = function () {
      return new pn(this.i, this.h);
    }));
  function pn(e, t) {
    (y.call(this),
      (this.H = e),
      (this.o = t),
      (this.m = void 0),
      (this.status = this.readyState = 0),
      (this.responseType = this.responseText = this.response = this.statusText = ``),
      (this.onreadystatechange = null),
      (this.A = new Headers()),
      (this.h = null),
      (this.F = `GET`),
      (this.D = ``),
      (this.g = !1),
      (this.B = this.j = this.l = null),
      (this.v = new AbortController()));
  }
  (d(pn, y),
    (e = pn.prototype),
    (e.open = function (e, t) {
      if (this.readyState != 0) throw (this.abort(), Error(`Error reopening a connection`));
      ((this.F = e), (this.D = t), (this.readyState = 1), gn(this));
    }),
    (e.send = function (e) {
      if (this.readyState != 1) throw (this.abort(), Error(`need to call open() first. `));
      if (this.v.signal.aborted) throw (this.abort(), Error(`Request was aborted.`));
      this.g = !0;
      let t = {
        headers: this.A,
        method: this.F,
        credentials: this.m,
        cache: void 0,
        signal: this.v.signal,
      };
      (e && (t.body = e),
        (this.H || o).fetch(new Request(this.D, t)).then(this.Pa.bind(this), this.ga.bind(this)));
    }),
    (e.abort = function () {
      ((this.response = this.responseText = ``),
        (this.A = new Headers()),
        (this.status = 0),
        this.v.abort(),
        this.j && this.j.cancel(`Request was aborted.`).catch(() => {}),
        this.readyState >= 1 && this.g && this.readyState != 4 && ((this.g = !1), hn(this)),
        (this.readyState = 0));
    }),
    (e.Pa = function (e) {
      if (
        this.g &&
        ((this.l = e),
        this.h ||
          ((this.status = this.l.status),
          (this.statusText = this.l.statusText),
          (this.h = e.headers),
          (this.readyState = 2),
          gn(this)),
        this.g && ((this.readyState = 3), gn(this), this.g))
      )
        if (this.responseType === `arraybuffer`)
          e.arrayBuffer().then(this.Na.bind(this), this.ga.bind(this));
        else if (o.ReadableStream !== void 0 && `body` in e) {
          if (((this.j = e.body.getReader()), this.o)) {
            if (this.responseType)
              throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);
            this.response = [];
          } else ((this.response = this.responseText = ``), (this.B = new TextDecoder()));
          mn(this);
        } else e.text().then(this.Oa.bind(this), this.ga.bind(this));
    }));
  function mn(e) {
    e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e));
  }
  ((e.Ma = function (e) {
    if (this.g) {
      if (this.o && e.value) this.response.push(e.value);
      else if (!this.o) {
        var t = e.value ? e.value : new Uint8Array();
        (t = this.B.decode(t, { stream: !e.done })) && (this.response = this.responseText += t);
      }
      (e.done ? hn(this) : gn(this), this.readyState == 3 && mn(this));
    }
  }),
    (e.Oa = function (e) {
      this.g && ((this.response = this.responseText = e), hn(this));
    }),
    (e.Na = function (e) {
      this.g && ((this.response = e), hn(this));
    }),
    (e.ga = function () {
      this.g && hn(this);
    }));
  function hn(e) {
    ((e.readyState = 4), (e.l = null), (e.j = null), (e.B = null), gn(e));
  }
  ((e.setRequestHeader = function (e, t) {
    this.A.append(e, t);
  }),
    (e.getResponseHeader = function (e) {
      return (this.h && this.h.get(e.toLowerCase())) || ``;
    }),
    (e.getAllResponseHeaders = function () {
      if (!this.h) return ``;
      let e = [],
        t = this.h.entries();
      for (var n = t.next(); !n.done; ) ((n = n.value), e.push(n[0] + `: ` + n[1]), (n = t.next()));
      return e.join(`\r
`);
    }));
  function gn(e) {
    e.onreadystatechange && e.onreadystatechange.call(e);
  }
  Object.defineProperty(pn.prototype, `withCredentials`, {
    get: function () {
      return this.m === `include`;
    },
    set: function (e) {
      this.m = e ? `include` : `same-origin`;
    },
  });
  function _n(e) {
    let t = ``;
    return (
      ge(e, function (e, n) {
        ((t += n),
          (t += `:`),
          (t += e),
          (t += `\r
`));
      }),
      t
    );
  }
  function vn(e, t, n) {
    a: {
      for (r in n) {
        var r = !1;
        break a;
      }
      r = !0;
    }
    r || ((n = _n(n)), typeof e == `string` || w(e, t, n));
  }
  function O(e) {
    (y.call(this),
      (this.headers = new Map()),
      (this.L = e || null),
      (this.h = !1),
      (this.g = null),
      (this.D = ``),
      (this.o = 0),
      (this.l = ``),
      (this.j = this.B = this.v = this.A = !1),
      (this.m = null),
      (this.F = ``),
      (this.H = !1));
  }
  d(O, y);
  var yn = /^https?$/i,
    bn = [`POST`, `PUT`];
  ((e = O.prototype),
    (e.Fa = function (e) {
      this.H = e;
    }),
    (e.ea = function (e, t, n, r) {
      if (this.g)
        throw Error(
          `[goog.net.XhrIo] Object is active with another request=` + this.D + `; newUri=` + e
        );
      ((t = t ? t.toUpperCase() : `GET`),
        (this.D = e),
        (this.l = ``),
        (this.o = 0),
        (this.A = !1),
        (this.h = !0),
        (this.g = this.L ? this.L.g() : ft.g()),
        (this.g.onreadystatechange = f(l(this.Ca, this))));
      try {
        ((this.B = !0), this.g.open(t, String(e), !0), (this.B = !1));
      } catch (e) {
        xn(this, e);
        return;
      }
      if (((e = n || ``), (n = new Map(this.headers)), r))
        if (Object.getPrototypeOf(r) === Object.prototype) for (var i in r) n.set(i, r[i]);
        else if (typeof r.keys == `function` && typeof r.get == `function`)
          for (let e of r.keys()) n.set(e, r.get(e));
        else throw Error(`Unknown input type for opt_headers: ` + String(r));
      ((r = Array.from(n.keys()).find((e) => e.toLowerCase() == `content-type`)),
        (i = o.FormData && e instanceof o.FormData),
        !(Array.prototype.indexOf.call(bn, t, void 0) >= 0) ||
          r ||
          i ||
          n.set(`Content-Type`, `application/x-www-form-urlencoded;charset=utf-8`));
      for (let [e, t] of n) this.g.setRequestHeader(e, t);
      (this.F && (this.g.responseType = this.F),
        `withCredentials` in this.g &&
          this.g.withCredentials !== this.H &&
          (this.g.withCredentials = this.H));
      try {
        ((this.m &&= (clearTimeout(this.m), null)), (this.v = !0), this.g.send(e), (this.v = !1));
      } catch (e) {
        xn(this, e);
      }
    }));
  function xn(e, t) {
    ((e.h = !1), e.g && ((e.j = !0), e.g.abort(), (e.j = !1)), (e.l = t), (e.o = 5), Sn(e), wn(e));
  }
  function Sn(e) {
    e.A || ((e.A = !0), b(e, `complete`), b(e, `error`));
  }
  ((e.abort = function (e) {
    this.g &&
      this.h &&
      ((this.h = !1),
      (this.j = !0),
      this.g.abort(),
      (this.j = !1),
      (this.o = e || 7),
      b(this, `complete`),
      b(this, `abort`),
      wn(this));
  }),
    (e.N = function () {
      (this.g &&
        (this.h && ((this.h = !1), (this.j = !0), this.g.abort(), (this.j = !1)), wn(this, !0)),
        O.Z.N.call(this));
    }),
    (e.Ca = function () {
      this.u || (this.B || this.v || this.j ? Cn(this) : this.Xa());
    }),
    (e.Xa = function () {
      Cn(this);
    }));
  function Cn(e) {
    if (e.h && a !== void 0) {
      if (e.v && Tn(e) == 4) setTimeout(e.Ca.bind(e), 0);
      else if ((b(e, `readystatechange`), Tn(e) == 4)) {
        e.h = !1;
        try {
          let a = e.ca();
          a: switch (a) {
            case 200:
            case 201:
            case 202:
            case 204:
            case 206:
            case 304:
            case 1223:
              var t = !0;
              break a;
            default:
              t = !1;
          }
          var n;
          if (!(n = t)) {
            var r;
            if ((r = a === 0)) {
              let t = String(e.D).match(zt)[1] || null;
              (!t && o.self && o.self.location && (t = o.self.location.protocol.slice(0, -1)),
                (r = !yn.test(t ? t.toLowerCase() : ``)));
            }
            n = r;
          }
          if (n) (b(e, `complete`), b(e, `success`));
          else {
            e.o = 6;
            try {
              var i = Tn(e) > 2 ? e.g.statusText : ``;
            } catch {
              i = ``;
            }
            ((e.l = i + ` [` + e.ca() + `]`), Sn(e));
          }
        } finally {
          wn(e);
        }
      }
    }
  }
  function wn(e, t) {
    if (e.g) {
      e.m &&= (clearTimeout(e.m), null);
      let n = e.g;
      ((e.g = null), t || b(e, `ready`));
      try {
        n.onreadystatechange = null;
      } catch {}
    }
  }
  e.isActive = function () {
    return !!this.g;
  };
  function Tn(e) {
    return e.g ? e.g.readyState : 0;
  }
  ((e.ca = function () {
    try {
      return Tn(this) > 2 ? this.g.status : -1;
    } catch {
      return -1;
    }
  }),
    (e.la = function () {
      try {
        return this.g ? this.g.responseText : ``;
      } catch {
        return ``;
      }
    }),
    (e.La = function (e) {
      if (this.g) {
        var t = this.g.responseText;
        return (e && t.indexOf(e) == 0 && (t = t.substring(e.length)), Ue(t));
      }
    }));
  function En(e) {
    try {
      if (!e.g) return null;
      if (`response` in e.g) return e.g.response;
      switch (e.F) {
        case ``:
        case `text`:
          return e.g.responseText;
        case `arraybuffer`:
          if (`mozResponseArrayBuffer` in e.g) return e.g.mozResponseArrayBuffer;
      }
      return null;
    } catch {
      return null;
    }
  }
  function Dn(e) {
    let t = {};
    e = ((e.g && Tn(e) >= 2 && e.g.getAllResponseHeaders()) || ``).split(`\r
`);
    for (let r = 0; r < e.length; r++) {
      if (ue(e[r])) continue;
      var n = ht(e[r]);
      let i = n[0];
      if (((n = n[1]), typeof n != `string`)) continue;
      n = n.trim();
      let a = t[i] || [];
      ((t[i] = a), a.push(n));
    }
    _e(t, function (e) {
      return e.join(`, `);
    });
  }
  ((e.ya = function () {
    return this.o;
  }),
    (e.Ha = function () {
      return typeof this.l == `string` ? this.l : String(this.l);
    }));
  function k(e, t, n) {
    return (n && n.internalChannelParams && n.internalChannelParams[e]) || t;
  }
  function On(e) {
    ((this.za = 0),
      (this.i = []),
      (this.j = new it()),
      (this.ba =
        this.na =
        this.J =
        this.W =
        this.g =
        this.wa =
        this.G =
        this.H =
        this.u =
        this.U =
        this.o =
          null),
      (this.Ya = this.V = 0),
      (this.Sa = k(`failFast`, !1, e)),
      (this.F = this.C = this.v = this.m = this.l = null),
      (this.X = !0),
      (this.xa = this.K = -1),
      (this.Y = this.A = this.D = 0),
      (this.Qa = k(`baseRetryDelayMs`, 5e3, e)),
      (this.Za = k(`retryDelaySeedMs`, 1e4, e)),
      (this.Ta = k(`forwardChannelMaxRetries`, 2, e)),
      (this.va = k(`forwardChannelRequestTimeoutMs`, 2e4, e)),
      (this.ma = (e && e.xmlHttpFactory) || void 0),
      (this.Ua = (e && e.Rb) || void 0),
      (this.Aa = (e && e.useFetchStreams) || !1),
      (this.O = void 0),
      (this.L = (e && e.supportsCrossDomainXhr) || !1),
      (this.M = ``),
      (this.h = new Mt(e && e.concurrentRequestLimit)),
      (this.Ba = new dn()),
      (this.S = (e && e.fastHandshake) || !1),
      (this.R = (e && e.encodeInitMessageHeaders) || !1),
      this.S && this.R && (this.R = !1),
      (this.Ra = (e && e.Pb) || !1),
      e && e.ua && this.j.ua(),
      e && e.forceLongPolling && (this.X = !1),
      (this.aa = (!this.S && this.X && e && e.detectBufferingProxy) || !1),
      (this.ia = void 0),
      e && e.longPollingTimeout && e.longPollingTimeout > 0 && (this.ia = e.longPollingTimeout),
      (this.ta = void 0),
      (this.T = 0),
      (this.P = !1),
      (this.ja = this.B = null));
  }
  ((e = On.prototype),
    (e.ka = 8),
    (e.I = 1),
    (e.connect = function (e, t, n, r) {
      (C(0),
        (this.W = e),
        (this.H = t || {}),
        n && r !== void 0 && ((this.H.OSID = n), (this.H.OAID = r)),
        (this.F = this.X),
        (this.J = Wn(this, null, this.W)),
        Mn(this));
    }));
  function kn(e) {
    if ((jn(e), e.I == 3)) {
      var t = e.V++,
        n = Ht(e.J);
      if (
        (w(n, `SID`, e.M),
        w(n, `RID`, t),
        w(n, `TYPE`, `terminate`),
        j(e, n),
        (t = new gt(e, e.j, t)),
        (t.M = 2),
        (t.A = Kt(Ht(n))),
        (n = !1),
        o.navigator && o.navigator.sendBeacon)
      )
        try {
          n = o.navigator.sendBeacon(t.A.toString(), ``);
        } catch {}
      (!n && o.Image && ((new Image().src = t.A), (n = !0)),
        n || ((t.g = M(t.j, null)), t.g.ea(t.A)),
        (t.F = Date.now()),
        Tt(t));
    }
    Un(e);
  }
  function An(e) {
    e.g &&= (Ln(e), e.g.cancel(), null);
  }
  function jn(e) {
    (An(e),
      (e.v &&= (o.clearTimeout(e.v), null)),
      zn(e),
      e.h.cancel(),
      (e.m &&= (typeof e.m == `number` && o.clearTimeout(e.m), null)));
  }
  function Mn(e) {
    if (!Nt(e.h) && !e.m) {
      e.m = !0;
      var t = e.Ea;
      (ie || se(), (ae ||= (ie(), !0)), oe.add(t, e), (e.D = 0));
    }
  }
  function A(e, t) {
    return Pt(e.h) >= e.h.j - (e.m ? 1 : 0)
      ? !1
      : e.m
        ? ((e.i = t.G.concat(e.i)), !0)
        : e.I == 1 || e.I == 2 || e.D >= (e.Sa ? 0 : e.Ta)
          ? !1
          : ((e.m = rt(l(e.Ea, e, t), Vn(e, e.D))), e.D++, !0);
  }
  e.Ea = function (e) {
    if (this.m)
      if (((this.m = null), this.I == 1)) {
        if (!e) {
          ((this.V = Math.floor(Math.random() * 1e5)), (e = this.V++));
          let i = new gt(this, this.j, e),
            a = this.o;
          if (
            (this.U && (a ? ((a = ve(a)), be(a, this.U)) : (a = this.U)),
            this.u !== null || this.R || ((i.J = a), (a = null)),
            this.S)
          )
            a: {
              for (var t = 0, n = 0; n < this.i.length; n++) {
                b: {
                  var r = this.i[n];
                  if (`__data__` in r.map && ((r = r.map.__data__), typeof r == `string`)) {
                    r = r.length;
                    break b;
                  }
                  r = void 0;
                }
                if (r === void 0) break;
                if (((t += r), t > 4096)) {
                  t = n;
                  break a;
                }
                if (t === 4096 || n === this.i.length - 1) {
                  t = n + 1;
                  break a;
                }
              }
              t = 1e3;
            }
          else t = 1e3;
          ((t = Pn(this, i, t)),
            (n = Ht(this.J)),
            w(n, `RID`, e),
            w(n, `CVER`, 22),
            this.G && w(n, `X-HTTP-Session-Id`, this.G),
            j(this, n),
            a && (this.R ? (t = `headers=` + mt(_n(a)) + `&` + t) : this.u && vn(n, this.u, a)),
            It(this.h, i),
            this.Ra && w(n, `TYPE`, `init`),
            this.S
              ? (w(n, `$req`, t), w(n, `SID`, `null`), (i.U = !0), bt(i, n, null))
              : bt(i, n, t),
            (this.I = 2));
        }
      } else this.I == 3 && (e ? Nn(this, e) : this.i.length == 0 || Nt(this.h) || Nn(this));
  };
  function Nn(e, t) {
    var n = t ? t.l : e.V++;
    let r = Ht(e.J);
    (w(r, `SID`, e.M),
      w(r, `RID`, n),
      w(r, `AID`, e.K),
      j(e, r),
      e.u && e.o && vn(r, e.u, e.o),
      (n = new gt(e, e.j, n, e.D + 1)),
      e.u === null && (n.J = e.o),
      t && (e.i = t.G.concat(e.i)),
      (t = Pn(e, n, 1e3)),
      (n.H = Math.round(e.va * 0.5) + Math.round(e.va * 0.5 * Math.random())),
      It(e.h, n),
      bt(n, r, t));
  }
  function j(e, t) {
    (e.H &&
      ge(e.H, function (e, n) {
        w(t, n, e);
      }),
      e.l &&
        ge({}, function (e, n) {
          w(t, n, e);
        }));
  }
  function Pn(e, t, n) {
    n = Math.min(e.i.length, n);
    let r = e.l ? l(e.l.Ka, e.l, e) : null;
    a: {
      var i = e.i;
      let t = -1;
      for (;;) {
        let e = [`count=` + n];
        t == -1 ? (n > 0 ? ((t = i[0].g), e.push(`ofs=` + t)) : (t = 0)) : e.push(`ofs=` + t);
        let c = !0;
        for (let l = 0; l < n; l++) {
          var a = i[l].g;
          let n = i[l].map;
          if (((a -= t), a < 0)) ((t = Math.max(0, i[l].g - 100)), (c = !1));
          else
            try {
              a = `req` + a + `_` || ``;
              try {
                var o = n instanceof Map ? n : Object.entries(n);
                for (let [t, n] of o) {
                  let r = n;
                  (s(n) && (r = S(n)), e.push(a + t + `=` + encodeURIComponent(r)));
                }
              } catch (t) {
                throw (e.push(a + `type=_badmap`), t);
              }
            } catch {
              r && r(n);
            }
        }
        if (c) {
          o = e.join(`&`);
          break a;
        }
      }
      o = void 0;
    }
    return ((e = e.i.splice(0, n)), (t.G = e), o);
  }
  function Fn(e) {
    if (!e.g && !e.v) {
      e.Y = 1;
      var t = e.Da;
      (ie || se(), (ae ||= (ie(), !0)), oe.add(t, e), (e.A = 0));
    }
  }
  function In(e) {
    return e.g || e.v || e.A >= 3 ? !1 : (e.Y++, (e.v = rt(l(e.Da, e), Vn(e, e.A))), e.A++, !0);
  }
  ((e.Da = function () {
    if (((this.v = null), Rn(this), this.aa && !(this.P || this.g == null || this.T <= 0))) {
      var e = 4 * this.T;
      (this.j.info(`BP detection timer enabled: ` + e), (this.B = rt(l(this.Wa, this), e)));
    }
  }),
    (e.Wa = function () {
      this.B &&
        ((this.B = null),
        this.j.info(`BP detection timeout reached.`),
        this.j.info(`Buffering proxy detected and switch to long-polling!`),
        (this.F = !1),
        (this.P = !0),
        C(10),
        An(this),
        Rn(this));
    }));
  function Ln(e) {
    e.B != null && (o.clearTimeout(e.B), (e.B = null));
  }
  function Rn(e) {
    ((e.g = new gt(e, e.j, `rpc`, e.Y)), e.u === null && (e.g.J = e.o), (e.g.P = 0));
    var t = Ht(e.na);
    (w(t, `RID`, `rpc`),
      w(t, `SID`, e.M),
      w(t, `AID`, e.K),
      w(t, `CI`, e.F ? `0` : `1`),
      !e.F && e.ia && w(t, `TO`, e.ia),
      w(t, `TYPE`, `xmlhttp`),
      j(e, t),
      e.u && e.o && vn(t, e.u, e.o),
      e.O && (e.g.H = e.O));
    var n = e.g;
    ((e = e.ba), (n.M = 1), (n.A = Kt(Ht(t))), (n.u = null), (n.R = !0), xt(n, e));
  }
  e.Va = function () {
    this.C != null && ((this.C = null), An(this), In(this), C(19));
  };
  function zn(e) {
    e.C != null && (o.clearTimeout(e.C), (e.C = null));
  }
  function Bn(e, t) {
    var n = null;
    if (e.g == t) {
      (zn(e), Ln(e), (e.g = null));
      var r = 2;
    } else if (Ft(e.h, t)) ((n = t.G), Lt(e.h, t), (r = 1));
    else return;
    if (e.I != 0) {
      if (t.o)
        if (r == 1) {
          ((n = t.u ? t.u.length : 0), (t = Date.now() - t.F));
          var i = e.D;
          ((r = Qe()), b(r, new nt(r, n)), Mn(e));
        } else Fn(e);
      else if (
        ((i = t.m), i == 3 || (i == 0 && t.X > 0) || !((r == 1 && A(e, t)) || (r == 2 && In(e))))
      )
        switch ((n && n.length > 0 && ((t = e.h), (t.i = t.i.concat(n))), i)) {
          case 1:
            Hn(e, 5);
            break;
          case 4:
            Hn(e, 10);
            break;
          case 3:
            Hn(e, 6);
            break;
          default:
            Hn(e, 2);
        }
    }
  }
  function Vn(e, t) {
    let n = e.Qa + Math.floor(Math.random() * e.Za);
    return (e.isActive() || (n *= 2), n * t);
  }
  function Hn(e, t) {
    if ((e.j.info(`Error code ` + t), t == 2)) {
      var n = l(e.bb, e),
        r = e.Ua;
      let t = !r;
      ((r = new Vt(r || `//www.google.com/images/cleardot.gif`)),
        (o.location && o.location.protocol == `http`) || Ut(r, `https`),
        Kt(r),
        t ? cn(r.toString(), n) : ln(r.toString(), n));
    } else C(2);
    ((e.I = 0), e.l && e.l.pa(t), Un(e), jn(e));
  }
  e.bb = function (e) {
    e
      ? (this.j.info(`Successfully pinged google.com`), C(2))
      : (this.j.info(`Failed to ping google.com`), C(1));
  };
  function Un(e) {
    if (((e.I = 0), (e.ja = []), e.l)) {
      let t = Rt(e.h);
      ((t.length != 0 || e.i.length != 0) &&
        (m(e.ja, t), m(e.ja, e.i), (e.h.i.length = 0), p(e.i), (e.i.length = 0)),
        e.l.oa());
    }
  }
  function Wn(e, t, n) {
    var r = n instanceof Vt ? Ht(n) : new Vt(n);
    if (r.g != ``) (t && (r.g = t + `.` + r.g), Wt(r, r.u));
    else {
      var i = o.location;
      ((r = i.protocol), (t = t ? t + `.` + i.hostname : i.hostname), (i = +i.port));
      let e = new Vt(null);
      (r && Ut(e, r), t && (e.g = t), i && Wt(e, i), n && (e.h = n), (r = e));
    }
    return ((n = e.G), (t = e.wa), n && t && w(r, n, t), w(r, `VER`, e.ka), j(e, r), r);
  }
  function M(e, t, n) {
    if (t && !e.L) throw Error(`Can't create secondary domain capable XhrIo object.`);
    return ((t = e.Aa && !e.ma ? new O(new fn({ ab: n })) : new O(e.ma)), t.Fa(e.L), t);
  }
  e.isActive = function () {
    return !!this.l && this.l.isActive(this);
  };
  function N() {}
  ((e = N.prototype),
    (e.ra = function () {}),
    (e.qa = function () {}),
    (e.pa = function () {}),
    (e.oa = function () {}),
    (e.isActive = function () {
      return !0;
    }),
    (e.Ka = function () {}));
  function Gn() {}
  Gn.prototype.g = function (e, t) {
    return new P(e, t);
  };
  function P(e, t) {
    (y.call(this),
      (this.g = new On(t)),
      (this.l = e),
      (this.h = (t && t.messageUrlParams) || null),
      (e = (t && t.messageHeaders) || null),
      t &&
        t.clientProtocolHeaderRequired &&
        (e ? (e[`X-Client-Protocol`] = `webchannel`) : (e = { "X-Client-Protocol": `webchannel` })),
      (this.g.o = e),
      (e = (t && t.initMessageHeaders) || null),
      t &&
        t.messageContentType &&
        (e
          ? (e[`X-WebChannel-Content-Type`] = t.messageContentType)
          : (e = { "X-WebChannel-Content-Type": t.messageContentType })),
      t &&
        t.sa &&
        (e
          ? (e[`X-WebChannel-Client-Profile`] = t.sa)
          : (e = { "X-WebChannel-Client-Profile": t.sa })),
      (this.g.U = e),
      (e = t && t.Qb) && !ue(e) && (this.g.u = e),
      (this.A = (t && t.supportsCrossDomainXhr) || !1),
      (this.v = (t && t.sendRawJson) || !1),
      (t &&= t.httpSessionIdParam) &&
        !ue(t) &&
        ((this.g.G = t),
        (e = this.h),
        e !== null && t in e && ((e = this.h), t in e && delete e[t])),
      (this.j = new Jn(this)));
  }
  (d(P, y),
    (P.prototype.m = function () {
      ((this.g.l = this.j), this.A && (this.g.L = !0), this.g.connect(this.l, this.h || void 0));
    }),
    (P.prototype.close = function () {
      kn(this.g);
    }),
    (P.prototype.o = function (e) {
      var t = this.g;
      if (typeof e == `string`) {
        var n = {};
        ((n.__data__ = e), (e = n));
      } else this.v && ((n = {}), (n.__data__ = S(e)), (e = n));
      (t.i.push(new jt(t.Ya++, e)), t.I == 3 && Mn(t));
    }),
    (P.prototype.N = function () {
      ((this.g.l = null), delete this.j, kn(this.g), delete this.g, P.Z.N.call(this));
    }));
  function Kn(e) {
    (Je.call(this),
      e.__headers__ &&
        ((this.headers = e.__headers__),
        (this.statusCode = e.__status__),
        delete e.__headers__,
        delete e.__status__));
    var t = e.__sm__;
    if (t) {
      a: {
        for (let n in t) {
          e = n;
          break a;
        }
        e = void 0;
      }
      ((this.i = e) && ((e = this.i), (t = t !== null && e in t ? t[e] : void 0)), (this.data = t));
    } else this.data = e;
  }
  d(Kn, Je);
  function qn() {
    (Ye.call(this), (this.status = 1));
  }
  d(qn, Ye);
  function Jn(e) {
    this.g = e;
  }
  (d(Jn, N),
    (Jn.prototype.ra = function () {
      b(this.g, `a`);
    }),
    (Jn.prototype.qa = function (e) {
      b(this.g, new Kn(e));
    }),
    (Jn.prototype.pa = function (e) {
      b(this.g, new qn());
    }),
    (Jn.prototype.oa = function () {
      b(this.g, `b`);
    }),
    (Gn.prototype.createWebChannel = Gn.prototype.g),
    (P.prototype.send = P.prototype.o),
    (P.prototype.open = P.prototype.m),
    (P.prototype.close = P.prototype.close),
    (Al = Sl.createWebChannelTransport =
      function () {
        return new Gn();
      }),
    (kl = Sl.getStatEventTarget =
      function () {
        return Qe();
      }),
    (Ol = Sl.Event = Xe),
    (Dl = Sl.Stat =
      {
        jb: 0,
        mb: 1,
        nb: 2,
        Hb: 3,
        Mb: 4,
        Jb: 5,
        Kb: 6,
        Ib: 7,
        Gb: 8,
        Lb: 9,
        PROXY: 10,
        NOPROXY: 11,
        Eb: 12,
        Ab: 13,
        Bb: 14,
        zb: 15,
        Cb: 16,
        Db: 17,
        fb: 18,
        eb: 19,
        gb: 20,
      }),
    (ut.NO_ERROR = 0),
    (ut.TIMEOUT = 8),
    (ut.HTTP_ERROR = 6),
    (El = Sl.ErrorCode = ut),
    (dt.COMPLETE = `complete`),
    (Tl = Sl.EventType = dt),
    (Ke.EventType = qe),
    (qe.OPEN = `a`),
    (qe.CLOSE = `b`),
    (qe.ERROR = `c`),
    (qe.MESSAGE = `d`),
    (y.prototype.listen = y.prototype.J),
    (wl = Sl.WebChannel = Ke),
    (Sl.FetchXmlHttpFactory = fn),
    (O.prototype.listenOnce = O.prototype.K),
    (O.prototype.getLastError = O.prototype.Ha),
    (O.prototype.getLastErrorCode = O.prototype.ya),
    (O.prototype.getStatus = O.prototype.ca),
    (O.prototype.getResponseJson = O.prototype.La),
    (O.prototype.getResponseText = O.prototype.la),
    (O.prototype.send = O.prototype.ea),
    (O.prototype.setWithCredentials = O.prototype.Fa),
    (Cl = Sl.XhrIo = O));
}).apply(xl === void 0 ? (typeof self < `u` ? self : typeof window < `u` ? window : {}) : xl);
var I = class {
  constructor(e) {
    this.uid = e;
  }
  isAuthenticated() {
    return this.uid != null;
  }
  toKey() {
    return this.isAuthenticated() ? `uid:` + this.uid : `anonymous-user`;
  }
  isEqual(e) {
    return e.uid === this.uid;
  }
};
((I.UNAUTHENTICATED = new I(null)),
  (I.GOOGLE_CREDENTIALS = new I(`google-credentials-uid`)),
  (I.FIRST_PARTY = new I(`first-party-uid`)),
  (I.MOCK_USER = new I(`mock-user`)));
var jl = `12.8.0`;
function Ml(e) {
  jl = e;
}
var Nl = new qe(`@firebase/firestore`);
function Pl() {
  return Nl.logLevel;
}
function L(e, ...t) {
  if (Nl.logLevel <= S.DEBUG) {
    let n = t.map(Ll);
    Nl.debug(`Firestore (${jl}): ${e}`, ...n);
  }
}
function Fl(e, ...t) {
  if (Nl.logLevel <= S.ERROR) {
    let n = t.map(Ll);
    Nl.error(`Firestore (${jl}): ${e}`, ...n);
  }
}
function Il(e, ...t) {
  if (Nl.logLevel <= S.WARN) {
    let n = t.map(Ll);
    Nl.warn(`Firestore (${jl}): ${e}`, ...n);
  }
}
function Ll(e) {
  if (typeof e == `string`) return e;
  try {
    return (function (e) {
      return JSON.stringify(e);
    })(e);
  } catch {
    return e;
  }
}
function R(e, t, n) {
  let r = `Unexpected state`;
  (typeof t == `string` ? (r = t) : (n = t), Rl(e, r, n));
}
function Rl(e, t, n) {
  let r = `FIRESTORE (${jl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;
  if (n !== void 0)
    try {
      r += ` CONTEXT: ` + JSON.stringify(n);
    } catch {
      r += ` CONTEXT: ` + n;
    }
  throw (Fl(r), Error(r));
}
function z(e, t, n, r) {
  let i = `Unexpected state`;
  (typeof n == `string` ? (i = n) : (r = n), e || Rl(t, i, r));
}
function B(e, t) {
  return e;
}
var V = {
    OK: `ok`,
    CANCELLED: `cancelled`,
    UNKNOWN: `unknown`,
    INVALID_ARGUMENT: `invalid-argument`,
    DEADLINE_EXCEEDED: `deadline-exceeded`,
    NOT_FOUND: `not-found`,
    ALREADY_EXISTS: `already-exists`,
    PERMISSION_DENIED: `permission-denied`,
    UNAUTHENTICATED: `unauthenticated`,
    RESOURCE_EXHAUSTED: `resource-exhausted`,
    FAILED_PRECONDITION: `failed-precondition`,
    ABORTED: `aborted`,
    OUT_OF_RANGE: `out-of-range`,
    UNIMPLEMENTED: `unimplemented`,
    INTERNAL: `internal`,
    UNAVAILABLE: `unavailable`,
    DATA_LOSS: `data-loss`,
  },
  H = class extends ye {
    constructor(e, t) {
      (super(e, t),
        (this.code = e),
        (this.message = t),
        (this.toString = () => `${this.name}: [code=${this.code}]: ${this.message}`));
    }
  },
  zl = class {
    constructor() {
      this.promise = new Promise((e, t) => {
        ((this.resolve = e), (this.reject = t));
      });
    }
  },
  Bl = class {
    constructor(e, t) {
      ((this.user = t),
        (this.type = `OAuth`),
        (this.headers = new Map()),
        this.headers.set(`Authorization`, `Bearer ${e}`));
    }
  },
  Vl = class {
    getToken() {
      return Promise.resolve(null);
    }
    invalidateToken() {}
    start(e, t) {
      e.enqueueRetryable(() => t(I.UNAUTHENTICATED));
    }
    shutdown() {}
  },
  Hl = class {
    constructor(e) {
      ((this.token = e), (this.changeListener = null));
    }
    getToken() {
      return Promise.resolve(this.token);
    }
    invalidateToken() {}
    start(e, t) {
      ((this.changeListener = t), e.enqueueRetryable(() => t(this.token.user)));
    }
    shutdown() {
      this.changeListener = null;
    }
  },
  Ul = class {
    constructor(e) {
      ((this.t = e),
        (this.currentUser = I.UNAUTHENTICATED),
        (this.i = 0),
        (this.forceRefresh = !1),
        (this.auth = null));
    }
    start(e, t) {
      z(this.o === void 0, 42304);
      let n = this.i,
        r = (e) => (this.i === n ? Promise.resolve() : ((n = this.i), t(e))),
        i = new zl();
      this.o = () => {
        (this.i++,
          (this.currentUser = this.u()),
          i.resolve(),
          (i = new zl()),
          e.enqueueRetryable(() => r(this.currentUser)));
      };
      let a = () => {
          let t = i;
          e.enqueueRetryable(async () => {
            (await t.promise, await r(this.currentUser));
          });
        },
        o = (e) => {
          (L(`FirebaseAuthCredentialsProvider`, `Auth detected`),
            (this.auth = e),
            this.o && (this.auth.addAuthTokenListener(this.o), a()));
        };
      (this.t.onInit((e) => o(e)),
        setTimeout(() => {
          if (!this.auth) {
            let e = this.t.getImmediate({ optional: !0 });
            e
              ? o(e)
              : (L(`FirebaseAuthCredentialsProvider`, `Auth not yet detected`),
                i.resolve(),
                (i = new zl()));
          }
        }, 0),
        a());
    }
    getToken() {
      let e = this.i,
        t = this.forceRefresh;
      return (
        (this.forceRefresh = !1),
        this.auth
          ? this.auth
              .getToken(t)
              .then((t) =>
                this.i === e
                  ? t
                    ? (z(typeof t.accessToken == `string`, 31837, { l: t }),
                      new Bl(t.accessToken, this.currentUser))
                    : null
                  : (L(`FirebaseAuthCredentialsProvider`, `getToken aborted due to token change.`),
                    this.getToken())
              )
          : Promise.resolve(null)
      );
    }
    invalidateToken() {
      this.forceRefresh = !0;
    }
    shutdown() {
      (this.auth && this.o && this.auth.removeAuthTokenListener(this.o), (this.o = void 0));
    }
    u() {
      let e = this.auth && this.auth.getUid();
      return (z(e === null || typeof e == `string`, 2055, { h: e }), new I(e));
    }
  },
  Wl = class {
    constructor(e, t, n) {
      ((this.P = e),
        (this.T = t),
        (this.I = n),
        (this.type = `FirstParty`),
        (this.user = I.FIRST_PARTY),
        (this.R = new Map()));
    }
    A() {
      return this.I ? this.I() : null;
    }
    get headers() {
      this.R.set(`X-Goog-AuthUser`, this.P);
      let e = this.A();
      return (
        e && this.R.set(`Authorization`, e),
        this.T && this.R.set(`X-Goog-Iam-Authorization-Token`, this.T),
        this.R
      );
    }
  },
  Gl = class {
    constructor(e, t, n) {
      ((this.P = e), (this.T = t), (this.I = n));
    }
    getToken() {
      return Promise.resolve(new Wl(this.P, this.T, this.I));
    }
    start(e, t) {
      e.enqueueRetryable(() => t(I.FIRST_PARTY));
    }
    shutdown() {}
    invalidateToken() {}
  },
  Kl = class {
    constructor(e) {
      ((this.value = e),
        (this.type = `AppCheck`),
        (this.headers = new Map()),
        e && e.length > 0 && this.headers.set(`x-firebase-appcheck`, this.value));
    }
  },
  ql = class {
    constructor(e, t) {
      ((this.V = t),
        (this.forceRefresh = !1),
        (this.appCheck = null),
        (this.m = null),
        (this.p = null),
        T(e) && e.settings.appCheckToken && (this.p = e.settings.appCheckToken));
    }
    start(e, t) {
      z(this.o === void 0, 3512);
      let n = (e) => {
        e.error != null &&
          L(
            `FirebaseAppCheckTokenProvider`,
            `Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`
          );
        let n = e.token !== this.m;
        return (
          (this.m = e.token),
          L(`FirebaseAppCheckTokenProvider`, `Received ${n ? `new` : `existing`} token.`),
          n ? t(e.token) : Promise.resolve()
        );
      };
      this.o = (t) => {
        e.enqueueRetryable(() => n(t));
      };
      let r = (e) => {
        (L(`FirebaseAppCheckTokenProvider`, `AppCheck detected`),
          (this.appCheck = e),
          this.o && this.appCheck.addTokenListener(this.o));
      };
      (this.V.onInit((e) => r(e)),
        setTimeout(() => {
          if (!this.appCheck) {
            let e = this.V.getImmediate({ optional: !0 });
            e ? r(e) : L(`FirebaseAppCheckTokenProvider`, `AppCheck not yet detected`);
          }
        }, 0));
    }
    getToken() {
      if (this.p) return Promise.resolve(new Kl(this.p));
      let e = this.forceRefresh;
      return (
        (this.forceRefresh = !1),
        this.appCheck
          ? this.appCheck
              .getToken(e)
              .then((e) =>
                e
                  ? (z(typeof e.token == `string`, 44558, { tokenResult: e }),
                    (this.m = e.token),
                    new Kl(e.token))
                  : null
              )
          : Promise.resolve(null)
      );
    }
    invalidateToken() {
      this.forceRefresh = !0;
    }
    shutdown() {
      (this.appCheck && this.o && this.appCheck.removeTokenListener(this.o), (this.o = void 0));
    }
  };
function Jl(e) {
  let t = typeof self < `u` && (self.crypto || self.msCrypto),
    n = new Uint8Array(e);
  if (t && typeof t.getRandomValues == `function`) t.getRandomValues(n);
  else for (let t = 0; t < e; t++) n[t] = Math.floor(256 * Math.random());
  return n;
}
var Yl = class {
  static newId() {
    let e = ``;
    for (; e.length < 20; ) {
      let t = Jl(40);
      for (let n = 0; n < t.length; ++n)
        e.length < 20 &&
          t[n] < 248 &&
          (e += `ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n] % 62));
    }
    return e;
  }
};
function U(e, t) {
  return e < t ? -1 : e > t ? 1 : 0;
}
function Xl(e, t) {
  let n = Math.min(e.length, t.length);
  for (let r = 0; r < n; r++) {
    let n = e.charAt(r),
      i = t.charAt(r);
    if (n !== i) return $l(n) === $l(i) ? U(n, i) : $l(n) ? 1 : -1;
  }
  return U(e.length, t.length);
}
var Zl = 55296,
  Ql = 57343;
function $l(e) {
  let t = e.charCodeAt(0);
  return t >= Zl && t <= Ql;
}
function eu(e, t, n) {
  return e.length === t.length && e.every((e, r) => n(e, t[r]));
}
var tu = `__name__`,
  nu = class e {
    constructor(e, t, n) {
      (t === void 0 ? (t = 0) : t > e.length && R(637, { offset: t, range: e.length }),
        n === void 0
          ? (n = e.length - t)
          : n > e.length - t && R(1746, { length: n, range: e.length - t }),
        (this.segments = e),
        (this.offset = t),
        (this.len = n));
    }
    get length() {
      return this.len;
    }
    isEqual(t) {
      return e.comparator(this, t) === 0;
    }
    child(t) {
      let n = this.segments.slice(this.offset, this.limit());
      return (
        t instanceof e
          ? t.forEach((e) => {
              n.push(e);
            })
          : n.push(t),
        this.construct(n)
      );
    }
    limit() {
      return this.offset + this.length;
    }
    popFirst(e) {
      return (
        (e = e === void 0 ? 1 : e),
        this.construct(this.segments, this.offset + e, this.length - e)
      );
    }
    popLast() {
      return this.construct(this.segments, this.offset, this.length - 1);
    }
    firstSegment() {
      return this.segments[this.offset];
    }
    lastSegment() {
      return this.get(this.length - 1);
    }
    get(e) {
      return this.segments[this.offset + e];
    }
    isEmpty() {
      return this.length === 0;
    }
    isPrefixOf(e) {
      if (e.length < this.length) return !1;
      for (let t = 0; t < this.length; t++) if (this.get(t) !== e.get(t)) return !1;
      return !0;
    }
    isImmediateParentOf(e) {
      if (this.length + 1 !== e.length) return !1;
      for (let t = 0; t < this.length; t++) if (this.get(t) !== e.get(t)) return !1;
      return !0;
    }
    forEach(e) {
      for (let t = this.offset, n = this.limit(); t < n; t++) e(this.segments[t]);
    }
    toArray() {
      return this.segments.slice(this.offset, this.limit());
    }
    static comparator(t, n) {
      let r = Math.min(t.length, n.length);
      for (let i = 0; i < r; i++) {
        let r = e.compareSegments(t.get(i), n.get(i));
        if (r !== 0) return r;
      }
      return U(t.length, n.length);
    }
    static compareSegments(t, n) {
      let r = e.isNumericId(t),
        i = e.isNumericId(n);
      return r && !i
        ? -1
        : !r && i
          ? 1
          : r && i
            ? e.extractNumericId(t).compare(e.extractNumericId(n))
            : Xl(t, n);
    }
    static isNumericId(e) {
      return e.startsWith(`__id`) && e.endsWith(`__`);
    }
    static extractNumericId(e) {
      return bl.fromString(e.substring(4, e.length - 2));
    }
  },
  ru = class e extends nu {
    construct(t, n, r) {
      return new e(t, n, r);
    }
    canonicalString() {
      return this.toArray().join(`/`);
    }
    toString() {
      return this.canonicalString();
    }
    toUriEncodedString() {
      return this.toArray().map(encodeURIComponent).join(`/`);
    }
    static fromString(...t) {
      let n = [];
      for (let e of t) {
        if (e.indexOf(`//`) >= 0)
          throw new H(
            V.INVALID_ARGUMENT,
            `Invalid segment (${e}). Paths must not contain // in them.`
          );
        n.push(...e.split(`/`).filter((e) => e.length > 0));
      }
      return new e(n);
    }
    static emptyPath() {
      return new e([]);
    }
  },
  iu = /^[_a-zA-Z][_a-zA-Z0-9]*$/,
  au = class e extends nu {
    construct(t, n, r) {
      return new e(t, n, r);
    }
    static isValidIdentifier(e) {
      return iu.test(e);
    }
    canonicalString() {
      return this.toArray()
        .map(
          (t) => (
            (t = t.replace(/\\/g, `\\\\`).replace(/`/g, "\\`")),
            e.isValidIdentifier(t) || (t = "`" + t + "`"),
            t
          )
        )
        .join(`.`);
    }
    toString() {
      return this.canonicalString();
    }
    isKeyField() {
      return this.length === 1 && this.get(0) === `__name__`;
    }
    static keyField() {
      return new e([tu]);
    }
    static fromServerFormat(t) {
      let n = [],
        r = ``,
        i = 0,
        a = () => {
          if (r.length === 0)
            throw new H(
              V.INVALID_ARGUMENT,
              `Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`
            );
          (n.push(r), (r = ``));
        },
        o = !1;
      for (; i < t.length; ) {
        let e = t[i];
        if (e === `\\`) {
          if (i + 1 === t.length)
            throw new H(V.INVALID_ARGUMENT, `Path has trailing escape character: ` + t);
          let e = t[i + 1];
          if (e !== `\\` && e !== `.` && e !== "`")
            throw new H(V.INVALID_ARGUMENT, `Path has invalid escape sequence: ` + t);
          ((r += e), (i += 2));
        } else e === "`" ? ((o = !o), i++) : e !== `.` || o ? ((r += e), i++) : (a(), i++);
      }
      if ((a(), o)) throw new H(V.INVALID_ARGUMENT, "Unterminated ` in path: " + t);
      return new e(n);
    }
    static emptyPath() {
      return new e([]);
    }
  },
  W = class e {
    constructor(e) {
      this.path = e;
    }
    static fromPath(t) {
      return new e(ru.fromString(t));
    }
    static fromName(t) {
      return new e(ru.fromString(t).popFirst(5));
    }
    static empty() {
      return new e(ru.emptyPath());
    }
    get collectionGroup() {
      return this.path.popLast().lastSegment();
    }
    hasCollectionId(e) {
      return this.path.length >= 2 && this.path.get(this.path.length - 2) === e;
    }
    getCollectionGroup() {
      return this.path.get(this.path.length - 2);
    }
    getCollectionPath() {
      return this.path.popLast();
    }
    isEqual(e) {
      return e !== null && ru.comparator(this.path, e.path) === 0;
    }
    toString() {
      return this.path.toString();
    }
    static comparator(e, t) {
      return ru.comparator(e.path, t.path);
    }
    static isDocumentKey(e) {
      return e.length % 2 == 0;
    }
    static fromSegments(t) {
      return new e(new ru(t.slice()));
    }
  };
function ou(e, t, n, r) {
  if (!0 === t && !0 === r)
    throw new H(V.INVALID_ARGUMENT, `${e} and ${n} cannot be used together.`);
}
function su(e) {
  return (
    typeof e == `object` &&
    !!e &&
    (Object.getPrototypeOf(e) === Object.prototype || Object.getPrototypeOf(e) === null)
  );
}
function cu(e) {
  if (e === void 0) return `undefined`;
  if (e === null) return `null`;
  if (typeof e == `string`)
    return (e.length > 20 && (e = `${e.substring(0, 20)}...`), JSON.stringify(e));
  if (typeof e == `number` || typeof e == `boolean`) return `` + e;
  if (typeof e == `object`) {
    if (e instanceof Array) return `an array`;
    {
      let t = (function (e) {
        return e.constructor ? e.constructor.name : null;
      })(e);
      return t ? `a custom ${t} object` : `an object`;
    }
  }
  return typeof e == `function` ? `a function` : R(12329, { type: typeof e });
}
function lu(e, t) {
  if ((`_delegate` in e && (e = e._delegate), !(e instanceof t))) {
    if (t.name === e.constructor.name)
      throw new H(
        V.INVALID_ARGUMENT,
        `Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`
      );
    {
      let n = cu(e);
      throw new H(V.INVALID_ARGUMENT, `Expected type '${t.name}', but it was: ${n}`);
    }
  }
  return e;
}
function G(e, t) {
  let n = { typeString: e };
  return (t && (n.value = t), n);
}
function uu(e, t) {
  if (!su(e)) throw new H(V.INVALID_ARGUMENT, `JSON must be an object`);
  let n;
  for (let r in t)
    if (t[r]) {
      let i = t[r].typeString,
        a = `value` in t[r] ? { value: t[r].value } : void 0;
      if (!(r in e)) {
        n = `JSON missing required field: '${r}'`;
        break;
      }
      let o = e[r];
      if (i && typeof o !== i) {
        n = `JSON field '${r}' must be a ${i}.`;
        break;
      }
      if (a !== void 0 && o !== a.value) {
        n = `Expected '${r}' field to equal '${a.value}'`;
        break;
      }
    }
  if (n) throw new H(V.INVALID_ARGUMENT, n);
  return !0;
}
var du = -62135596800,
  fu = 1e6,
  pu = class e {
    static now() {
      return e.fromMillis(Date.now());
    }
    static fromDate(t) {
      return e.fromMillis(t.getTime());
    }
    static fromMillis(t) {
      let n = Math.floor(t / 1e3);
      return new e(n, Math.floor((t - 1e3 * n) * fu));
    }
    constructor(e, t) {
      if (((this.seconds = e), (this.nanoseconds = t), t < 0 || t >= 1e9))
        throw new H(V.INVALID_ARGUMENT, `Timestamp nanoseconds out of range: ` + t);
      if (e < du || e >= 253402300800)
        throw new H(V.INVALID_ARGUMENT, `Timestamp seconds out of range: ` + e);
    }
    toDate() {
      return new Date(this.toMillis());
    }
    toMillis() {
      return 1e3 * this.seconds + this.nanoseconds / fu;
    }
    _compareTo(e) {
      return this.seconds === e.seconds
        ? U(this.nanoseconds, e.nanoseconds)
        : U(this.seconds, e.seconds);
    }
    isEqual(e) {
      return e.seconds === this.seconds && e.nanoseconds === this.nanoseconds;
    }
    toString() {
      return `Timestamp(seconds=` + this.seconds + `, nanoseconds=` + this.nanoseconds + `)`;
    }
    toJSON() {
      return { type: e._jsonSchemaVersion, seconds: this.seconds, nanoseconds: this.nanoseconds };
    }
    static fromJSON(t) {
      if (uu(t, e._jsonSchema)) return new e(t.seconds, t.nanoseconds);
    }
    valueOf() {
      let e = this.seconds - du;
      return String(e).padStart(12, `0`) + `.` + String(this.nanoseconds).padStart(9, `0`);
    }
  };
((pu._jsonSchemaVersion = `firestore/timestamp/1.0`),
  (pu._jsonSchema = {
    type: G(`string`, pu._jsonSchemaVersion),
    seconds: G(`number`),
    nanoseconds: G(`number`),
  }));
var K = class e {
    static fromTimestamp(t) {
      return new e(t);
    }
    static min() {
      return new e(new pu(0, 0));
    }
    static max() {
      return new e(new pu(253402300799, 999999999));
    }
    constructor(e) {
      this.timestamp = e;
    }
    compareTo(e) {
      return this.timestamp._compareTo(e.timestamp);
    }
    isEqual(e) {
      return this.timestamp.isEqual(e.timestamp);
    }
    toMicroseconds() {
      return 1e6 * this.timestamp.seconds + this.timestamp.nanoseconds / 1e3;
    }
    toString() {
      return `SnapshotVersion(` + this.timestamp.toString() + `)`;
    }
    toTimestamp() {
      return this.timestamp;
    }
  },
  mu = -1,
  hu = class {
    constructor(e, t, n, r) {
      ((this.indexId = e), (this.collectionGroup = t), (this.fields = n), (this.indexState = r));
    }
  };
hu.UNKNOWN_ID = -1;
function gu(e, t) {
  let n = e.toTimestamp().seconds,
    r = e.toTimestamp().nanoseconds + 1;
  return new vu(K.fromTimestamp(r === 1e9 ? new pu(n + 1, 0) : new pu(n, r)), W.empty(), t);
}
function _u(e) {
  return new vu(e.readTime, e.key, mu);
}
var vu = class e {
  constructor(e, t, n) {
    ((this.readTime = e), (this.documentKey = t), (this.largestBatchId = n));
  }
  static min() {
    return new e(K.min(), W.empty(), mu);
  }
  static max() {
    return new e(K.max(), W.empty(), mu);
  }
};
function yu(e, t) {
  let n = e.readTime.compareTo(t.readTime);
  return n === 0
    ? ((n = W.comparator(e.documentKey, t.documentKey)),
      n === 0 ? U(e.largestBatchId, t.largestBatchId) : n)
    : n;
}
var bu = class {
    constructor() {
      this.onCommittedListeners = [];
    }
    addOnCommittedListener(e) {
      this.onCommittedListeners.push(e);
    }
    raiseOnCommittedEvent() {
      this.onCommittedListeners.forEach((e) => e());
    }
  },
  q = class e {
    constructor(e) {
      ((this.nextCallback = null),
        (this.catchCallback = null),
        (this.result = void 0),
        (this.error = void 0),
        (this.isDone = !1),
        (this.callbackAttached = !1),
        e(
          (e) => {
            ((this.isDone = !0), (this.result = e), this.nextCallback && this.nextCallback(e));
          },
          (e) => {
            ((this.isDone = !0), (this.error = e), this.catchCallback && this.catchCallback(e));
          }
        ));
    }
    catch(e) {
      return this.next(void 0, e);
    }
    next(t, n) {
      return (
        this.callbackAttached && R(59440),
        (this.callbackAttached = !0),
        this.isDone
          ? this.error
            ? this.wrapFailure(n, this.error)
            : this.wrapSuccess(t, this.result)
          : new e((e, r) => {
              ((this.nextCallback = (n) => {
                this.wrapSuccess(t, n).next(e, r);
              }),
                (this.catchCallback = (t) => {
                  this.wrapFailure(n, t).next(e, r);
                }));
            })
      );
    }
    toPromise() {
      return new Promise((e, t) => {
        this.next(e, t);
      });
    }
    wrapUserFunction(t) {
      try {
        let n = t();
        return n instanceof e ? n : e.resolve(n);
      } catch (t) {
        return e.reject(t);
      }
    }
    wrapSuccess(t, n) {
      return t ? this.wrapUserFunction(() => t(n)) : e.resolve(n);
    }
    wrapFailure(t, n) {
      return t ? this.wrapUserFunction(() => t(n)) : e.reject(n);
    }
    static resolve(t) {
      return new e((e, n) => {
        e(t);
      });
    }
    static reject(t) {
      return new e((e, n) => {
        n(t);
      });
    }
    static waitFor(t) {
      return new e((e, n) => {
        let r = 0,
          i = 0,
          a = !1;
        (t.forEach((t) => {
          (++r,
            t.next(
              () => {
                (++i, a && i === r && e());
              },
              (e) => n(e)
            ));
        }),
          (a = !0),
          i === r && e());
      });
    }
    static or(t) {
      let n = e.resolve(!1);
      for (let r of t) n = n.next((t) => (t ? e.resolve(t) : r()));
      return n;
    }
    static forEach(e, t) {
      let n = [];
      return (
        e.forEach((e, r) => {
          n.push(t.call(this, e, r));
        }),
        this.waitFor(n)
      );
    }
    static mapArray(t, n) {
      return new e((e, r) => {
        let i = t.length,
          a = Array(i),
          o = 0;
        for (let s = 0; s < i; s++) {
          let c = s;
          n(t[c]).next(
            (t) => {
              ((a[c] = t), ++o, o === i && e(a));
            },
            (e) => r(e)
          );
        }
      });
    }
    static doWhile(t, n) {
      return new e((e, r) => {
        let i = () => {
          !0 === t()
            ? n().next(() => {
                i();
              }, r)
            : e();
        };
        i();
      });
    }
  };
function xu(e) {
  let t = e.match(/Android ([\d.]+)/i),
    n = t ? t[1].split(`.`).slice(0, 2).join(`.`) : `-1`;
  return Number(n);
}
function Su(e) {
  return e.name === `IndexedDbTransactionError`;
}
var Cu = class {
  constructor(e, t) {
    ((this.previousValue = e),
      t &&
        ((t.sequenceNumberHandler = (e) => this.ae(e)),
        (this.ue = (e) => t.writeSequenceNumber(e))));
  }
  ae(e) {
    return ((this.previousValue = Math.max(e, this.previousValue)), this.previousValue);
  }
  next() {
    let e = ++this.previousValue;
    return (this.ue && this.ue(e), e);
  }
};
Cu.ce = -1;
var wu = -1;
function Tu(e) {
  return e == null;
}
function Eu(e) {
  return e === 0 && 1 / e == -1 / 0;
}
function Du(e) {
  let t = 0;
  for (let n in e) Object.prototype.hasOwnProperty.call(e, n) && t++;
  return t;
}
function Ou(e, t) {
  for (let n in e) Object.prototype.hasOwnProperty.call(e, n) && t(n, e[n]);
}
function ku(e) {
  for (let t in e) if (Object.prototype.hasOwnProperty.call(e, t)) return !1;
  return !0;
}
var Au = class e {
    constructor(e, t) {
      ((this.comparator = e), (this.root = t || Mu.EMPTY));
    }
    insert(t, n) {
      return new e(
        this.comparator,
        this.root.insert(t, n, this.comparator).copy(null, null, Mu.BLACK, null, null)
      );
    }
    remove(t) {
      return new e(
        this.comparator,
        this.root.remove(t, this.comparator).copy(null, null, Mu.BLACK, null, null)
      );
    }
    get(e) {
      let t = this.root;
      for (; !t.isEmpty(); ) {
        let n = this.comparator(e, t.key);
        if (n === 0) return t.value;
        n < 0 ? (t = t.left) : n > 0 && (t = t.right);
      }
      return null;
    }
    indexOf(e) {
      let t = 0,
        n = this.root;
      for (; !n.isEmpty(); ) {
        let r = this.comparator(e, n.key);
        if (r === 0) return t + n.left.size;
        r < 0 ? (n = n.left) : ((t += n.left.size + 1), (n = n.right));
      }
      return -1;
    }
    isEmpty() {
      return this.root.isEmpty();
    }
    get size() {
      return this.root.size;
    }
    minKey() {
      return this.root.minKey();
    }
    maxKey() {
      return this.root.maxKey();
    }
    inorderTraversal(e) {
      return this.root.inorderTraversal(e);
    }
    forEach(e) {
      this.inorderTraversal((t, n) => (e(t, n), !1));
    }
    toString() {
      let e = [];
      return (this.inorderTraversal((t, n) => (e.push(`${t}:${n}`), !1)), `{${e.join(`, `)}}`);
    }
    reverseTraversal(e) {
      return this.root.reverseTraversal(e);
    }
    getIterator() {
      return new ju(this.root, null, this.comparator, !1);
    }
    getIteratorFrom(e) {
      return new ju(this.root, e, this.comparator, !1);
    }
    getReverseIterator() {
      return new ju(this.root, null, this.comparator, !0);
    }
    getReverseIteratorFrom(e) {
      return new ju(this.root, e, this.comparator, !0);
    }
  },
  ju = class {
    constructor(e, t, n, r) {
      ((this.isReverse = r), (this.nodeStack = []));
      let i = 1;
      for (; !e.isEmpty(); )
        if (((i = t ? n(e.key, t) : 1), t && r && (i *= -1), i < 0))
          e = this.isReverse ? e.left : e.right;
        else {
          if (i === 0) {
            this.nodeStack.push(e);
            break;
          }
          (this.nodeStack.push(e), (e = this.isReverse ? e.right : e.left));
        }
    }
    getNext() {
      let e = this.nodeStack.pop(),
        t = { key: e.key, value: e.value };
      if (this.isReverse) for (e = e.left; !e.isEmpty(); ) (this.nodeStack.push(e), (e = e.right));
      else for (e = e.right; !e.isEmpty(); ) (this.nodeStack.push(e), (e = e.left));
      return t;
    }
    hasNext() {
      return this.nodeStack.length > 0;
    }
    peek() {
      if (this.nodeStack.length === 0) return null;
      let e = this.nodeStack[this.nodeStack.length - 1];
      return { key: e.key, value: e.value };
    }
  },
  Mu = class e {
    constructor(t, n, r, i, a) {
      ((this.key = t),
        (this.value = n),
        (this.color = r ?? e.RED),
        (this.left = i ?? e.EMPTY),
        (this.right = a ?? e.EMPTY),
        (this.size = this.left.size + 1 + this.right.size));
    }
    copy(t, n, r, i, a) {
      return new e(
        t ?? this.key,
        n ?? this.value,
        r ?? this.color,
        i ?? this.left,
        a ?? this.right
      );
    }
    isEmpty() {
      return !1;
    }
    inorderTraversal(e) {
      return (
        this.left.inorderTraversal(e) || e(this.key, this.value) || this.right.inorderTraversal(e)
      );
    }
    reverseTraversal(e) {
      return (
        this.right.reverseTraversal(e) || e(this.key, this.value) || this.left.reverseTraversal(e)
      );
    }
    min() {
      return this.left.isEmpty() ? this : this.left.min();
    }
    minKey() {
      return this.min().key;
    }
    maxKey() {
      return this.right.isEmpty() ? this.key : this.right.maxKey();
    }
    insert(e, t, n) {
      let r = this,
        i = n(e, r.key);
      return (
        (r =
          i < 0
            ? r.copy(null, null, null, r.left.insert(e, t, n), null)
            : i === 0
              ? r.copy(null, t, null, null, null)
              : r.copy(null, null, null, null, r.right.insert(e, t, n))),
        r.fixUp()
      );
    }
    removeMin() {
      if (this.left.isEmpty()) return e.EMPTY;
      let t = this;
      return (
        t.left.isRed() || t.left.left.isRed() || (t = t.moveRedLeft()),
        (t = t.copy(null, null, null, t.left.removeMin(), null)),
        t.fixUp()
      );
    }
    remove(t, n) {
      let r,
        i = this;
      if (n(t, i.key) < 0)
        (i.left.isEmpty() || i.left.isRed() || i.left.left.isRed() || (i = i.moveRedLeft()),
          (i = i.copy(null, null, null, i.left.remove(t, n), null)));
      else {
        if (
          (i.left.isRed() && (i = i.rotateRight()),
          i.right.isEmpty() || i.right.isRed() || i.right.left.isRed() || (i = i.moveRedRight()),
          n(t, i.key) === 0)
        ) {
          if (i.right.isEmpty()) return e.EMPTY;
          ((r = i.right.min()), (i = i.copy(r.key, r.value, null, null, i.right.removeMin())));
        }
        i = i.copy(null, null, null, null, i.right.remove(t, n));
      }
      return i.fixUp();
    }
    isRed() {
      return this.color;
    }
    fixUp() {
      let e = this;
      return (
        e.right.isRed() && !e.left.isRed() && (e = e.rotateLeft()),
        e.left.isRed() && e.left.left.isRed() && (e = e.rotateRight()),
        e.left.isRed() && e.right.isRed() && (e = e.colorFlip()),
        e
      );
    }
    moveRedLeft() {
      let e = this.colorFlip();
      return (
        e.right.left.isRed() &&
          ((e = e.copy(null, null, null, null, e.right.rotateRight())),
          (e = e.rotateLeft()),
          (e = e.colorFlip())),
        e
      );
    }
    moveRedRight() {
      let e = this.colorFlip();
      return (e.left.left.isRed() && ((e = e.rotateRight()), (e = e.colorFlip())), e);
    }
    rotateLeft() {
      let t = this.copy(null, null, e.RED, null, this.right.left);
      return this.right.copy(null, null, this.color, t, null);
    }
    rotateRight() {
      let t = this.copy(null, null, e.RED, this.left.right, null);
      return this.left.copy(null, null, this.color, null, t);
    }
    colorFlip() {
      let e = this.left.copy(null, null, !this.left.color, null, null),
        t = this.right.copy(null, null, !this.right.color, null, null);
      return this.copy(null, null, !this.color, e, t);
    }
    checkMaxDepth() {
      return 2 ** this.check() <= this.size + 1;
    }
    check() {
      if (this.isRed() && this.left.isRed()) throw R(43730, { key: this.key, value: this.value });
      if (this.right.isRed()) throw R(14113, { key: this.key, value: this.value });
      let e = this.left.check();
      if (e !== this.right.check()) throw R(27949);
      return e + (this.isRed() ? 0 : 1);
    }
  };
((Mu.EMPTY = null),
  (Mu.RED = !0),
  (Mu.BLACK = !1),
  (Mu.EMPTY = new (class {
    constructor() {
      this.size = 0;
    }
    get key() {
      throw R(57766);
    }
    get value() {
      throw R(16141);
    }
    get color() {
      throw R(16727);
    }
    get left() {
      throw R(29726);
    }
    get right() {
      throw R(36894);
    }
    copy(e, t, n, r, i) {
      return this;
    }
    insert(e, t, n) {
      return new Mu(e, t);
    }
    remove(e, t) {
      return this;
    }
    isEmpty() {
      return !0;
    }
    inorderTraversal(e) {
      return !1;
    }
    reverseTraversal(e) {
      return !1;
    }
    minKey() {
      return null;
    }
    maxKey() {
      return null;
    }
    isRed() {
      return !1;
    }
    checkMaxDepth() {
      return !0;
    }
    check() {
      return 0;
    }
  })()));
var Nu = class e {
    constructor(e) {
      ((this.comparator = e), (this.data = new Au(this.comparator)));
    }
    has(e) {
      return this.data.get(e) !== null;
    }
    first() {
      return this.data.minKey();
    }
    last() {
      return this.data.maxKey();
    }
    get size() {
      return this.data.size;
    }
    indexOf(e) {
      return this.data.indexOf(e);
    }
    forEach(e) {
      this.data.inorderTraversal((t, n) => (e(t), !1));
    }
    forEachInRange(e, t) {
      let n = this.data.getIteratorFrom(e[0]);
      for (; n.hasNext(); ) {
        let r = n.getNext();
        if (this.comparator(r.key, e[1]) >= 0) return;
        t(r.key);
      }
    }
    forEachWhile(e, t) {
      let n;
      for (n = t === void 0 ? this.data.getIterator() : this.data.getIteratorFrom(t); n.hasNext(); )
        if (!e(n.getNext().key)) return;
    }
    firstAfterOrEqual(e) {
      let t = this.data.getIteratorFrom(e);
      return t.hasNext() ? t.getNext().key : null;
    }
    getIterator() {
      return new Pu(this.data.getIterator());
    }
    getIteratorFrom(e) {
      return new Pu(this.data.getIteratorFrom(e));
    }
    add(e) {
      return this.copy(this.data.remove(e).insert(e, !0));
    }
    delete(e) {
      return this.has(e) ? this.copy(this.data.remove(e)) : this;
    }
    isEmpty() {
      return this.data.isEmpty();
    }
    unionWith(e) {
      let t = this;
      return (
        t.size < e.size && ((t = e), (e = this)),
        e.forEach((e) => {
          t = t.add(e);
        }),
        t
      );
    }
    isEqual(t) {
      if (!(t instanceof e) || this.size !== t.size) return !1;
      let n = this.data.getIterator(),
        r = t.data.getIterator();
      for (; n.hasNext(); ) {
        let e = n.getNext().key,
          t = r.getNext().key;
        if (this.comparator(e, t) !== 0) return !1;
      }
      return !0;
    }
    toArray() {
      let e = [];
      return (
        this.forEach((t) => {
          e.push(t);
        }),
        e
      );
    }
    toString() {
      let e = [];
      return (this.forEach((t) => e.push(t)), `SortedSet(` + e.toString() + `)`);
    }
    copy(t) {
      let n = new e(this.comparator);
      return ((n.data = t), n);
    }
  },
  Pu = class {
    constructor(e) {
      this.iter = e;
    }
    getNext() {
      return this.iter.getNext().key;
    }
    hasNext() {
      return this.iter.hasNext();
    }
  },
  Fu = class e {
    constructor(e) {
      ((this.fields = e), e.sort(au.comparator));
    }
    static empty() {
      return new e([]);
    }
    unionWith(t) {
      let n = new Nu(au.comparator);
      for (let e of this.fields) n = n.add(e);
      for (let e of t) n = n.add(e);
      return new e(n.toArray());
    }
    covers(e) {
      for (let t of this.fields) if (t.isPrefixOf(e)) return !0;
      return !1;
    }
    isEqual(e) {
      return eu(this.fields, e.fields, (e, t) => e.isEqual(t));
    }
  },
  Iu = class extends Error {
    constructor() {
      (super(...arguments), (this.name = `Base64DecodeError`));
    }
  },
  Lu = class e {
    constructor(e) {
      this.binaryString = e;
    }
    static fromBase64String(t) {
      return new e(
        (function (e) {
          try {
            return atob(e);
          } catch (e) {
            throw typeof DOMException < `u` && e instanceof DOMException
              ? new Iu(`Invalid base64 string: ` + e)
              : e;
          }
        })(t)
      );
    }
    static fromUint8Array(t) {
      return new e(
        (function (e) {
          let t = ``;
          for (let n = 0; n < e.length; ++n) t += String.fromCharCode(e[n]);
          return t;
        })(t)
      );
    }
    [Symbol.iterator]() {
      let e = 0;
      return {
        next: () =>
          e < this.binaryString.length
            ? { value: this.binaryString.charCodeAt(e++), done: !1 }
            : { value: void 0, done: !0 },
      };
    }
    toBase64() {
      return (function (e) {
        return btoa(e);
      })(this.binaryString);
    }
    toUint8Array() {
      return (function (e) {
        let t = new Uint8Array(e.length);
        for (let n = 0; n < e.length; n++) t[n] = e.charCodeAt(n);
        return t;
      })(this.binaryString);
    }
    approximateByteSize() {
      return 2 * this.binaryString.length;
    }
    compareTo(e) {
      return U(this.binaryString, e.binaryString);
    }
    isEqual(e) {
      return this.binaryString === e.binaryString;
    }
  };
Lu.EMPTY_BYTE_STRING = new Lu(``);
var Ru = new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
function zu(e) {
  if ((z(!!e, 39018), typeof e == `string`)) {
    let t = 0,
      n = Ru.exec(e);
    if ((z(!!n, 46558, { timestamp: e }), n[1])) {
      let e = n[1];
      ((e = (e + `000000000`).substr(0, 9)), (t = Number(e)));
    }
    let r = new Date(e);
    return { seconds: Math.floor(r.getTime() / 1e3), nanos: t };
  }
  return { seconds: J(e.seconds), nanos: J(e.nanos) };
}
function J(e) {
  return typeof e == `number` ? e : typeof e == `string` ? Number(e) : 0;
}
function Bu(e) {
  return typeof e == `string` ? Lu.fromBase64String(e) : Lu.fromUint8Array(e);
}
var Vu = `server_timestamp`,
  Hu = `__type__`,
  Uu = `__previous_value__`,
  Wu = `__local_write_time__`;
function Gu(e) {
  return (e?.mapValue?.fields || {})[Hu]?.stringValue === Vu;
}
function Ku(e) {
  let t = e.mapValue.fields[Uu];
  return Gu(t) ? Ku(t) : t;
}
function qu(e) {
  let t = zu(e.mapValue.fields[Wu].timestampValue);
  return new pu(t.seconds, t.nanos);
}
var Ju = `(default)`,
  Yu = class e {
    constructor(e, t) {
      ((this.projectId = e), (this.database = t || Ju));
    }
    static empty() {
      return new e(``, ``);
    }
    get isDefaultDatabase() {
      return this.database === Ju;
    }
    isEqual(t) {
      return t instanceof e && t.projectId === this.projectId && t.database === this.database;
    }
  };
function Xu(e, t) {
  if (!Object.prototype.hasOwnProperty.apply(e.options, [`projectId`]))
    throw new H(V.INVALID_ARGUMENT, `"projectId" not provided in firebase.initializeApp.`);
  return new Yu(e.options.projectId, t);
}
var Zu = `__type__`,
  Qu = `__max__`,
  $u = { mapValue: { fields: { __type__: { stringValue: Qu } } } },
  ed = `__vector__`,
  td = `value`;
function nd(e) {
  return `nullValue` in e
    ? 0
    : `booleanValue` in e
      ? 1
      : `integerValue` in e || `doubleValue` in e
        ? 2
        : `timestampValue` in e
          ? 3
          : `stringValue` in e
            ? 5
            : `bytesValue` in e
              ? 6
              : `referenceValue` in e
                ? 7
                : `geoPointValue` in e
                  ? 8
                  : `arrayValue` in e
                    ? 9
                    : `mapValue` in e
                      ? Gu(e)
                        ? 4
                        : hd(e)
                          ? 9007199254740991
                          : pd(e)
                            ? 10
                            : 11
                      : R(28295, { value: e });
}
function rd(e, t) {
  if (e === t) return !0;
  let n = nd(e);
  if (n !== nd(t)) return !1;
  switch (n) {
    case 0:
    case 9007199254740991:
      return !0;
    case 1:
      return e.booleanValue === t.booleanValue;
    case 4:
      return qu(e).isEqual(qu(t));
    case 3:
      return (function (e, t) {
        if (
          typeof e.timestampValue == `string` &&
          typeof t.timestampValue == `string` &&
          e.timestampValue.length === t.timestampValue.length
        )
          return e.timestampValue === t.timestampValue;
        let n = zu(e.timestampValue),
          r = zu(t.timestampValue);
        return n.seconds === r.seconds && n.nanos === r.nanos;
      })(e, t);
    case 5:
      return e.stringValue === t.stringValue;
    case 6:
      return (function (e, t) {
        return Bu(e.bytesValue).isEqual(Bu(t.bytesValue));
      })(e, t);
    case 7:
      return e.referenceValue === t.referenceValue;
    case 8:
      return (function (e, t) {
        return (
          J(e.geoPointValue.latitude) === J(t.geoPointValue.latitude) &&
          J(e.geoPointValue.longitude) === J(t.geoPointValue.longitude)
        );
      })(e, t);
    case 2:
      return (function (e, t) {
        if (`integerValue` in e && `integerValue` in t)
          return J(e.integerValue) === J(t.integerValue);
        if (`doubleValue` in e && `doubleValue` in t) {
          let n = J(e.doubleValue),
            r = J(t.doubleValue);
          return n === r ? Eu(n) === Eu(r) : isNaN(n) && isNaN(r);
        }
        return !1;
      })(e, t);
    case 9:
      return eu(e.arrayValue.values || [], t.arrayValue.values || [], rd);
    case 10:
    case 11:
      return (function (e, t) {
        let n = e.mapValue.fields || {},
          r = t.mapValue.fields || {};
        if (Du(n) !== Du(r)) return !1;
        for (let e in n) if (n.hasOwnProperty(e) && (r[e] === void 0 || !rd(n[e], r[e]))) return !1;
        return !0;
      })(e, t);
    default:
      return R(52216, { left: e });
  }
}
function id(e, t) {
  return (e.values || []).find((e) => rd(e, t)) !== void 0;
}
function ad(e, t) {
  if (e === t) return 0;
  let n = nd(e),
    r = nd(t);
  if (n !== r) return U(n, r);
  switch (n) {
    case 0:
    case 9007199254740991:
      return 0;
    case 1:
      return U(e.booleanValue, t.booleanValue);
    case 2:
      return (function (e, t) {
        let n = J(e.integerValue || e.doubleValue),
          r = J(t.integerValue || t.doubleValue);
        return n < r ? -1 : n > r ? 1 : n === r ? 0 : isNaN(n) ? (isNaN(r) ? 0 : -1) : 1;
      })(e, t);
    case 3:
      return od(e.timestampValue, t.timestampValue);
    case 4:
      return od(qu(e), qu(t));
    case 5:
      return Xl(e.stringValue, t.stringValue);
    case 6:
      return (function (e, t) {
        let n = Bu(e),
          r = Bu(t);
        return n.compareTo(r);
      })(e.bytesValue, t.bytesValue);
    case 7:
      return (function (e, t) {
        let n = e.split(`/`),
          r = t.split(`/`);
        for (let e = 0; e < n.length && e < r.length; e++) {
          let t = U(n[e], r[e]);
          if (t !== 0) return t;
        }
        return U(n.length, r.length);
      })(e.referenceValue, t.referenceValue);
    case 8:
      return (function (e, t) {
        let n = U(J(e.latitude), J(t.latitude));
        return n === 0 ? U(J(e.longitude), J(t.longitude)) : n;
      })(e.geoPointValue, t.geoPointValue);
    case 9:
      return sd(e.arrayValue, t.arrayValue);
    case 10:
      return (function (e, t) {
        let n = e.fields || {},
          r = t.fields || {},
          i = n[td]?.arrayValue,
          a = r[td]?.arrayValue,
          o = U(i?.values?.length || 0, a?.values?.length || 0);
        return o === 0 ? sd(i, a) : o;
      })(e.mapValue, t.mapValue);
    case 11:
      return (function (e, t) {
        if (e === $u.mapValue && t === $u.mapValue) return 0;
        if (e === $u.mapValue) return 1;
        if (t === $u.mapValue) return -1;
        let n = e.fields || {},
          r = Object.keys(n),
          i = t.fields || {},
          a = Object.keys(i);
        (r.sort(), a.sort());
        for (let e = 0; e < r.length && e < a.length; ++e) {
          let t = Xl(r[e], a[e]);
          if (t !== 0) return t;
          let o = ad(n[r[e]], i[a[e]]);
          if (o !== 0) return o;
        }
        return U(r.length, a.length);
      })(e.mapValue, t.mapValue);
    default:
      throw R(23264, { he: n });
  }
}
function od(e, t) {
  if (typeof e == `string` && typeof t == `string` && e.length === t.length) return U(e, t);
  let n = zu(e),
    r = zu(t),
    i = U(n.seconds, r.seconds);
  return i === 0 ? U(n.nanos, r.nanos) : i;
}
function sd(e, t) {
  let n = e.values || [],
    r = t.values || [];
  for (let e = 0; e < n.length && e < r.length; ++e) {
    let t = ad(n[e], r[e]);
    if (t) return t;
  }
  return U(n.length, r.length);
}
function cd(e) {
  return ld(e);
}
function ld(e) {
  return `nullValue` in e
    ? `null`
    : `booleanValue` in e
      ? `` + e.booleanValue
      : `integerValue` in e
        ? `` + e.integerValue
        : `doubleValue` in e
          ? `` + e.doubleValue
          : `timestampValue` in e
            ? (function (e) {
                let t = zu(e);
                return `time(${t.seconds},${t.nanos})`;
              })(e.timestampValue)
            : `stringValue` in e
              ? e.stringValue
              : `bytesValue` in e
                ? (function (e) {
                    return Bu(e).toBase64();
                  })(e.bytesValue)
                : `referenceValue` in e
                  ? (function (e) {
                      return W.fromName(e).toString();
                    })(e.referenceValue)
                  : `geoPointValue` in e
                    ? (function (e) {
                        return `geo(${e.latitude},${e.longitude})`;
                      })(e.geoPointValue)
                    : `arrayValue` in e
                      ? (function (e) {
                          let t = `[`,
                            n = !0;
                          for (let r of e.values || []) (n ? (n = !1) : (t += `,`), (t += ld(r)));
                          return t + `]`;
                        })(e.arrayValue)
                      : `mapValue` in e
                        ? (function (e) {
                            let t = Object.keys(e.fields || {}).sort(),
                              n = `{`,
                              r = !0;
                            for (let i of t)
                              (r ? (r = !1) : (n += `,`), (n += `${i}:${ld(e.fields[i])}`));
                            return n + `}`;
                          })(e.mapValue)
                        : R(61005, { value: e });
}
function ud(e) {
  return !!e && `integerValue` in e;
}
function dd(e) {
  return !!e && `arrayValue` in e;
}
function fd(e) {
  return !!e && `mapValue` in e;
}
function pd(e) {
  return (e?.mapValue?.fields || {})[Zu]?.stringValue === ed;
}
function md(e) {
  if (e.geoPointValue) return { geoPointValue: { ...e.geoPointValue } };
  if (e.timestampValue && typeof e.timestampValue == `object`)
    return { timestampValue: { ...e.timestampValue } };
  if (e.mapValue) {
    let t = { mapValue: { fields: {} } };
    return (Ou(e.mapValue.fields, (e, n) => (t.mapValue.fields[e] = md(n))), t);
  }
  if (e.arrayValue) {
    let t = { arrayValue: { values: [] } };
    for (let n = 0; n < (e.arrayValue.values || []).length; ++n)
      t.arrayValue.values[n] = md(e.arrayValue.values[n]);
    return t;
  }
  return { ...e };
}
function hd(e) {
  return (((e.mapValue || {}).fields || {}).__type__ || {}).stringValue === Qu;
}
var gd = class e {
    constructor(e) {
      this.value = e;
    }
    static empty() {
      return new e({ mapValue: {} });
    }
    field(e) {
      if (e.isEmpty()) return this.value;
      {
        let t = this.value;
        for (let n = 0; n < e.length - 1; ++n)
          if (((t = (t.mapValue.fields || {})[e.get(n)]), !fd(t))) return null;
        return ((t = (t.mapValue.fields || {})[e.lastSegment()]), t || null);
      }
    }
    set(e, t) {
      this.getFieldsMap(e.popLast())[e.lastSegment()] = md(t);
    }
    setAll(e) {
      let t = au.emptyPath(),
        n = {},
        r = [];
      e.forEach((e, i) => {
        if (!t.isImmediateParentOf(i)) {
          let e = this.getFieldsMap(t);
          (this.applyChanges(e, n, r), (n = {}), (r = []), (t = i.popLast()));
        }
        e ? (n[i.lastSegment()] = md(e)) : r.push(i.lastSegment());
      });
      let i = this.getFieldsMap(t);
      this.applyChanges(i, n, r);
    }
    delete(e) {
      let t = this.field(e.popLast());
      fd(t) && t.mapValue.fields && delete t.mapValue.fields[e.lastSegment()];
    }
    isEqual(e) {
      return rd(this.value, e.value);
    }
    getFieldsMap(e) {
      let t = this.value;
      t.mapValue.fields || (t.mapValue = { fields: {} });
      for (let n = 0; n < e.length; ++n) {
        let r = t.mapValue.fields[e.get(n)];
        ((fd(r) && r.mapValue.fields) ||
          ((r = { mapValue: { fields: {} } }), (t.mapValue.fields[e.get(n)] = r)),
          (t = r));
      }
      return t.mapValue.fields;
    }
    applyChanges(e, t, n) {
      Ou(t, (t, n) => (e[t] = n));
      for (let t of n) delete e[t];
    }
    clone() {
      return new e(md(this.value));
    }
  },
  _d = class e {
    constructor(e, t, n, r, i, a, o) {
      ((this.key = e),
        (this.documentType = t),
        (this.version = n),
        (this.readTime = r),
        (this.createTime = i),
        (this.data = a),
        (this.documentState = o));
    }
    static newInvalidDocument(t) {
      return new e(t, 0, K.min(), K.min(), K.min(), gd.empty(), 0);
    }
    static newFoundDocument(t, n, r, i) {
      return new e(t, 1, n, K.min(), r, i, 0);
    }
    static newNoDocument(t, n) {
      return new e(t, 2, n, K.min(), K.min(), gd.empty(), 0);
    }
    static newUnknownDocument(t, n) {
      return new e(t, 3, n, K.min(), K.min(), gd.empty(), 2);
    }
    convertToFoundDocument(e, t) {
      return (
        !this.createTime.isEqual(K.min()) ||
          (this.documentType !== 2 && this.documentType !== 0) ||
          (this.createTime = e),
        (this.version = e),
        (this.documentType = 1),
        (this.data = t),
        (this.documentState = 0),
        this
      );
    }
    convertToNoDocument(e) {
      return (
        (this.version = e),
        (this.documentType = 2),
        (this.data = gd.empty()),
        (this.documentState = 0),
        this
      );
    }
    convertToUnknownDocument(e) {
      return (
        (this.version = e),
        (this.documentType = 3),
        (this.data = gd.empty()),
        (this.documentState = 2),
        this
      );
    }
    setHasCommittedMutations() {
      return ((this.documentState = 2), this);
    }
    setHasLocalMutations() {
      return ((this.documentState = 1), (this.version = K.min()), this);
    }
    setReadTime(e) {
      return ((this.readTime = e), this);
    }
    get hasLocalMutations() {
      return this.documentState === 1;
    }
    get hasCommittedMutations() {
      return this.documentState === 2;
    }
    get hasPendingWrites() {
      return this.hasLocalMutations || this.hasCommittedMutations;
    }
    isValidDocument() {
      return this.documentType !== 0;
    }
    isFoundDocument() {
      return this.documentType === 1;
    }
    isNoDocument() {
      return this.documentType === 2;
    }
    isUnknownDocument() {
      return this.documentType === 3;
    }
    isEqual(t) {
      return (
        t instanceof e &&
        this.key.isEqual(t.key) &&
        this.version.isEqual(t.version) &&
        this.documentType === t.documentType &&
        this.documentState === t.documentState &&
        this.data.isEqual(t.data)
      );
    }
    mutableCopy() {
      return new e(
        this.key,
        this.documentType,
        this.version,
        this.readTime,
        this.createTime,
        this.data.clone(),
        this.documentState
      );
    }
    toString() {
      return `Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`;
    }
  },
  vd = class {
    constructor(e, t) {
      ((this.position = e), (this.inclusive = t));
    }
  };
function yd(e, t, n) {
  let r = 0;
  for (let i = 0; i < e.position.length; i++) {
    let a = t[i],
      o = e.position[i];
    if (
      ((r = a.field.isKeyField()
        ? W.comparator(W.fromName(o.referenceValue), n.key)
        : ad(o, n.data.field(a.field))),
      a.dir === `desc` && (r *= -1),
      r !== 0)
    )
      break;
  }
  return r;
}
function bd(e, t) {
  if (e === null) return t === null;
  if (t === null || e.inclusive !== t.inclusive || e.position.length !== t.position.length)
    return !1;
  for (let n = 0; n < e.position.length; n++) if (!rd(e.position[n], t.position[n])) return !1;
  return !0;
}
var xd = class {
  constructor(e, t = `asc`) {
    ((this.field = e), (this.dir = t));
  }
};
function Sd(e, t) {
  return e.dir === t.dir && e.field.isEqual(t.field);
}
var Cd = class {},
  Y = class e extends Cd {
    constructor(e, t, n) {
      (super(), (this.field = e), (this.op = t), (this.value = n));
    }
    static create(t, n, r) {
      return t.isKeyField()
        ? n === `in` || n === `not-in`
          ? this.createKeyFieldInFilter(t, n, r)
          : new jd(t, n, r)
        : n === `array-contains`
          ? new Fd(t, r)
          : n === `in`
            ? new Id(t, r)
            : n === `not-in`
              ? new Ld(t, r)
              : n === `array-contains-any`
                ? new Rd(t, r)
                : new e(t, n, r);
    }
    static createKeyFieldInFilter(e, t, n) {
      return t === `in` ? new Md(e, n) : new Nd(e, n);
    }
    matches(e) {
      let t = e.data.field(this.field);
      return this.op === `!=`
        ? t !== null && t.nullValue === void 0 && this.matchesComparison(ad(t, this.value))
        : t !== null && nd(this.value) === nd(t) && this.matchesComparison(ad(t, this.value));
    }
    matchesComparison(e) {
      switch (this.op) {
        case `<`:
          return e < 0;
        case `<=`:
          return e <= 0;
        case `==`:
          return e === 0;
        case `!=`:
          return e !== 0;
        case `>`:
          return e > 0;
        case `>=`:
          return e >= 0;
        default:
          return R(47266, { operator: this.op });
      }
    }
    isInequality() {
      return [`<`, `<=`, `>`, `>=`, `!=`, `not-in`].indexOf(this.op) >= 0;
    }
    getFlattenedFilters() {
      return [this];
    }
    getFilters() {
      return [this];
    }
  },
  wd = class e extends Cd {
    constructor(e, t) {
      (super(), (this.filters = e), (this.op = t), (this.Pe = null));
    }
    static create(t, n) {
      return new e(t, n);
    }
    matches(e) {
      return Td(this)
        ? this.filters.find((t) => !t.matches(e)) === void 0
        : this.filters.find((t) => t.matches(e)) !== void 0;
    }
    getFlattenedFilters() {
      return (
        this.Pe !== null ||
          (this.Pe = this.filters.reduce((e, t) => e.concat(t.getFlattenedFilters()), [])),
        this.Pe
      );
    }
    getFilters() {
      return Object.assign([], this.filters);
    }
  };
function Td(e) {
  return e.op === `and`;
}
function Ed(e) {
  return Dd(e) && Td(e);
}
function Dd(e) {
  for (let t of e.filters) if (t instanceof wd) return !1;
  return !0;
}
function Od(e) {
  if (e instanceof Y) return e.field.canonicalString() + e.op.toString() + cd(e.value);
  if (Ed(e)) return e.filters.map((e) => Od(e)).join(`,`);
  {
    let t = e.filters.map((e) => Od(e)).join(`,`);
    return `${e.op}(${t})`;
  }
}
function kd(e, t) {
  return e instanceof Y
    ? (function (e, t) {
        return t instanceof Y && e.op === t.op && e.field.isEqual(t.field) && rd(e.value, t.value);
      })(e, t)
    : e instanceof wd
      ? (function (e, t) {
          return t instanceof wd && e.op === t.op && e.filters.length === t.filters.length
            ? e.filters.reduce((e, n, r) => e && kd(n, t.filters[r]), !0)
            : !1;
        })(e, t)
      : void R(19439);
}
function Ad(e) {
  return e instanceof Y
    ? (function (e) {
        return `${e.field.canonicalString()} ${e.op} ${cd(e.value)}`;
      })(e)
    : e instanceof wd
      ? (function (e) {
          return e.op.toString() + ` {` + e.getFilters().map(Ad).join(` ,`) + `}`;
        })(e)
      : `Filter`;
}
var jd = class extends Y {
    constructor(e, t, n) {
      (super(e, t, n), (this.key = W.fromName(n.referenceValue)));
    }
    matches(e) {
      let t = W.comparator(e.key, this.key);
      return this.matchesComparison(t);
    }
  },
  Md = class extends Y {
    constructor(e, t) {
      (super(e, `in`, t), (this.keys = Pd(`in`, t)));
    }
    matches(e) {
      return this.keys.some((t) => t.isEqual(e.key));
    }
  },
  Nd = class extends Y {
    constructor(e, t) {
      (super(e, `not-in`, t), (this.keys = Pd(`not-in`, t)));
    }
    matches(e) {
      return !this.keys.some((t) => t.isEqual(e.key));
    }
  };
function Pd(e, t) {
  return (t.arrayValue?.values || []).map((e) => W.fromName(e.referenceValue));
}
var Fd = class extends Y {
    constructor(e, t) {
      super(e, `array-contains`, t);
    }
    matches(e) {
      let t = e.data.field(this.field);
      return dd(t) && id(t.arrayValue, this.value);
    }
  },
  Id = class extends Y {
    constructor(e, t) {
      super(e, `in`, t);
    }
    matches(e) {
      let t = e.data.field(this.field);
      return t !== null && id(this.value.arrayValue, t);
    }
  },
  Ld = class extends Y {
    constructor(e, t) {
      super(e, `not-in`, t);
    }
    matches(e) {
      if (id(this.value.arrayValue, { nullValue: `NULL_VALUE` })) return !1;
      let t = e.data.field(this.field);
      return t !== null && t.nullValue === void 0 && !id(this.value.arrayValue, t);
    }
  },
  Rd = class extends Y {
    constructor(e, t) {
      super(e, `array-contains-any`, t);
    }
    matches(e) {
      let t = e.data.field(this.field);
      return (
        !(!dd(t) || !t.arrayValue.values) &&
        t.arrayValue.values.some((e) => id(this.value.arrayValue, e))
      );
    }
  },
  zd = class {
    constructor(e, t = null, n = [], r = [], i = null, a = null, o = null) {
      ((this.path = e),
        (this.collectionGroup = t),
        (this.orderBy = n),
        (this.filters = r),
        (this.limit = i),
        (this.startAt = a),
        (this.endAt = o),
        (this.Te = null));
    }
  };
function Bd(e, t = null, n = [], r = [], i = null, a = null, o = null) {
  return new zd(e, t, n, r, i, a, o);
}
function Vd(e) {
  let t = B(e);
  if (t.Te === null) {
    let e = t.path.canonicalString();
    (t.collectionGroup !== null && (e += `|cg:` + t.collectionGroup),
      (e += `|f:`),
      (e += t.filters.map((e) => Od(e)).join(`,`)),
      (e += `|ob:`),
      (e += t.orderBy
        .map((e) =>
          (function (e) {
            return e.field.canonicalString() + e.dir;
          })(e)
        )
        .join(`,`)),
      Tu(t.limit) || ((e += `|l:`), (e += t.limit)),
      t.startAt &&
        ((e += `|lb:`),
        (e += t.startAt.inclusive ? `b:` : `a:`),
        (e += t.startAt.position.map((e) => cd(e)).join(`,`))),
      t.endAt &&
        ((e += `|ub:`),
        (e += t.endAt.inclusive ? `a:` : `b:`),
        (e += t.endAt.position.map((e) => cd(e)).join(`,`))),
      (t.Te = e));
  }
  return t.Te;
}
function Hd(e, t) {
  if (e.limit !== t.limit || e.orderBy.length !== t.orderBy.length) return !1;
  for (let n = 0; n < e.orderBy.length; n++) if (!Sd(e.orderBy[n], t.orderBy[n])) return !1;
  if (e.filters.length !== t.filters.length) return !1;
  for (let n = 0; n < e.filters.length; n++) if (!kd(e.filters[n], t.filters[n])) return !1;
  return (
    e.collectionGroup === t.collectionGroup &&
    !!e.path.isEqual(t.path) &&
    !!bd(e.startAt, t.startAt) &&
    bd(e.endAt, t.endAt)
  );
}
var Ud = class {
  constructor(e, t = null, n = [], r = [], i = null, a = `F`, o = null, s = null) {
    ((this.path = e),
      (this.collectionGroup = t),
      (this.explicitOrderBy = n),
      (this.filters = r),
      (this.limit = i),
      (this.limitType = a),
      (this.startAt = o),
      (this.endAt = s),
      (this.Ie = null),
      (this.Ee = null),
      (this.Re = null),
      this.startAt,
      this.endAt);
  }
};
function Wd(e, t, n, r, i, a, o, s) {
  return new Ud(e, t, n, r, i, a, o, s);
}
function Gd(e) {
  return new Ud(e);
}
function Kd(e) {
  return (
    e.filters.length === 0 &&
    e.limit === null &&
    e.startAt == null &&
    e.endAt == null &&
    (e.explicitOrderBy.length === 0 ||
      (e.explicitOrderBy.length === 1 && e.explicitOrderBy[0].field.isKeyField()))
  );
}
function qd(e) {
  return W.isDocumentKey(e.path) && e.collectionGroup === null && e.filters.length === 0;
}
function Jd(e) {
  return e.collectionGroup !== null;
}
function Yd(e) {
  let t = B(e);
  if (t.Ie === null) {
    t.Ie = [];
    let e = new Set();
    for (let n of t.explicitOrderBy) (t.Ie.push(n), e.add(n.field.canonicalString()));
    let n =
      t.explicitOrderBy.length > 0 ? t.explicitOrderBy[t.explicitOrderBy.length - 1].dir : `asc`;
    ((function (e) {
      let t = new Nu(au.comparator);
      return (
        e.filters.forEach((e) => {
          e.getFlattenedFilters().forEach((e) => {
            e.isInequality() && (t = t.add(e.field));
          });
        }),
        t
      );
    })(t).forEach((r) => {
      e.has(r.canonicalString()) || r.isKeyField() || t.Ie.push(new xd(r, n));
    }),
      e.has(au.keyField().canonicalString()) || t.Ie.push(new xd(au.keyField(), n)));
  }
  return t.Ie;
}
function Xd(e) {
  let t = B(e);
  return ((t.Ee ||= Zd(t, Yd(e))), t.Ee);
}
function Zd(e, t) {
  if (e.limitType === `F`)
    return Bd(e.path, e.collectionGroup, t, e.filters, e.limit, e.startAt, e.endAt);
  {
    t = t.map((e) => {
      let t = e.dir === `desc` ? `asc` : `desc`;
      return new xd(e.field, t);
    });
    let n = e.endAt ? new vd(e.endAt.position, e.endAt.inclusive) : null,
      r = e.startAt ? new vd(e.startAt.position, e.startAt.inclusive) : null;
    return Bd(e.path, e.collectionGroup, t, e.filters, e.limit, n, r);
  }
}
function Qd(e, t, n) {
  return new Ud(
    e.path,
    e.collectionGroup,
    e.explicitOrderBy.slice(),
    e.filters.slice(),
    t,
    n,
    e.startAt,
    e.endAt
  );
}
function $d(e, t) {
  return Hd(Xd(e), Xd(t)) && e.limitType === t.limitType;
}
function ef(e) {
  return `${Vd(Xd(e))}|lt:${e.limitType}`;
}
function tf(e) {
  return `Query(target=${(function (e) {
    let t = e.path.canonicalString();
    return (
      e.collectionGroup !== null && (t += ` collectionGroup=` + e.collectionGroup),
      e.filters.length > 0 && (t += `, filters: [${e.filters.map((e) => Ad(e)).join(`, `)}]`),
      Tu(e.limit) || (t += `, limit: ` + e.limit),
      e.orderBy.length > 0 &&
        (t += `, orderBy: [${e.orderBy
          .map((e) =>
            (function (e) {
              return `${e.field.canonicalString()} (${e.dir})`;
            })(e)
          )
          .join(`, `)}]`),
      e.startAt &&
        ((t += `, startAt: `),
        (t += e.startAt.inclusive ? `b:` : `a:`),
        (t += e.startAt.position.map((e) => cd(e)).join(`,`))),
      e.endAt &&
        ((t += `, endAt: `),
        (t += e.endAt.inclusive ? `a:` : `b:`),
        (t += e.endAt.position.map((e) => cd(e)).join(`,`))),
      `Target(${t})`
    );
  })(Xd(e))}; limitType=${e.limitType})`;
}
function nf(e, t) {
  return (
    t.isFoundDocument() &&
    (function (e, t) {
      let n = t.key.path;
      return e.collectionGroup === null
        ? W.isDocumentKey(e.path)
          ? e.path.isEqual(n)
          : e.path.isImmediateParentOf(n)
        : t.key.hasCollectionId(e.collectionGroup) && e.path.isPrefixOf(n);
    })(e, t) &&
    (function (e, t) {
      for (let n of Yd(e)) if (!n.field.isKeyField() && t.data.field(n.field) === null) return !1;
      return !0;
    })(e, t) &&
    (function (e, t) {
      for (let n of e.filters) if (!n.matches(t)) return !1;
      return !0;
    })(e, t) &&
    (function (e, t) {
      return !(
        (e.startAt &&
          !(function (e, t, n) {
            let r = yd(e, t, n);
            return e.inclusive ? r <= 0 : r < 0;
          })(e.startAt, Yd(e), t)) ||
        (e.endAt &&
          !(function (e, t, n) {
            let r = yd(e, t, n);
            return e.inclusive ? r >= 0 : r > 0;
          })(e.endAt, Yd(e), t))
      );
    })(e, t)
  );
}
function rf(e) {
  return (t, n) => {
    let r = !1;
    for (let i of Yd(e)) {
      let e = af(i, t, n);
      if (e !== 0) return e;
      r ||= i.field.isKeyField();
    }
    return 0;
  };
}
function af(e, t, n) {
  let r = e.field.isKeyField()
    ? W.comparator(t.key, n.key)
    : (function (e, t, n) {
        let r = t.data.field(e),
          i = n.data.field(e);
        return r !== null && i !== null ? ad(r, i) : R(42886);
      })(e.field, t, n);
  switch (e.dir) {
    case `asc`:
      return r;
    case `desc`:
      return -1 * r;
    default:
      return R(19790, { direction: e.dir });
  }
}
var of = class {
    constructor(e, t) {
      ((this.mapKeyFn = e), (this.equalsFn = t), (this.inner = {}), (this.innerSize = 0));
    }
    get(e) {
      let t = this.mapKeyFn(e),
        n = this.inner[t];
      if (n !== void 0) {
        for (let [t, r] of n) if (this.equalsFn(t, e)) return r;
      }
    }
    has(e) {
      return this.get(e) !== void 0;
    }
    set(e, t) {
      let n = this.mapKeyFn(e),
        r = this.inner[n];
      if (r === void 0) return ((this.inner[n] = [[e, t]]), void this.innerSize++);
      for (let n = 0; n < r.length; n++) if (this.equalsFn(r[n][0], e)) return void (r[n] = [e, t]);
      (r.push([e, t]), this.innerSize++);
    }
    delete(e) {
      let t = this.mapKeyFn(e),
        n = this.inner[t];
      if (n === void 0) return !1;
      for (let r = 0; r < n.length; r++)
        if (this.equalsFn(n[r][0], e))
          return (n.length === 1 ? delete this.inner[t] : n.splice(r, 1), this.innerSize--, !0);
      return !1;
    }
    forEach(e) {
      Ou(this.inner, (t, n) => {
        for (let [t, r] of n) e(t, r);
      });
    }
    isEmpty() {
      return ku(this.inner);
    }
    size() {
      return this.innerSize;
    }
  },
  sf = new Au(W.comparator);
function cf() {
  return sf;
}
var lf = new Au(W.comparator);
function uf(...e) {
  let t = lf;
  for (let n of e) t = t.insert(n.key, n);
  return t;
}
function df(e) {
  let t = lf;
  return (e.forEach((e, n) => (t = t.insert(e, n.overlayedDocument))), t);
}
function ff() {
  return mf();
}
function pf() {
  return mf();
}
function mf() {
  return new of(
    (e) => e.toString(),
    (e, t) => e.isEqual(t)
  );
}
new Au(W.comparator);
var hf = new Nu(W.comparator);
function gf(...e) {
  let t = hf;
  for (let n of e) t = t.add(n);
  return t;
}
var _f = new Nu(U);
function vf() {
  return _f;
}
function yf(e, t) {
  if (e.useProto3Json) {
    if (isNaN(t)) return { doubleValue: `NaN` };
    if (t === 1 / 0) return { doubleValue: `Infinity` };
    if (t === -1 / 0) return { doubleValue: `-Infinity` };
  }
  return { doubleValue: Eu(t) ? `-0` : t };
}
function bf(e) {
  return { integerValue: `` + e };
}
var xf = class {
  constructor() {
    this._ = void 0;
  }
};
function Sf(e, t, n) {
  return e instanceof Tf
    ? (function (e, t) {
        let n = {
          fields: {
            [Hu]: { stringValue: Vu },
            [Wu]: { timestampValue: { seconds: e.seconds, nanos: e.nanoseconds } },
          },
        };
        return (t && Gu(t) && (t = Ku(t)), t && (n.fields[Uu] = t), { mapValue: n });
      })(n, t)
    : e instanceof Ef
      ? Df(e, t)
      : e instanceof Of
        ? kf(e, t)
        : (function (e, t) {
            let n = wf(e, t),
              r = jf(n) + jf(e.Ae);
            return ud(n) && ud(e.Ae) ? bf(r) : yf(e.serializer, r);
          })(e, t);
}
function Cf(e, t, n) {
  return e instanceof Ef ? Df(e, t) : e instanceof Of ? kf(e, t) : n;
}
function wf(e, t) {
  return e instanceof Af
    ? (function (e) {
        return (
          ud(e) ||
          (function (e) {
            return !!e && `doubleValue` in e;
          })(e)
        );
      })(t)
      ? t
      : { integerValue: 0 }
    : null;
}
var Tf = class extends xf {},
  Ef = class extends xf {
    constructor(e) {
      (super(), (this.elements = e));
    }
  };
function Df(e, t) {
  let n = Mf(t);
  for (let t of e.elements) n.some((e) => rd(e, t)) || n.push(t);
  return { arrayValue: { values: n } };
}
var Of = class extends xf {
  constructor(e) {
    (super(), (this.elements = e));
  }
};
function kf(e, t) {
  let n = Mf(t);
  for (let t of e.elements) n = n.filter((e) => !rd(e, t));
  return { arrayValue: { values: n } };
}
var Af = class extends xf {
  constructor(e, t) {
    (super(), (this.serializer = e), (this.Ae = t));
  }
};
function jf(e) {
  return J(e.integerValue || e.doubleValue);
}
function Mf(e) {
  return dd(e) && e.arrayValue.values ? e.arrayValue.values.slice() : [];
}
function Nf(e, t) {
  return (
    e.field.isEqual(t.field) &&
    (function (e, t) {
      return (e instanceof Ef && t instanceof Ef) || (e instanceof Of && t instanceof Of)
        ? eu(e.elements, t.elements, rd)
        : e instanceof Af && t instanceof Af
          ? rd(e.Ae, t.Ae)
          : e instanceof Tf && t instanceof Tf;
    })(e.transform, t.transform)
  );
}
var Pf = class e {
  constructor(e, t) {
    ((this.updateTime = e), (this.exists = t));
  }
  static none() {
    return new e();
  }
  static exists(t) {
    return new e(void 0, t);
  }
  static updateTime(t) {
    return new e(t);
  }
  get isNone() {
    return this.updateTime === void 0 && this.exists === void 0;
  }
  isEqual(e) {
    return (
      this.exists === e.exists &&
      (this.updateTime ? !!e.updateTime && this.updateTime.isEqual(e.updateTime) : !e.updateTime)
    );
  }
};
function Ff(e, t) {
  return e.updateTime === void 0
    ? e.exists === void 0 || e.exists === t.isFoundDocument()
    : t.isFoundDocument() && t.version.isEqual(e.updateTime);
}
var If = class {};
function Lf(e, t) {
  if (!e.hasLocalMutations || (t && t.fields.length === 0)) return null;
  if (t === null)
    return e.isNoDocument() ? new Kf(e.key, Pf.none()) : new Vf(e.key, e.data, Pf.none());
  {
    let n = e.data,
      r = gd.empty(),
      i = new Nu(au.comparator);
    for (let e of t.fields)
      if (!i.has(e)) {
        let t = n.field(e);
        (t === null && e.length > 1 && ((e = e.popLast()), (t = n.field(e))),
          t === null ? r.delete(e) : r.set(e, t),
          (i = i.add(e)));
      }
    return new Hf(e.key, r, new Fu(i.toArray()), Pf.none());
  }
}
function Rf(e, t, n) {
  e instanceof Vf
    ? (function (e, t, n) {
        let r = e.value.clone(),
          i = Wf(e.fieldTransforms, t, n.transformResults);
        (r.setAll(i), t.convertToFoundDocument(n.version, r).setHasCommittedMutations());
      })(e, t, n)
    : e instanceof Hf
      ? (function (e, t, n) {
          if (!Ff(e.precondition, t)) return void t.convertToUnknownDocument(n.version);
          let r = Wf(e.fieldTransforms, t, n.transformResults),
            i = t.data;
          (i.setAll(Uf(e)),
            i.setAll(r),
            t.convertToFoundDocument(n.version, i).setHasCommittedMutations());
        })(e, t, n)
      : (function (e, t, n) {
          t.convertToNoDocument(n.version).setHasCommittedMutations();
        })(0, t, n);
}
function zf(e, t, n, r) {
  return e instanceof Vf
    ? (function (e, t, n, r) {
        if (!Ff(e.precondition, t)) return n;
        let i = e.value.clone(),
          a = Gf(e.fieldTransforms, r, t);
        return (i.setAll(a), t.convertToFoundDocument(t.version, i).setHasLocalMutations(), null);
      })(e, t, n, r)
    : e instanceof Hf
      ? (function (e, t, n, r) {
          if (!Ff(e.precondition, t)) return n;
          let i = Gf(e.fieldTransforms, r, t),
            a = t.data;
          return (
            a.setAll(Uf(e)),
            a.setAll(i),
            t.convertToFoundDocument(t.version, a).setHasLocalMutations(),
            n === null
              ? null
              : n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e) => e.field))
          );
        })(e, t, n, r)
      : (function (e, t, n) {
          return Ff(e.precondition, t)
            ? (t.convertToNoDocument(t.version).setHasLocalMutations(), null)
            : n;
        })(e, t, n);
}
function Bf(e, t) {
  return (
    e.type === t.type &&
    !!e.key.isEqual(t.key) &&
    !!e.precondition.isEqual(t.precondition) &&
    !!(function (e, t) {
      return (e === void 0 && t === void 0) || (!(!e || !t) && eu(e, t, (e, t) => Nf(e, t)));
    })(e.fieldTransforms, t.fieldTransforms) &&
    (e.type === 0
      ? e.value.isEqual(t.value)
      : e.type !== 1 || (e.data.isEqual(t.data) && e.fieldMask.isEqual(t.fieldMask)))
  );
}
var Vf = class extends If {
    constructor(e, t, n, r = []) {
      (super(),
        (this.key = e),
        (this.value = t),
        (this.precondition = n),
        (this.fieldTransforms = r),
        (this.type = 0));
    }
    getFieldMask() {
      return null;
    }
  },
  Hf = class extends If {
    constructor(e, t, n, r, i = []) {
      (super(),
        (this.key = e),
        (this.data = t),
        (this.fieldMask = n),
        (this.precondition = r),
        (this.fieldTransforms = i),
        (this.type = 1));
    }
    getFieldMask() {
      return this.fieldMask;
    }
  };
function Uf(e) {
  let t = new Map();
  return (
    e.fieldMask.fields.forEach((n) => {
      if (!n.isEmpty()) {
        let r = e.data.field(n);
        t.set(n, r);
      }
    }),
    t
  );
}
function Wf(e, t, n) {
  let r = new Map();
  z(e.length === n.length, 32656, { Ve: n.length, de: e.length });
  for (let i = 0; i < n.length; i++) {
    let a = e[i],
      o = a.transform,
      s = t.data.field(a.field);
    r.set(a.field, Cf(o, s, n[i]));
  }
  return r;
}
function Gf(e, t, n) {
  let r = new Map();
  for (let i of e) {
    let e = i.transform,
      a = n.data.field(i.field);
    r.set(i.field, Sf(e, a, t));
  }
  return r;
}
var Kf = class extends If {
    constructor(e, t) {
      (super(),
        (this.key = e),
        (this.precondition = t),
        (this.type = 2),
        (this.fieldTransforms = []));
    }
    getFieldMask() {
      return null;
    }
  },
  qf = class {
    constructor(e, t, n, r) {
      ((this.batchId = e),
        (this.localWriteTime = t),
        (this.baseMutations = n),
        (this.mutations = r));
    }
    applyToRemoteDocument(e, t) {
      let n = t.mutationResults;
      for (let t = 0; t < this.mutations.length; t++) {
        let r = this.mutations[t];
        r.key.isEqual(e.key) && Rf(r, e, n[t]);
      }
    }
    applyToLocalView(e, t) {
      for (let n of this.baseMutations)
        n.key.isEqual(e.key) && (t = zf(n, e, t, this.localWriteTime));
      for (let n of this.mutations) n.key.isEqual(e.key) && (t = zf(n, e, t, this.localWriteTime));
      return t;
    }
    applyToLocalDocumentSet(e, t) {
      let n = pf();
      return (
        this.mutations.forEach((r) => {
          let i = e.get(r.key),
            a = i.overlayedDocument,
            o = this.applyToLocalView(a, i.mutatedFields);
          o = t.has(r.key) ? null : o;
          let s = Lf(a, o);
          (s !== null && n.set(r.key, s), a.isValidDocument() || a.convertToNoDocument(K.min()));
        }),
        n
      );
    }
    keys() {
      return this.mutations.reduce((e, t) => e.add(t.key), gf());
    }
    isEqual(e) {
      return (
        this.batchId === e.batchId &&
        eu(this.mutations, e.mutations, (e, t) => Bf(e, t)) &&
        eu(this.baseMutations, e.baseMutations, (e, t) => Bf(e, t))
      );
    }
  },
  Jf = class {
    constructor(e, t) {
      ((this.largestBatchId = e), (this.mutation = t));
    }
    getKey() {
      return this.mutation.key;
    }
    isEqual(e) {
      return e !== null && this.mutation === e.mutation;
    }
    toString() {
      return `Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`;
    }
  },
  X,
  Z;
function Yf(e) {
  if (e === void 0) return (Fl(`GRPC error has no .code`), V.UNKNOWN);
  switch (e) {
    case X.OK:
      return V.OK;
    case X.CANCELLED:
      return V.CANCELLED;
    case X.UNKNOWN:
      return V.UNKNOWN;
    case X.DEADLINE_EXCEEDED:
      return V.DEADLINE_EXCEEDED;
    case X.RESOURCE_EXHAUSTED:
      return V.RESOURCE_EXHAUSTED;
    case X.INTERNAL:
      return V.INTERNAL;
    case X.UNAVAILABLE:
      return V.UNAVAILABLE;
    case X.UNAUTHENTICATED:
      return V.UNAUTHENTICATED;
    case X.INVALID_ARGUMENT:
      return V.INVALID_ARGUMENT;
    case X.NOT_FOUND:
      return V.NOT_FOUND;
    case X.ALREADY_EXISTS:
      return V.ALREADY_EXISTS;
    case X.PERMISSION_DENIED:
      return V.PERMISSION_DENIED;
    case X.FAILED_PRECONDITION:
      return V.FAILED_PRECONDITION;
    case X.ABORTED:
      return V.ABORTED;
    case X.OUT_OF_RANGE:
      return V.OUT_OF_RANGE;
    case X.UNIMPLEMENTED:
      return V.UNIMPLEMENTED;
    case X.DATA_LOSS:
      return V.DATA_LOSS;
    default:
      return R(39323, { code: e });
  }
}
(((Z = X ||= {})[(Z.OK = 0)] = `OK`),
  (Z[(Z.CANCELLED = 1)] = `CANCELLED`),
  (Z[(Z.UNKNOWN = 2)] = `UNKNOWN`),
  (Z[(Z.INVALID_ARGUMENT = 3)] = `INVALID_ARGUMENT`),
  (Z[(Z.DEADLINE_EXCEEDED = 4)] = `DEADLINE_EXCEEDED`),
  (Z[(Z.NOT_FOUND = 5)] = `NOT_FOUND`),
  (Z[(Z.ALREADY_EXISTS = 6)] = `ALREADY_EXISTS`),
  (Z[(Z.PERMISSION_DENIED = 7)] = `PERMISSION_DENIED`),
  (Z[(Z.UNAUTHENTICATED = 16)] = `UNAUTHENTICATED`),
  (Z[(Z.RESOURCE_EXHAUSTED = 8)] = `RESOURCE_EXHAUSTED`),
  (Z[(Z.FAILED_PRECONDITION = 9)] = `FAILED_PRECONDITION`),
  (Z[(Z.ABORTED = 10)] = `ABORTED`),
  (Z[(Z.OUT_OF_RANGE = 11)] = `OUT_OF_RANGE`),
  (Z[(Z.UNIMPLEMENTED = 12)] = `UNIMPLEMENTED`),
  (Z[(Z.INTERNAL = 13)] = `INTERNAL`),
  (Z[(Z.UNAVAILABLE = 14)] = `UNAVAILABLE`),
  (Z[(Z.DATA_LOSS = 15)] = `DATA_LOSS`),
  new bl([4294967295, 4294967295], 0));
var Xf = class {
  constructor(e, t) {
    ((this.databaseId = e), (this.useProto3Json = t));
  }
};
function Zf(e) {
  return (
    z(!!e, 49232),
    K.fromTimestamp(
      (function (e) {
        let t = zu(e);
        return new pu(t.seconds, t.nanos);
      })(e)
    )
  );
}
function Qf(e, t) {
  let n = (function (e) {
    return new ru([`projects`, e.projectId, `databases`, e.database]);
  })(e).child(`documents`);
  return t === void 0 ? n : n.child(t);
}
function $f(e) {
  let t = ru.fromString(e);
  return (z(ap(t), 10190, { key: t.toString() }), t);
}
function ep(e) {
  let t = $f(e);
  return t.length === 4 ? ru.emptyPath() : tp(t);
}
function tp(e) {
  return (z(e.length > 4 && e.get(4) === `documents`, 29091, { key: e.toString() }), e.popFirst(5));
}
function np(e) {
  let t = ep(e.parent),
    n = e.structuredQuery,
    r = n.from ? n.from.length : 0,
    i = null;
  if (r > 0) {
    z(r === 1, 65062);
    let e = n.from[0];
    e.allDescendants ? (i = e.collectionId) : (t = t.child(e.collectionId));
  }
  let a = [];
  n.where &&
    (a = (function (e) {
      let t = rp(e);
      return t instanceof wd && Ed(t) ? t.getFilters() : [t];
    })(n.where));
  let o = [];
  n.orderBy &&
    (o = (function (e) {
      return e.map((e) =>
        (function (e) {
          return new xd(
            ip(e.field),
            (function (e) {
              switch (e) {
                case `ASCENDING`:
                  return `asc`;
                case `DESCENDING`:
                  return `desc`;
                default:
                  return;
              }
            })(e.direction)
          );
        })(e)
      );
    })(n.orderBy));
  let s = null;
  n.limit &&
    (s = (function (e) {
      let t;
      return ((t = typeof e == `object` ? e.value : e), Tu(t) ? null : t);
    })(n.limit));
  let c = null;
  n.startAt &&
    (c = (function (e) {
      let t = !!e.before;
      return new vd(e.values || [], t);
    })(n.startAt));
  let l = null;
  return (
    n.endAt &&
      (l = (function (e) {
        let t = !e.before;
        return new vd(e.values || [], t);
      })(n.endAt)),
    Wd(t, i, o, a, s, `F`, c, l)
  );
}
function rp(e) {
  return e.unaryFilter === void 0
    ? e.fieldFilter === void 0
      ? e.compositeFilter === void 0
        ? R(30097, { filter: e })
        : (function (e) {
            return wd.create(
              e.compositeFilter.filters.map((e) => rp(e)),
              (function (e) {
                switch (e) {
                  case `AND`:
                    return `and`;
                  case `OR`:
                    return `or`;
                  default:
                    return R(1026);
                }
              })(e.compositeFilter.op)
            );
          })(e)
      : (function (e) {
          return Y.create(
            ip(e.fieldFilter.field),
            (function (e) {
              switch (e) {
                case `EQUAL`:
                  return `==`;
                case `NOT_EQUAL`:
                  return `!=`;
                case `GREATER_THAN`:
                  return `>`;
                case `GREATER_THAN_OR_EQUAL`:
                  return `>=`;
                case `LESS_THAN`:
                  return `<`;
                case `LESS_THAN_OR_EQUAL`:
                  return `<=`;
                case `ARRAY_CONTAINS`:
                  return `array-contains`;
                case `IN`:
                  return `in`;
                case `NOT_IN`:
                  return `not-in`;
                case `ARRAY_CONTAINS_ANY`:
                  return `array-contains-any`;
                case `OPERATOR_UNSPECIFIED`:
                  return R(58110);
                default:
                  return R(50506);
              }
            })(e.fieldFilter.op),
            e.fieldFilter.value
          );
        })(e)
    : (function (e) {
        switch (e.unaryFilter.op) {
          case `IS_NAN`:
            let t = ip(e.unaryFilter.field);
            return Y.create(t, `==`, { doubleValue: NaN });
          case `IS_NULL`:
            let n = ip(e.unaryFilter.field);
            return Y.create(n, `==`, { nullValue: `NULL_VALUE` });
          case `IS_NOT_NAN`:
            let r = ip(e.unaryFilter.field);
            return Y.create(r, `!=`, { doubleValue: NaN });
          case `IS_NOT_NULL`:
            let i = ip(e.unaryFilter.field);
            return Y.create(i, `!=`, { nullValue: `NULL_VALUE` });
          case `OPERATOR_UNSPECIFIED`:
            return R(61313);
          default:
            return R(60726);
        }
      })(e);
}
function ip(e) {
  return au.fromServerFormat(e.fieldPath);
}
function ap(e) {
  return e.length >= 4 && e.get(0) === `projects` && e.get(2) === `databases`;
}
var op = class {
  constructor(e) {
    this.yt = e;
  }
};
function sp(e) {
  let t = np({ parent: e.parent, structuredQuery: e.structuredQuery });
  return e.limitType === `LAST` ? Qd(t, t.limit, `L`) : t;
}
var cp = class {
  constructor() {}
  Dt(e, t) {
    (this.Ct(e, t), t.vt());
  }
  Ct(e, t) {
    if (`nullValue` in e) this.Ft(t, 5);
    else if (`booleanValue` in e) (this.Ft(t, 10), t.Mt(e.booleanValue ? 1 : 0));
    else if (`integerValue` in e) (this.Ft(t, 15), t.Mt(J(e.integerValue)));
    else if (`doubleValue` in e) {
      let n = J(e.doubleValue);
      isNaN(n) ? this.Ft(t, 13) : (this.Ft(t, 15), Eu(n) ? t.Mt(0) : t.Mt(n));
    } else if (`timestampValue` in e) {
      let n = e.timestampValue;
      (this.Ft(t, 20),
        typeof n == `string` && (n = zu(n)),
        t.xt(`${n.seconds || ``}`),
        t.Mt(n.nanos || 0));
    } else if (`stringValue` in e) (this.Ot(e.stringValue, t), this.Nt(t));
    else if (`bytesValue` in e) (this.Ft(t, 30), t.Bt(Bu(e.bytesValue)), this.Nt(t));
    else if (`referenceValue` in e) this.Lt(e.referenceValue, t);
    else if (`geoPointValue` in e) {
      let n = e.geoPointValue;
      (this.Ft(t, 45), t.Mt(n.latitude || 0), t.Mt(n.longitude || 0));
    } else
      `mapValue` in e
        ? hd(e)
          ? this.Ft(t, 2 ** 53 - 1)
          : pd(e)
            ? this.kt(e.mapValue, t)
            : (this.Kt(e.mapValue, t), this.Nt(t))
        : `arrayValue` in e
          ? (this.qt(e.arrayValue, t), this.Nt(t))
          : R(19022, { Ut: e });
  }
  Ot(e, t) {
    (this.Ft(t, 25), this.$t(e, t));
  }
  $t(e, t) {
    t.xt(e);
  }
  Kt(e, t) {
    let n = e.fields || {};
    this.Ft(t, 55);
    for (let e of Object.keys(n)) (this.Ot(e, t), this.Ct(n[e], t));
  }
  kt(e, t) {
    let n = e.fields || {};
    this.Ft(t, 53);
    let r = td,
      i = n[r].arrayValue?.values?.length || 0;
    (this.Ft(t, 15), t.Mt(J(i)), this.Ot(r, t), this.Ct(n[r], t));
  }
  qt(e, t) {
    let n = e.values || [];
    this.Ft(t, 50);
    for (let e of n) this.Ct(e, t);
  }
  Lt(e, t) {
    (this.Ft(t, 37),
      W.fromName(e).path.forEach((e) => {
        (this.Ft(t, 60), this.$t(e, t));
      }));
  }
  Ft(e, t) {
    e.Mt(t);
  }
  Nt(e) {
    e.Mt(2);
  }
};
cp.Wt = new cp();
var lp = class {
    constructor() {
      this.Sn = new up();
    }
    addToCollectionParentIndex(e, t) {
      return (this.Sn.add(t), q.resolve());
    }
    getCollectionParents(e, t) {
      return q.resolve(this.Sn.getEntries(t));
    }
    addFieldIndex(e, t) {
      return q.resolve();
    }
    deleteFieldIndex(e, t) {
      return q.resolve();
    }
    deleteAllFieldIndexes(e) {
      return q.resolve();
    }
    createTargetIndexes(e, t) {
      return q.resolve();
    }
    getDocumentsMatchingTarget(e, t) {
      return q.resolve(null);
    }
    getIndexType(e, t) {
      return q.resolve(0);
    }
    getFieldIndexes(e, t) {
      return q.resolve([]);
    }
    getNextCollectionGroupToUpdate(e) {
      return q.resolve(null);
    }
    getMinOffset(e, t) {
      return q.resolve(vu.min());
    }
    getMinOffsetFromCollectionGroup(e, t) {
      return q.resolve(vu.min());
    }
    updateCollectionGroup(e, t, n) {
      return q.resolve();
    }
    updateIndexEntries(e, t) {
      return q.resolve();
    }
  },
  up = class {
    constructor() {
      this.index = {};
    }
    add(e) {
      let t = e.lastSegment(),
        n = e.popLast(),
        r = this.index[t] || new Nu(ru.comparator),
        i = !r.has(n);
      return ((this.index[t] = r.add(n)), i);
    }
    has(e) {
      let t = e.lastSegment(),
        n = e.popLast(),
        r = this.index[t];
      return r && r.has(n);
    }
    getEntries(e) {
      return (this.index[e] || new Nu(ru.comparator)).toArray();
    }
  };
new Uint8Array();
var dp = 41943040,
  fp = class e {
    static withCacheSize(t) {
      return new e(t, e.DEFAULT_COLLECTION_PERCENTILE, e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT);
    }
    constructor(e, t, n) {
      ((this.cacheSizeCollectionThreshold = e),
        (this.percentileToCollect = t),
        (this.maximumSequenceNumbersToCollect = n));
    }
  };
((fp.DEFAULT_COLLECTION_PERCENTILE = 10),
  (fp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT = 1e3),
  (fp.DEFAULT = new fp(
    dp,
    fp.DEFAULT_COLLECTION_PERCENTILE,
    fp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT
  )),
  (fp.DISABLED = new fp(-1, 0, 0)));
var pp = class e {
    constructor(e) {
      this.sr = e;
    }
    next() {
      return ((this.sr += 2), this.sr);
    }
    static _r() {
      return new e(0);
    }
    static ar() {
      return new e(-1);
    }
  },
  mp = 1048576,
  hp = class {
    constructor() {
      ((this.changes = new of(
        (e) => e.toString(),
        (e, t) => e.isEqual(t)
      )),
        (this.changesApplied = !1));
    }
    addEntry(e) {
      (this.assertNotApplied(), this.changes.set(e.key, e));
    }
    removeEntry(e, t) {
      (this.assertNotApplied(), this.changes.set(e, _d.newInvalidDocument(e).setReadTime(t)));
    }
    getEntry(e, t) {
      this.assertNotApplied();
      let n = this.changes.get(t);
      return n === void 0 ? this.getFromCache(e, t) : q.resolve(n);
    }
    getEntries(e, t) {
      return this.getAllFromCache(e, t);
    }
    apply(e) {
      return (this.assertNotApplied(), (this.changesApplied = !0), this.applyChanges(e));
    }
    assertNotApplied() {}
  },
  gp = class {
    constructor(e, t) {
      ((this.overlayedDocument = e), (this.mutatedFields = t));
    }
  },
  _p = class {
    constructor(e, t, n, r) {
      ((this.remoteDocumentCache = e),
        (this.mutationQueue = t),
        (this.documentOverlayCache = n),
        (this.indexManager = r));
    }
    getDocument(e, t) {
      let n = null;
      return this.documentOverlayCache
        .getOverlay(e, t)
        .next((r) => ((n = r), this.remoteDocumentCache.getEntry(e, t)))
        .next((e) => (n !== null && zf(n.mutation, e, Fu.empty(), pu.now()), e));
    }
    getDocuments(e, t) {
      return this.remoteDocumentCache
        .getEntries(e, t)
        .next((t) => this.getLocalViewOfDocuments(e, t, gf()).next(() => t));
    }
    getLocalViewOfDocuments(e, t, n = gf()) {
      let r = ff();
      return this.populateOverlays(e, r, t).next(() =>
        this.computeViews(e, t, r, n).next((e) => {
          let t = uf();
          return (
            e.forEach((e, n) => {
              t = t.insert(e, n.overlayedDocument);
            }),
            t
          );
        })
      );
    }
    getOverlayedDocuments(e, t) {
      let n = ff();
      return this.populateOverlays(e, n, t).next(() => this.computeViews(e, t, n, gf()));
    }
    populateOverlays(e, t, n) {
      let r = [];
      return (
        n.forEach((e) => {
          t.has(e) || r.push(e);
        }),
        this.documentOverlayCache.getOverlays(e, r).next((e) => {
          e.forEach((e, n) => {
            t.set(e, n);
          });
        })
      );
    }
    computeViews(e, t, n, r) {
      let i = cf(),
        a = mf(),
        o = (function () {
          return mf();
        })();
      return (
        t.forEach((e, t) => {
          let o = n.get(t.key);
          r.has(t.key) && (o === void 0 || o.mutation instanceof Hf)
            ? (i = i.insert(t.key, t))
            : o === void 0
              ? a.set(t.key, Fu.empty())
              : (a.set(t.key, o.mutation.getFieldMask()),
                zf(o.mutation, t, o.mutation.getFieldMask(), pu.now()));
        }),
        this.recalculateAndSaveOverlays(e, i).next(
          (e) => (
            e.forEach((e, t) => a.set(e, t)),
            t.forEach((e, t) => o.set(e, new gp(t, a.get(e) ?? null))),
            o
          )
        )
      );
    }
    recalculateAndSaveOverlays(e, t) {
      let n = mf(),
        r = new Au((e, t) => e - t),
        i = gf();
      return this.mutationQueue
        .getAllMutationBatchesAffectingDocumentKeys(e, t)
        .next((e) => {
          for (let i of e)
            i.keys().forEach((e) => {
              let a = t.get(e);
              if (a === null) return;
              let o = n.get(e) || Fu.empty();
              ((o = i.applyToLocalView(a, o)), n.set(e, o));
              let s = (r.get(i.batchId) || gf()).add(e);
              r = r.insert(i.batchId, s);
            });
        })
        .next(() => {
          let a = [],
            o = r.getReverseIterator();
          for (; o.hasNext(); ) {
            let r = o.getNext(),
              s = r.key,
              c = r.value,
              l = pf();
            (c.forEach((e) => {
              if (!i.has(e)) {
                let r = Lf(t.get(e), n.get(e));
                (r !== null && l.set(e, r), (i = i.add(e)));
              }
            }),
              a.push(this.documentOverlayCache.saveOverlays(e, s, l)));
          }
          return q.waitFor(a);
        })
        .next(() => n);
    }
    recalculateAndSaveOverlaysForDocumentKeys(e, t) {
      return this.remoteDocumentCache
        .getEntries(e, t)
        .next((t) => this.recalculateAndSaveOverlays(e, t));
    }
    getDocumentsMatchingQuery(e, t, n, r) {
      return qd(t)
        ? this.getDocumentsMatchingDocumentQuery(e, t.path)
        : Jd(t)
          ? this.getDocumentsMatchingCollectionGroupQuery(e, t, n, r)
          : this.getDocumentsMatchingCollectionQuery(e, t, n, r);
    }
    getNextDocuments(e, t, n, r) {
      return this.remoteDocumentCache.getAllFromCollectionGroup(e, t, n, r).next((i) => {
        let a =
            r - i.size > 0
              ? this.documentOverlayCache.getOverlaysForCollectionGroup(
                  e,
                  t,
                  n.largestBatchId,
                  r - i.size
                )
              : q.resolve(ff()),
          o = mu,
          s = i;
        return a.next((t) =>
          q
            .forEach(
              t,
              (t, n) => (
                o < n.largestBatchId && (o = n.largestBatchId),
                i.get(t)
                  ? q.resolve()
                  : this.remoteDocumentCache.getEntry(e, t).next((e) => {
                      s = s.insert(t, e);
                    })
              )
            )
            .next(() => this.populateOverlays(e, t, i))
            .next(() => this.computeViews(e, s, t, gf()))
            .next((e) => ({ batchId: o, changes: df(e) }))
        );
      });
    }
    getDocumentsMatchingDocumentQuery(e, t) {
      return this.getDocument(e, new W(t)).next((e) => {
        let t = uf();
        return (e.isFoundDocument() && (t = t.insert(e.key, e)), t);
      });
    }
    getDocumentsMatchingCollectionGroupQuery(e, t, n, r) {
      let i = t.collectionGroup,
        a = uf();
      return this.indexManager.getCollectionParents(e, i).next((o) =>
        q
          .forEach(o, (o) => {
            let s = (function (e, t) {
              return new Ud(
                t,
                null,
                e.explicitOrderBy.slice(),
                e.filters.slice(),
                e.limit,
                e.limitType,
                e.startAt,
                e.endAt
              );
            })(t, o.child(i));
            return this.getDocumentsMatchingCollectionQuery(e, s, n, r).next((e) => {
              e.forEach((e, t) => {
                a = a.insert(e, t);
              });
            });
          })
          .next(() => a)
      );
    }
    getDocumentsMatchingCollectionQuery(e, t, n, r) {
      let i;
      return this.documentOverlayCache
        .getOverlaysForCollection(e, t.path, n.largestBatchId)
        .next((a) => ((i = a), this.remoteDocumentCache.getDocumentsMatchingQuery(e, t, n, i, r)))
        .next((e) => {
          i.forEach((t, n) => {
            let r = n.getKey();
            e.get(r) === null && (e = e.insert(r, _d.newInvalidDocument(r)));
          });
          let n = uf();
          return (
            e.forEach((e, r) => {
              let a = i.get(e);
              (a !== void 0 && zf(a.mutation, r, Fu.empty(), pu.now()),
                nf(t, r) && (n = n.insert(e, r)));
            }),
            n
          );
        });
    }
  },
  vp = class {
    constructor(e) {
      ((this.serializer = e), (this.Nr = new Map()), (this.Br = new Map()));
    }
    getBundleMetadata(e, t) {
      return q.resolve(this.Nr.get(t));
    }
    saveBundleMetadata(e, t) {
      return (
        this.Nr.set(
          t.id,
          (function (e) {
            return { id: e.id, version: e.version, createTime: Zf(e.createTime) };
          })(t)
        ),
        q.resolve()
      );
    }
    getNamedQuery(e, t) {
      return q.resolve(this.Br.get(t));
    }
    saveNamedQuery(e, t) {
      return (
        this.Br.set(
          t.name,
          (function (e) {
            return { name: e.name, query: sp(e.bundledQuery), readTime: Zf(e.readTime) };
          })(t)
        ),
        q.resolve()
      );
    }
  },
  yp = class {
    constructor() {
      ((this.overlays = new Au(W.comparator)), (this.Lr = new Map()));
    }
    getOverlay(e, t) {
      return q.resolve(this.overlays.get(t));
    }
    getOverlays(e, t) {
      let n = ff();
      return q
        .forEach(t, (t) =>
          this.getOverlay(e, t).next((e) => {
            e !== null && n.set(t, e);
          })
        )
        .next(() => n);
    }
    saveOverlays(e, t, n) {
      return (
        n.forEach((n, r) => {
          this.bt(e, t, r);
        }),
        q.resolve()
      );
    }
    removeOverlaysForBatchId(e, t, n) {
      let r = this.Lr.get(n);
      return (
        r !== void 0 &&
          (r.forEach((e) => (this.overlays = this.overlays.remove(e))), this.Lr.delete(n)),
        q.resolve()
      );
    }
    getOverlaysForCollection(e, t, n) {
      let r = ff(),
        i = t.length + 1,
        a = new W(t.child(``)),
        o = this.overlays.getIteratorFrom(a);
      for (; o.hasNext(); ) {
        let e = o.getNext().value,
          a = e.getKey();
        if (!t.isPrefixOf(a.path)) break;
        a.path.length === i && e.largestBatchId > n && r.set(e.getKey(), e);
      }
      return q.resolve(r);
    }
    getOverlaysForCollectionGroup(e, t, n, r) {
      let i = new Au((e, t) => e - t),
        a = this.overlays.getIterator();
      for (; a.hasNext(); ) {
        let e = a.getNext().value;
        if (e.getKey().getCollectionGroup() === t && e.largestBatchId > n) {
          let t = i.get(e.largestBatchId);
          (t === null && ((t = ff()), (i = i.insert(e.largestBatchId, t))), t.set(e.getKey(), e));
        }
      }
      let o = ff(),
        s = i.getIterator();
      for (; s.hasNext() && (s.getNext().value.forEach((e, t) => o.set(e, t)), !(o.size() >= r)); );
      return q.resolve(o);
    }
    bt(e, t, n) {
      let r = this.overlays.get(n.key);
      if (r !== null) {
        let e = this.Lr.get(r.largestBatchId).delete(n.key);
        this.Lr.set(r.largestBatchId, e);
      }
      this.overlays = this.overlays.insert(n.key, new Jf(t, n));
      let i = this.Lr.get(t);
      (i === void 0 && ((i = gf()), this.Lr.set(t, i)), this.Lr.set(t, i.add(n.key)));
    }
  },
  bp = class {
    constructor() {
      this.sessionToken = Lu.EMPTY_BYTE_STRING;
    }
    getSessionToken(e) {
      return q.resolve(this.sessionToken);
    }
    setSessionToken(e, t) {
      return ((this.sessionToken = t), q.resolve());
    }
  },
  xp = class {
    constructor() {
      ((this.kr = new Nu(Q.Kr)), (this.qr = new Nu(Q.Ur)));
    }
    isEmpty() {
      return this.kr.isEmpty();
    }
    addReference(e, t) {
      let n = new Q(e, t);
      ((this.kr = this.kr.add(n)), (this.qr = this.qr.add(n)));
    }
    $r(e, t) {
      e.forEach((e) => this.addReference(e, t));
    }
    removeReference(e, t) {
      this.Wr(new Q(e, t));
    }
    Qr(e, t) {
      e.forEach((e) => this.removeReference(e, t));
    }
    Gr(e) {
      let t = new W(new ru([])),
        n = new Q(t, e),
        r = new Q(t, e + 1),
        i = [];
      return (
        this.qr.forEachInRange([n, r], (e) => {
          (this.Wr(e), i.push(e.key));
        }),
        i
      );
    }
    zr() {
      this.kr.forEach((e) => this.Wr(e));
    }
    Wr(e) {
      ((this.kr = this.kr.delete(e)), (this.qr = this.qr.delete(e)));
    }
    jr(e) {
      let t = new W(new ru([])),
        n = new Q(t, e),
        r = new Q(t, e + 1),
        i = gf();
      return (
        this.qr.forEachInRange([n, r], (e) => {
          i = i.add(e.key);
        }),
        i
      );
    }
    containsKey(e) {
      let t = new Q(e, 0),
        n = this.kr.firstAfterOrEqual(t);
      return n !== null && e.isEqual(n.key);
    }
  },
  Q = class {
    constructor(e, t) {
      ((this.key = e), (this.Hr = t));
    }
    static Kr(e, t) {
      return W.comparator(e.key, t.key) || U(e.Hr, t.Hr);
    }
    static Ur(e, t) {
      return U(e.Hr, t.Hr) || W.comparator(e.key, t.key);
    }
  },
  Sp = class {
    constructor(e, t) {
      ((this.indexManager = e),
        (this.referenceDelegate = t),
        (this.mutationQueue = []),
        (this.Yn = 1),
        (this.Jr = new Nu(Q.Kr)));
    }
    checkEmpty(e) {
      return q.resolve(this.mutationQueue.length === 0);
    }
    addMutationBatch(e, t, n, r) {
      let i = this.Yn;
      (this.Yn++,
        this.mutationQueue.length > 0 && this.mutationQueue[this.mutationQueue.length - 1]);
      let a = new qf(i, t, n, r);
      this.mutationQueue.push(a);
      for (let t of r)
        ((this.Jr = this.Jr.add(new Q(t.key, i))),
          this.indexManager.addToCollectionParentIndex(e, t.key.path.popLast()));
      return q.resolve(a);
    }
    lookupMutationBatch(e, t) {
      return q.resolve(this.Zr(t));
    }
    getNextMutationBatchAfterBatchId(e, t) {
      let n = t + 1,
        r = this.Xr(n),
        i = r < 0 ? 0 : r;
      return q.resolve(this.mutationQueue.length > i ? this.mutationQueue[i] : null);
    }
    getHighestUnacknowledgedBatchId() {
      return q.resolve(this.mutationQueue.length === 0 ? wu : this.Yn - 1);
    }
    getAllMutationBatches(e) {
      return q.resolve(this.mutationQueue.slice());
    }
    getAllMutationBatchesAffectingDocumentKey(e, t) {
      let n = new Q(t, 0),
        r = new Q(t, 1 / 0),
        i = [];
      return (
        this.Jr.forEachInRange([n, r], (e) => {
          let t = this.Zr(e.Hr);
          i.push(t);
        }),
        q.resolve(i)
      );
    }
    getAllMutationBatchesAffectingDocumentKeys(e, t) {
      let n = new Nu(U);
      return (
        t.forEach((e) => {
          let t = new Q(e, 0),
            r = new Q(e, 1 / 0);
          this.Jr.forEachInRange([t, r], (e) => {
            n = n.add(e.Hr);
          });
        }),
        q.resolve(this.Yr(n))
      );
    }
    getAllMutationBatchesAffectingQuery(e, t) {
      let n = t.path,
        r = n.length + 1,
        i = n;
      W.isDocumentKey(i) || (i = i.child(``));
      let a = new Q(new W(i), 0),
        o = new Nu(U);
      return (
        this.Jr.forEachWhile((e) => {
          let t = e.key.path;
          return !!n.isPrefixOf(t) && (t.length === r && (o = o.add(e.Hr)), !0);
        }, a),
        q.resolve(this.Yr(o))
      );
    }
    Yr(e) {
      let t = [];
      return (
        e.forEach((e) => {
          let n = this.Zr(e);
          n !== null && t.push(n);
        }),
        t
      );
    }
    removeMutationBatch(e, t) {
      (z(this.ei(t.batchId, `removed`) === 0, 55003), this.mutationQueue.shift());
      let n = this.Jr;
      return q
        .forEach(t.mutations, (r) => {
          let i = new Q(r.key, t.batchId);
          return ((n = n.delete(i)), this.referenceDelegate.markPotentiallyOrphaned(e, r.key));
        })
        .next(() => {
          this.Jr = n;
        });
    }
    nr(e) {}
    containsKey(e, t) {
      let n = new Q(t, 0),
        r = this.Jr.firstAfterOrEqual(n);
      return q.resolve(t.isEqual(r && r.key));
    }
    performConsistencyCheck(e) {
      return (this.mutationQueue.length, q.resolve());
    }
    ei(e, t) {
      return this.Xr(e);
    }
    Xr(e) {
      return this.mutationQueue.length === 0 ? 0 : e - this.mutationQueue[0].batchId;
    }
    Zr(e) {
      let t = this.Xr(e);
      return t < 0 || t >= this.mutationQueue.length ? null : this.mutationQueue[t];
    }
  },
  Cp = class {
    constructor(e) {
      ((this.ti = e),
        (this.docs = (function () {
          return new Au(W.comparator);
        })()),
        (this.size = 0));
    }
    setIndexManager(e) {
      this.indexManager = e;
    }
    addEntry(e, t) {
      let n = t.key,
        r = this.docs.get(n),
        i = r ? r.size : 0,
        a = this.ti(t);
      return (
        (this.docs = this.docs.insert(n, { document: t.mutableCopy(), size: a })),
        (this.size += a - i),
        this.indexManager.addToCollectionParentIndex(e, n.path.popLast())
      );
    }
    removeEntry(e) {
      let t = this.docs.get(e);
      t && ((this.docs = this.docs.remove(e)), (this.size -= t.size));
    }
    getEntry(e, t) {
      let n = this.docs.get(t);
      return q.resolve(n ? n.document.mutableCopy() : _d.newInvalidDocument(t));
    }
    getEntries(e, t) {
      let n = cf();
      return (
        t.forEach((e) => {
          let t = this.docs.get(e);
          n = n.insert(e, t ? t.document.mutableCopy() : _d.newInvalidDocument(e));
        }),
        q.resolve(n)
      );
    }
    getDocumentsMatchingQuery(e, t, n, r) {
      let i = cf(),
        a = t.path,
        o = new W(a.child(`__id-9223372036854775808__`)),
        s = this.docs.getIteratorFrom(o);
      for (; s.hasNext(); ) {
        let {
          key: e,
          value: { document: o },
        } = s.getNext();
        if (!a.isPrefixOf(e.path)) break;
        e.path.length > a.length + 1 ||
          yu(_u(o), n) <= 0 ||
          ((r.has(o.key) || nf(t, o)) && (i = i.insert(o.key, o.mutableCopy())));
      }
      return q.resolve(i);
    }
    getAllFromCollectionGroup(e, t, n, r) {
      R(9500);
    }
    ni(e, t) {
      return q.forEach(this.docs, (e) => t(e));
    }
    newChangeBuffer(e) {
      return new wp(this);
    }
    getSize(e) {
      return q.resolve(this.size);
    }
  },
  wp = class extends hp {
    constructor(e) {
      (super(), (this.Mr = e));
    }
    applyChanges(e) {
      let t = [];
      return (
        this.changes.forEach((n, r) => {
          r.isValidDocument() ? t.push(this.Mr.addEntry(e, r)) : this.Mr.removeEntry(n);
        }),
        q.waitFor(t)
      );
    }
    getFromCache(e, t) {
      return this.Mr.getEntry(e, t);
    }
    getAllFromCache(e, t) {
      return this.Mr.getEntries(e, t);
    }
  },
  Tp = class {
    constructor(e) {
      ((this.persistence = e),
        (this.ri = new of((e) => Vd(e), Hd)),
        (this.lastRemoteSnapshotVersion = K.min()),
        (this.highestTargetId = 0),
        (this.ii = 0),
        (this.si = new xp()),
        (this.targetCount = 0),
        (this.oi = pp._r()));
    }
    forEachTarget(e, t) {
      return (this.ri.forEach((e, n) => t(n)), q.resolve());
    }
    getLastRemoteSnapshotVersion(e) {
      return q.resolve(this.lastRemoteSnapshotVersion);
    }
    getHighestSequenceNumber(e) {
      return q.resolve(this.ii);
    }
    allocateTargetId(e) {
      return ((this.highestTargetId = this.oi.next()), q.resolve(this.highestTargetId));
    }
    setTargetsMetadata(e, t, n) {
      return (n && (this.lastRemoteSnapshotVersion = n), t > this.ii && (this.ii = t), q.resolve());
    }
    lr(e) {
      this.ri.set(e.target, e);
      let t = e.targetId;
      (t > this.highestTargetId && ((this.oi = new pp(t)), (this.highestTargetId = t)),
        e.sequenceNumber > this.ii && (this.ii = e.sequenceNumber));
    }
    addTargetData(e, t) {
      return (this.lr(t), (this.targetCount += 1), q.resolve());
    }
    updateTargetData(e, t) {
      return (this.lr(t), q.resolve());
    }
    removeTargetData(e, t) {
      return (this.ri.delete(t.target), this.si.Gr(t.targetId), --this.targetCount, q.resolve());
    }
    removeTargets(e, t, n) {
      let r = 0,
        i = [];
      return (
        this.ri.forEach((a, o) => {
          o.sequenceNumber <= t &&
            n.get(o.targetId) === null &&
            (this.ri.delete(a), i.push(this.removeMatchingKeysForTargetId(e, o.targetId)), r++);
        }),
        q.waitFor(i).next(() => r)
      );
    }
    getTargetCount(e) {
      return q.resolve(this.targetCount);
    }
    getTargetData(e, t) {
      let n = this.ri.get(t) || null;
      return q.resolve(n);
    }
    addMatchingKeys(e, t, n) {
      return (this.si.$r(t, n), q.resolve());
    }
    removeMatchingKeys(e, t, n) {
      this.si.Qr(t, n);
      let r = this.persistence.referenceDelegate,
        i = [];
      return (
        r &&
          t.forEach((t) => {
            i.push(r.markPotentiallyOrphaned(e, t));
          }),
        q.waitFor(i)
      );
    }
    removeMatchingKeysForTargetId(e, t) {
      return (this.si.Gr(t), q.resolve());
    }
    getMatchingKeysForTargetId(e, t) {
      let n = this.si.jr(t);
      return q.resolve(n);
    }
    containsKey(e, t) {
      return q.resolve(this.si.containsKey(t));
    }
  },
  Ep = class {
    constructor(e, t) {
      ((this._i = {}),
        (this.overlays = {}),
        (this.ai = new Cu(0)),
        (this.ui = !1),
        (this.ui = !0),
        (this.ci = new bp()),
        (this.referenceDelegate = e(this)),
        (this.li = new Tp(this)),
        (this.indexManager = new lp()),
        (this.remoteDocumentCache = (function (e) {
          return new Cp(e);
        })((e) => this.referenceDelegate.hi(e))),
        (this.serializer = new op(t)),
        (this.Pi = new vp(this.serializer)));
    }
    start() {
      return Promise.resolve();
    }
    shutdown() {
      return ((this.ui = !1), Promise.resolve());
    }
    get started() {
      return this.ui;
    }
    setDatabaseDeletedListener() {}
    setNetworkEnabled() {}
    getIndexManager(e) {
      return this.indexManager;
    }
    getDocumentOverlayCache(e) {
      let t = this.overlays[e.toKey()];
      return (t || ((t = new yp()), (this.overlays[e.toKey()] = t)), t);
    }
    getMutationQueue(e, t) {
      let n = this._i[e.toKey()];
      return (n || ((n = new Sp(t, this.referenceDelegate)), (this._i[e.toKey()] = n)), n);
    }
    getGlobalsCache() {
      return this.ci;
    }
    getTargetCache() {
      return this.li;
    }
    getRemoteDocumentCache() {
      return this.remoteDocumentCache;
    }
    getBundleCache() {
      return this.Pi;
    }
    runTransaction(e, t, n) {
      L(`MemoryPersistence`, `Starting transaction:`, e);
      let r = new Dp(this.ai.next());
      return (
        this.referenceDelegate.Ti(),
        n(r)
          .next((e) => this.referenceDelegate.Ii(r).next(() => e))
          .toPromise()
          .then((e) => (r.raiseOnCommittedEvent(), e))
      );
    }
    Ei(e, t) {
      return q.or(Object.values(this._i).map((n) => () => n.containsKey(e, t)));
    }
  },
  Dp = class extends bu {
    constructor(e) {
      (super(), (this.currentSequenceNumber = e));
    }
  },
  Op = class e {
    constructor(e) {
      ((this.persistence = e), (this.Ri = new xp()), (this.Ai = null));
    }
    static Vi(t) {
      return new e(t);
    }
    get di() {
      if (this.Ai) return this.Ai;
      throw R(60996);
    }
    addReference(e, t, n) {
      return (this.Ri.addReference(n, t), this.di.delete(n.toString()), q.resolve());
    }
    removeReference(e, t, n) {
      return (this.Ri.removeReference(n, t), this.di.add(n.toString()), q.resolve());
    }
    markPotentiallyOrphaned(e, t) {
      return (this.di.add(t.toString()), q.resolve());
    }
    removeTarget(e, t) {
      this.Ri.Gr(t.targetId).forEach((e) => this.di.add(e.toString()));
      let n = this.persistence.getTargetCache();
      return n
        .getMatchingKeysForTargetId(e, t.targetId)
        .next((e) => {
          e.forEach((e) => this.di.add(e.toString()));
        })
        .next(() => n.removeTargetData(e, t));
    }
    Ti() {
      this.Ai = new Set();
    }
    Ii(e) {
      let t = this.persistence.getRemoteDocumentCache().newChangeBuffer();
      return q
        .forEach(this.di, (n) => {
          let r = W.fromPath(n);
          return this.mi(e, r).next((e) => {
            e || t.removeEntry(r, K.min());
          });
        })
        .next(() => ((this.Ai = null), t.apply(e)));
    }
    updateLimboDocument(e, t) {
      return this.mi(e, t).next((e) => {
        e ? this.di.delete(t.toString()) : this.di.add(t.toString());
      });
    }
    hi(e) {
      return 0;
    }
    mi(e, t) {
      return q.or([
        () => q.resolve(this.Ri.containsKey(t)),
        () => this.persistence.getTargetCache().containsKey(e, t),
        () => this.persistence.Ei(e, t),
      ]);
    }
  },
  kp = class e {
    constructor(e, t, n, r) {
      ((this.targetId = e), (this.fromCache = t), (this.Ts = n), (this.Is = r));
    }
    static Es(t, n) {
      let r = gf(),
        i = gf();
      for (let e of n.docChanges)
        switch (e.type) {
          case 0:
            r = r.add(e.doc.key);
            break;
          case 1:
            i = i.add(e.doc.key);
        }
      return new e(t, n.fromCache, r, i);
    }
  },
  Ap = class {
    constructor() {
      this._documentReadCount = 0;
    }
    get documentReadCount() {
      return this._documentReadCount;
    }
    incrementDocumentReadCount(e) {
      this._documentReadCount += e;
    }
  },
  jp = class {
    constructor() {
      ((this.Rs = !1),
        (this.As = !1),
        (this.Vs = 100),
        (this.ds = (function () {
          return me() ? 8 : xu(_()) > 0 ? 6 : 4;
        })()));
    }
    initialize(e, t) {
      ((this.fs = e), (this.indexManager = t), (this.Rs = !0));
    }
    getDocumentsMatchingQuery(e, t, n, r) {
      let i = { result: null };
      return this.gs(e, t)
        .next((e) => {
          i.result = e;
        })
        .next(() => {
          if (!i.result)
            return this.ps(e, t, r, n).next((e) => {
              i.result = e;
            });
        })
        .next(() => {
          if (i.result) return;
          let n = new Ap();
          return this.ys(e, t, n).next((r) => {
            if (((i.result = r), this.As)) return this.ws(e, t, n, r.size);
          });
        })
        .next(() => i.result);
    }
    ws(e, t, n, r) {
      return n.documentReadCount < this.Vs
        ? (Pl() <= S.DEBUG &&
            L(
              `QueryEngine`,
              `SDK will not create cache indexes for query:`,
              tf(t),
              `since it only creates cache indexes for collection contains`,
              `more than or equal to`,
              this.Vs,
              `documents`
            ),
          q.resolve())
        : (Pl() <= S.DEBUG &&
            L(
              `QueryEngine`,
              `Query:`,
              tf(t),
              `scans`,
              n.documentReadCount,
              `local documents and returns`,
              r,
              `documents as results.`
            ),
          n.documentReadCount > this.ds * r
            ? (Pl() <= S.DEBUG &&
                L(
                  `QueryEngine`,
                  `The SDK decides to create cache indexes for query:`,
                  tf(t),
                  `as using cache indexes may help improve performance.`
                ),
              this.indexManager.createTargetIndexes(e, Xd(t)))
            : q.resolve());
    }
    gs(e, t) {
      if (Kd(t)) return q.resolve(null);
      let n = Xd(t);
      return this.indexManager.getIndexType(e, n).next((r) =>
        r === 0
          ? null
          : (t.limit !== null && r === 1 && ((t = Qd(t, null, `F`)), (n = Xd(t))),
            this.indexManager.getDocumentsMatchingTarget(e, n).next((r) => {
              let i = gf(...r);
              return this.fs.getDocuments(e, i).next((r) =>
                this.indexManager.getMinOffset(e, n).next((n) => {
                  let a = this.bs(t, r);
                  return this.Ss(t, a, i, n.readTime)
                    ? this.gs(e, Qd(t, null, `F`))
                    : this.Ds(e, a, t, n);
                })
              );
            }))
      );
    }
    ps(e, t, n, r) {
      return Kd(t) || r.isEqual(K.min())
        ? q.resolve(null)
        : this.fs.getDocuments(e, n).next((i) => {
            let a = this.bs(t, i);
            return this.Ss(t, a, n, r)
              ? q.resolve(null)
              : (Pl() <= S.DEBUG &&
                  L(
                    `QueryEngine`,
                    `Re-using previous result from %s to execute query: %s`,
                    r.toString(),
                    tf(t)
                  ),
                this.Ds(e, a, t, gu(r, mu)).next((e) => e));
          });
    }
    bs(e, t) {
      let n = new Nu(rf(e));
      return (
        t.forEach((t, r) => {
          nf(e, r) && (n = n.add(r));
        }),
        n
      );
    }
    Ss(e, t, n, r) {
      if (e.limit === null) return !1;
      if (n.size !== t.size) return !0;
      let i = e.limitType === `F` ? t.last() : t.first();
      return !!i && (i.hasPendingWrites || i.version.compareTo(r) > 0);
    }
    ys(e, t, n) {
      return (
        Pl() <= S.DEBUG && L(`QueryEngine`, `Using full collection scan to execute query:`, tf(t)),
        this.fs.getDocumentsMatchingQuery(e, t, vu.min(), n)
      );
    }
    Ds(e, t, n, r) {
      return this.fs.getDocumentsMatchingQuery(e, n, r).next(
        (e) => (
          t.forEach((t) => {
            e = e.insert(t.key, t);
          }),
          e
        )
      );
    }
  },
  Mp = `LocalStore`,
  Np = class {
    constructor(e, t, n, r) {
      ((this.persistence = e),
        (this.Cs = t),
        (this.serializer = r),
        (this.vs = new Au(U)),
        (this.Fs = new of((e) => Vd(e), Hd)),
        (this.Ms = new Map()),
        (this.xs = e.getRemoteDocumentCache()),
        (this.li = e.getTargetCache()),
        (this.Pi = e.getBundleCache()),
        this.Os(n));
    }
    Os(e) {
      ((this.documentOverlayCache = this.persistence.getDocumentOverlayCache(e)),
        (this.indexManager = this.persistence.getIndexManager(e)),
        (this.mutationQueue = this.persistence.getMutationQueue(e, this.indexManager)),
        (this.localDocuments = new _p(
          this.xs,
          this.mutationQueue,
          this.documentOverlayCache,
          this.indexManager
        )),
        this.xs.setIndexManager(this.indexManager),
        this.Cs.initialize(this.localDocuments, this.indexManager));
    }
    collectGarbage(e) {
      return this.persistence.runTransaction(`Collect garbage`, `readwrite-primary`, (t) =>
        e.collect(t, this.vs)
      );
    }
  };
function Pp(e, t, n, r) {
  return new Np(e, t, n, r);
}
async function Fp(e, t) {
  let n = B(e);
  return await n.persistence.runTransaction(`Handle user change`, `readonly`, (e) => {
    let r;
    return n.mutationQueue
      .getAllMutationBatches(e)
      .next((i) => ((r = i), n.Os(t), n.mutationQueue.getAllMutationBatches(e)))
      .next((t) => {
        let i = [],
          a = [],
          o = gf();
        for (let e of r) {
          i.push(e.batchId);
          for (let t of e.mutations) o = o.add(t.key);
        }
        for (let e of t) {
          a.push(e.batchId);
          for (let t of e.mutations) o = o.add(t.key);
        }
        return n.localDocuments
          .getDocuments(e, o)
          .next((e) => ({ Ns: e, removedBatchIds: i, addedBatchIds: a }));
      });
  });
}
var Ip = class {
    constructor() {
      this.activeTargetIds = vf();
    }
    Qs(e) {
      this.activeTargetIds = this.activeTargetIds.add(e);
    }
    Gs(e) {
      this.activeTargetIds = this.activeTargetIds.delete(e);
    }
    Ws() {
      let e = { activeTargetIds: this.activeTargetIds.toArray(), updateTimeMs: Date.now() };
      return JSON.stringify(e);
    }
  },
  Lp = class {
    constructor() {
      ((this.vo = new Ip()),
        (this.Fo = {}),
        (this.onlineStateHandler = null),
        (this.sequenceNumberHandler = null));
    }
    addPendingMutation(e) {}
    updateMutationState(e, t, n) {}
    addLocalQueryTarget(e, t = !0) {
      return (t && this.vo.Qs(e), this.Fo[e] || `not-current`);
    }
    updateQueryState(e, t, n) {
      this.Fo[e] = t;
    }
    removeLocalQueryTarget(e) {
      this.vo.Gs(e);
    }
    isLocalQueryTarget(e) {
      return this.vo.activeTargetIds.has(e);
    }
    clearQueryState(e) {
      delete this.Fo[e];
    }
    getAllActiveQueryTargets() {
      return this.vo.activeTargetIds;
    }
    isActiveQueryTarget(e) {
      return this.vo.activeTargetIds.has(e);
    }
    start() {
      return ((this.vo = new Ip()), Promise.resolve());
    }
    handleUserChange(e, t, n) {}
    setOnlineState(e) {}
    shutdown() {}
    writeSequenceNumber(e) {}
    notifyBundleLoaded(e) {}
  },
  Rp = class {
    Mo(e) {}
    shutdown() {}
  },
  zp = `ConnectivityMonitor`,
  Bp = class {
    constructor() {
      ((this.xo = () => this.Oo()), (this.No = () => this.Bo()), (this.Lo = []), this.ko());
    }
    Mo(e) {
      this.Lo.push(e);
    }
    shutdown() {
      (window.removeEventListener(`online`, this.xo),
        window.removeEventListener(`offline`, this.No));
    }
    ko() {
      (window.addEventListener(`online`, this.xo), window.addEventListener(`offline`, this.No));
    }
    Oo() {
      L(zp, `Network connectivity changed: AVAILABLE`);
      for (let e of this.Lo) e(0);
    }
    Bo() {
      L(zp, `Network connectivity changed: UNAVAILABLE`);
      for (let e of this.Lo) e(1);
    }
    static v() {
      return (
        typeof window < `u` &&
        window.addEventListener !== void 0 &&
        window.removeEventListener !== void 0
      );
    }
  },
  Vp = null;
function Hp() {
  return (
    Vp === null
      ? (Vp = (function () {
          return 268435456 + Math.round(2147483648 * Math.random());
        })())
      : Vp++,
    `0x` + Vp.toString(16)
  );
}
var Up = `RestConnection`,
  Wp = {
    BatchGetDocuments: `batchGet`,
    Commit: `commit`,
    RunQuery: `runQuery`,
    RunAggregationQuery: `runAggregationQuery`,
    ExecutePipeline: `executePipeline`,
  },
  Gp = class {
    get Ko() {
      return !1;
    }
    constructor(e) {
      ((this.databaseInfo = e), (this.databaseId = e.databaseId));
      let t = e.ssl ? `https` : `http`,
        n = encodeURIComponent(this.databaseId.projectId),
        r = encodeURIComponent(this.databaseId.database);
      ((this.qo = t + `://` + e.host),
        (this.Uo = `projects/${n}/databases/${r}`),
        (this.$o =
          this.databaseId.database === Ju
            ? `project_id=${n}`
            : `project_id=${n}&database_id=${r}`));
    }
    Wo(e, t, n, r, i) {
      let a = Hp(),
        o = this.Qo(e, t.toUriEncodedString());
      L(Up, `Sending RPC '${e}' ${a}:`, o, n);
      let s = { "google-cloud-resource-prefix": this.Uo, "x-goog-request-params": this.$o };
      this.Go(s, r, i);
      let { host: c } = new URL(o),
        l = te(c);
      return this.zo(e, o, s, n, l).then(
        (t) => (L(Up, `Received RPC '${e}' ${a}: `, t), t),
        (t) => {
          throw (Il(Up, `RPC '${e}' ${a} failed with error: `, t, `url: `, o, `request:`, n), t);
        }
      );
    }
    jo(e, t, n, r, i, a) {
      return this.Wo(e, t, n, r, i);
    }
    Go(e, t, n) {
      ((e[`X-Goog-Api-Client`] = (function () {
        return `gl-js/ fire/` + jl;
      })()),
        (e[`Content-Type`] = `text/plain`),
        this.databaseInfo.appId && (e[`X-Firebase-GMPID`] = this.databaseInfo.appId),
        t && t.headers.forEach((t, n) => (e[n] = t)),
        n && n.headers.forEach((t, n) => (e[n] = t)));
    }
    Qo(e, t) {
      let n = Wp[e],
        r = `${this.qo}/v1/${t}:${n}`;
      return (
        this.databaseInfo.apiKey &&
          (r = `${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),
        r
      );
    }
    terminate() {}
  },
  Kp = class {
    constructor(e) {
      ((this.Ho = e.Ho), (this.Jo = e.Jo));
    }
    Zo(e) {
      this.Xo = e;
    }
    Yo(e) {
      this.e_ = e;
    }
    t_(e) {
      this.n_ = e;
    }
    onMessage(e) {
      this.r_ = e;
    }
    close() {
      this.Jo();
    }
    send(e) {
      this.Ho(e);
    }
    i_() {
      this.Xo();
    }
    s_() {
      this.e_();
    }
    o_(e) {
      this.n_(e);
    }
    __(e) {
      this.r_(e);
    }
  },
  $ = `WebChannelConnection`,
  qp = (e, t, n) => {
    e.listen(t, (e) => {
      try {
        n(e);
      } catch (e) {
        setTimeout(() => {
          throw e;
        }, 0);
      }
    });
  },
  Jp = class e extends Gp {
    constructor(e) {
      (super(e),
        (this.a_ = []),
        (this.forceLongPolling = e.forceLongPolling),
        (this.autoDetectLongPolling = e.autoDetectLongPolling),
        (this.useFetchStreams = e.useFetchStreams),
        (this.longPollingOptions = e.longPollingOptions));
    }
    static u_() {
      e.c_ ||=
        (qp(kl(), Ol.STAT_EVENT, (e) => {
          e.stat === Dl.PROXY
            ? L($, `STAT_EVENT: detected buffering proxy`)
            : e.stat === Dl.NOPROXY && L($, `STAT_EVENT: detected no buffering proxy`);
        }),
        !0);
    }
    zo(e, t, n, r, i) {
      let a = Hp();
      return new Promise((i, o) => {
        let s = new Cl();
        (s.setWithCredentials(!0),
          s.listenOnce(Tl.COMPLETE, () => {
            try {
              switch (s.getLastErrorCode()) {
                case El.NO_ERROR:
                  let t = s.getResponseJson();
                  (L($, `XHR for RPC '${e}' ${a} received:`, JSON.stringify(t)), i(t));
                  break;
                case El.TIMEOUT:
                  (L($, `RPC '${e}' ${a} timed out`),
                    o(new H(V.DEADLINE_EXCEEDED, `Request time out`)));
                  break;
                case El.HTTP_ERROR:
                  let n = s.getStatus();
                  if (
                    (L(
                      $,
                      `RPC '${e}' ${a} failed with status:`,
                      n,
                      `response text:`,
                      s.getResponseText()
                    ),
                    n > 0)
                  ) {
                    let e = s.getResponseJson();
                    Array.isArray(e) && (e = e[0]);
                    let t = e?.error;
                    t && t.status && t.message
                      ? o(
                          new H(
                            (function (e) {
                              let t = e.toLowerCase().replace(/_/g, `-`);
                              return Object.values(V).indexOf(t) >= 0 ? t : V.UNKNOWN;
                            })(t.status),
                            t.message
                          )
                        )
                      : o(new H(V.UNKNOWN, `Server responded with status ` + s.getStatus()));
                  } else o(new H(V.UNAVAILABLE, `Connection failed.`));
                  break;
                default:
                  R(9055, { l_: e, streamId: a, h_: s.getLastErrorCode(), P_: s.getLastError() });
              }
            } finally {
              L($, `RPC '${e}' ${a} completed.`);
            }
          }));
        let c = JSON.stringify(r);
        (L($, `RPC '${e}' ${a} sending request:`, r), s.send(t, `POST`, c, n, 15));
      });
    }
    T_(t, n, r) {
      let i = Hp(),
        a = [this.qo, `/`, `google.firestore.v1.Firestore`, `/`, t, `/channel`],
        o = this.createWebChannelTransport(),
        s = {
          httpSessionIdParam: `gsessionid`,
          initMessageHeaders: {},
          messageUrlParams: {
            database: `projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`,
          },
          sendRawJson: !0,
          supportsCrossDomainXhr: !0,
          internalChannelParams: { forwardChannelRequestTimeoutMs: 6e5 },
          forceLongPolling: this.forceLongPolling,
          detectBufferingProxy: this.autoDetectLongPolling,
        },
        c = this.longPollingOptions.timeoutSeconds;
      (c !== void 0 && (s.longPollingTimeout = Math.round(1e3 * c)),
        this.useFetchStreams && (s.useFetchStreams = !0),
        this.Go(s.initMessageHeaders, n, r),
        (s.encodeInitMessageHeaders = !0));
      let l = a.join(``);
      L($, `Creating RPC '${t}' stream ${i}: ${l}`, s);
      let u = o.createWebChannel(l, s);
      this.I_(u);
      let d = !1,
        f = !1,
        p = new Kp({
          Ho: (e) => {
            f
              ? L($, `Not sending because RPC '${t}' stream ${i} is closed:`, e)
              : ((d ||= (L($, `Opening RPC '${t}' stream ${i} transport.`), u.open(), !0)),
                L($, `RPC '${t}' stream ${i} sending:`, e),
                u.send(e));
          },
          Jo: () => u.close(),
        });
      return (
        qp(u, wl.EventType.OPEN, () => {
          f || (L($, `RPC '${t}' stream ${i} transport opened.`), p.i_());
        }),
        qp(u, wl.EventType.CLOSE, () => {
          f || ((f = !0), L($, `RPC '${t}' stream ${i} transport closed`), p.o_(), this.E_(u));
        }),
        qp(u, wl.EventType.ERROR, (e) => {
          f ||
            ((f = !0),
            Il($, `RPC '${t}' stream ${i} transport errored. Name:`, e.name, `Message:`, e.message),
            p.o_(new H(V.UNAVAILABLE, `The operation could not be completed`)));
        }),
        qp(u, wl.EventType.MESSAGE, (e) => {
          if (!f) {
            let n = e.data[0];
            z(!!n, 16349);
            let r = n,
              a = r?.error || r[0]?.error;
            if (a) {
              L($, `RPC '${t}' stream ${i} received error:`, a);
              let e = a.status,
                n = (function (e) {
                  let t = X[e];
                  if (t !== void 0) return Yf(t);
                })(e),
                r = a.message;
              (n === void 0 &&
                ((n = V.INTERNAL),
                (r = `Unknown error status: ` + e + ` with message ` + a.message)),
                (f = !0),
                p.o_(new H(n, r)),
                u.close());
            } else (L($, `RPC '${t}' stream ${i} received:`, n), p.__(n));
          }
        }),
        e.u_(),
        setTimeout(() => {
          p.s_();
        }, 0),
        p
      );
    }
    terminate() {
      (this.a_.forEach((e) => e.close()), (this.a_ = []));
    }
    I_(e) {
      this.a_.push(e);
    }
    E_(e) {
      this.a_ = this.a_.filter((t) => t === e);
    }
    Go(e, t, n) {
      (super.Go(e, t, n),
        this.databaseInfo.apiKey && (e[`x-goog-api-key`] = this.databaseInfo.apiKey));
    }
    createWebChannelTransport() {
      return Al();
    }
  };
function Yp(e) {
  return new Jp(e);
}
function Xp() {
  return typeof document < `u` ? document : null;
}
function Zp(e) {
  return new Xf(e, !0);
}
Jp.c_ = !1;
var Qp = class {
    constructor(e, t, n = 1e3, r = 1.5, i = 6e4) {
      ((this.Ci = e),
        (this.timerId = t),
        (this.R_ = n),
        (this.A_ = r),
        (this.V_ = i),
        (this.d_ = 0),
        (this.m_ = null),
        (this.f_ = Date.now()),
        this.reset());
    }
    reset() {
      this.d_ = 0;
    }
    g_() {
      this.d_ = this.V_;
    }
    p_(e) {
      this.cancel();
      let t = Math.floor(this.d_ + this.y_()),
        n = Math.max(0, Date.now() - this.f_),
        r = Math.max(0, t - n);
      (r > 0 &&
        L(
          `ExponentialBackoff`,
          `Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`
        ),
        (this.m_ = this.Ci.enqueueAfterDelay(this.timerId, r, () => ((this.f_ = Date.now()), e()))),
        (this.d_ *= this.A_),
        this.d_ < this.R_ && (this.d_ = this.R_),
        this.d_ > this.V_ && (this.d_ = this.V_));
    }
    w_() {
      this.m_ !== null && (this.m_.skipDelay(), (this.m_ = null));
    }
    cancel() {
      this.m_ !== null && (this.m_.cancel(), (this.m_ = null));
    }
    y_() {
      return (Math.random() - 0.5) * this.d_;
    }
  },
  $p = class {},
  em = class extends $p {
    constructor(e, t, n, r) {
      (super(),
        (this.authCredentials = e),
        (this.appCheckCredentials = t),
        (this.connection = n),
        (this.serializer = r),
        (this.ia = !1));
    }
    sa() {
      if (this.ia) throw new H(V.FAILED_PRECONDITION, `The client has already been terminated.`);
    }
    Wo(e, t, n, r) {
      return (
        this.sa(),
        Promise.all([this.authCredentials.getToken(), this.appCheckCredentials.getToken()])
          .then(([i, a]) => this.connection.Wo(e, Qf(t, n), r, i, a))
          .catch((e) => {
            throw e.name === `FirebaseError`
              ? (e.code === V.UNAUTHENTICATED &&
                  (this.authCredentials.invalidateToken(),
                  this.appCheckCredentials.invalidateToken()),
                e)
              : new H(V.UNKNOWN, e.toString());
          })
      );
    }
    jo(e, t, n, r, i) {
      return (
        this.sa(),
        Promise.all([this.authCredentials.getToken(), this.appCheckCredentials.getToken()])
          .then(([a, o]) => this.connection.jo(e, Qf(t, n), r, a, o, i))
          .catch((e) => {
            throw e.name === `FirebaseError`
              ? (e.code === V.UNAUTHENTICATED &&
                  (this.authCredentials.invalidateToken(),
                  this.appCheckCredentials.invalidateToken()),
                e)
              : new H(V.UNKNOWN, e.toString());
          })
      );
    }
    terminate() {
      ((this.ia = !0), this.connection.terminate());
    }
  };
function tm(e, t, n, r) {
  return new em(e, t, n, r);
}
var nm = class {
    constructor(e, t) {
      ((this.asyncQueue = e),
        (this.onlineStateHandler = t),
        (this.state = `Unknown`),
        (this.oa = 0),
        (this._a = null),
        (this.aa = !0));
    }
    ua() {
      this.oa === 0 &&
        (this.ca(`Unknown`),
        (this._a = this.asyncQueue.enqueueAfterDelay(
          `online_state_timeout`,
          1e4,
          () => (
            (this._a = null),
            this.la(`Backend didn't respond within 10 seconds.`),
            this.ca(`Offline`),
            Promise.resolve()
          )
        )));
    }
    ha(e) {
      this.state === `Online`
        ? this.ca(`Unknown`)
        : (this.oa++,
          this.oa >= 1 &&
            (this.Pa(),
            this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),
            this.ca(`Offline`)));
    }
    set(e) {
      (this.Pa(), (this.oa = 0), e === `Online` && (this.aa = !1), this.ca(e));
    }
    ca(e) {
      e !== this.state && ((this.state = e), this.onlineStateHandler(e));
    }
    la(e) {
      let t = `Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;
      this.aa ? (Fl(t), (this.aa = !1)) : L(`OnlineStateTracker`, t);
    }
    Pa() {
      this._a !== null && (this._a.cancel(), (this._a = null));
    }
  },
  rm = `RemoteStore`,
  im = class {
    constructor(e, t, n, r, i) {
      ((this.localStore = e),
        (this.datastore = t),
        (this.asyncQueue = n),
        (this.remoteSyncer = {}),
        (this.Ta = []),
        (this.Ia = new Map()),
        (this.Ea = new Set()),
        (this.Ra = []),
        (this.Aa = i),
        this.Aa.Mo((e) => {
          n.enqueueAndForget(async () => {
            sm(this) &&
              (L(rm, `Restarting streams for network reachability change.`),
              await (async function (e) {
                let t = B(e);
                (t.Ea.add(4), await om(t), t.Va.set(`Unknown`), t.Ea.delete(4), await am(t));
              })(this));
          });
        }),
        (this.Va = new nm(n, r)));
    }
  };
async function am(e) {
  if (sm(e)) for (let t of e.Ra) await t(!0);
}
async function om(e) {
  for (let t of e.Ra) await t(!1);
}
function sm(e) {
  return B(e).Ea.size === 0;
}
async function cm(e, t) {
  let n = B(e);
  t ? (n.Ea.delete(2), await am(n)) : t || (n.Ea.add(2), await om(n), n.Va.set(`Unknown`));
}
var lm = class e {
    constructor(e, t, n, r, i) {
      ((this.asyncQueue = e),
        (this.timerId = t),
        (this.targetTimeMs = n),
        (this.op = r),
        (this.removalCallback = i),
        (this.deferred = new zl()),
        (this.then = this.deferred.promise.then.bind(this.deferred.promise)),
        this.deferred.promise.catch((e) => {}));
    }
    get promise() {
      return this.deferred.promise;
    }
    static createAndSchedule(t, n, r, i, a) {
      let o = new e(t, n, Date.now() + r, i, a);
      return (o.start(r), o);
    }
    start(e) {
      this.timerHandle = setTimeout(() => this.handleDelayElapsed(), e);
    }
    skipDelay() {
      return this.handleDelayElapsed();
    }
    cancel(e) {
      this.timerHandle !== null &&
        (this.clearTimeout(),
        this.deferred.reject(new H(V.CANCELLED, `Operation cancelled` + (e ? `: ` + e : ``))));
    }
    handleDelayElapsed() {
      this.asyncQueue.enqueueAndForget(() =>
        this.timerHandle === null
          ? Promise.resolve()
          : (this.clearTimeout(), this.op().then((e) => this.deferred.resolve(e)))
      );
    }
    clearTimeout() {
      this.timerHandle !== null &&
        (this.removalCallback(this), clearTimeout(this.timerHandle), (this.timerHandle = null));
    }
  },
  um = class {
    constructor() {
      ((this.queries = dm()), (this.onlineState = `Unknown`), (this.Ca = new Set()));
    }
    terminate() {
      (function (e, t) {
        let n = B(e),
          r = n.queries;
        ((n.queries = dm()),
          r.forEach((e, n) => {
            for (let e of n.ba) e.onError(t);
          }));
      })(this, new H(V.ABORTED, `Firestore shutting down`));
    }
  };
function dm() {
  return new of((e) => ef(e), $d);
}
function fm(e) {
  e.Ca.forEach((e) => {
    e.next();
  });
}
var pm, mm;
(((mm = pm ||= {}).Ma = `default`), (mm.Cache = `cache`));
var hm = `SyncEngine`,
  gm = class {
    constructor(e, t, n, r, i, a) {
      ((this.localStore = e),
        (this.remoteStore = t),
        (this.eventManager = n),
        (this.sharedClientState = r),
        (this.currentUser = i),
        (this.maxConcurrentLimboResolutions = a),
        (this.Pu = {}),
        (this.Tu = new of((e) => ef(e), $d)),
        (this.Iu = new Map()),
        (this.Eu = new Set()),
        (this.Ru = new Au(W.comparator)),
        (this.Au = new Map()),
        (this.Vu = new xp()),
        (this.du = {}),
        (this.mu = new Map()),
        (this.fu = pp.ar()),
        (this.onlineState = `Unknown`),
        (this.gu = void 0));
    }
    get isPrimaryClient() {
      return !0 === this.gu;
    }
  };
function _m(e, t, n) {
  let r = B(e);
  if ((r.isPrimaryClient && n === 0) || (!r.isPrimaryClient && n === 1)) {
    let e = [];
    (r.Tu.forEach((n, r) => {
      let i = r.view.va(t);
      i.snapshot && e.push(i.snapshot);
    }),
      (function (e, t) {
        let n = B(e);
        n.onlineState = t;
        let r = !1;
        (n.queries.forEach((e, n) => {
          for (let e of n.ba) e.va(t) && (r = !0);
        }),
          r && fm(n));
      })(r.eventManager, t),
      e.length && r.Pu.J_(e),
      (r.onlineState = t),
      r.isPrimaryClient && r.sharedClientState.setOnlineState(t));
  }
}
async function vm(e, t, n) {
  let r = B(e),
    i = [],
    a = [],
    o = [];
  r.Tu.isEmpty() ||
    (r.Tu.forEach((e, s) => {
      o.push(
        r.pu(s, t, n).then((e) => {
          if ((e || n) && r.isPrimaryClient) {
            let t = e ? !e.fromCache : n?.targetChanges.get(s.targetId)?.current;
            r.sharedClientState.updateQueryState(s.targetId, t ? `current` : `not-current`);
          }
          if (e) {
            i.push(e);
            let t = kp.Es(s.targetId, e);
            a.push(t);
          }
        })
      );
    }),
    await Promise.all(o),
    r.Pu.J_(i),
    await (async function (e, t) {
      let n = B(e);
      try {
        await n.persistence.runTransaction(`notifyLocalViewChanges`, `readwrite`, (e) =>
          q.forEach(t, (t) =>
            q
              .forEach(t.Ts, (r) => n.persistence.referenceDelegate.addReference(e, t.targetId, r))
              .next(() =>
                q.forEach(t.Is, (r) =>
                  n.persistence.referenceDelegate.removeReference(e, t.targetId, r)
                )
              )
          )
        );
      } catch (e) {
        if (!Su(e)) throw e;
        L(Mp, `Failed to update sequence numbers: ` + e);
      }
      for (let e of t) {
        let t = e.targetId;
        if (!e.fromCache) {
          let e = n.vs.get(t),
            r = e.snapshotVersion,
            i = e.withLastLimboFreeSnapshotVersion(r);
          n.vs = n.vs.insert(t, i);
        }
      }
    })(r.localStore, a));
}
async function ym(e, t) {
  let n = B(e);
  if (!n.currentUser.isEqual(t)) {
    L(hm, `User change. New user:`, t.toKey());
    let e = await Fp(n.localStore, t);
    ((n.currentUser = t),
      (function (e, t) {
        (e.mu.forEach((e) => {
          e.forEach((e) => {
            e.reject(new H(V.CANCELLED, t));
          });
        }),
          e.mu.clear());
      })(n, `'waitForPendingWrites' promise is rejected due to a user change.`),
      n.sharedClientState.handleUserChange(t, e.removedBatchIds, e.addedBatchIds),
      await vm(n, e.Ns));
  }
}
var bm = class {
  constructor() {
    ((this.kind = `memory`), (this.synchronizeTabs = !1));
  }
  async initialize(e) {
    ((this.serializer = Zp(e.databaseInfo.databaseId)),
      (this.sharedClientState = this.Du(e)),
      (this.persistence = this.Cu(e)),
      await this.persistence.start(),
      (this.localStore = this.vu(e)),
      (this.gcScheduler = this.Fu(e, this.localStore)),
      (this.indexBackfillerScheduler = this.Mu(e, this.localStore)));
  }
  Fu(e, t) {
    return null;
  }
  Mu(e, t) {
    return null;
  }
  vu(e) {
    return Pp(this.persistence, new jp(), e.initialUser, this.serializer);
  }
  Cu(e) {
    return new Ep(Op.Vi, this.serializer);
  }
  Du(e) {
    return new Lp();
  }
  async terminate() {
    (this.gcScheduler?.stop(),
      this.indexBackfillerScheduler?.stop(),
      this.sharedClientState.shutdown(),
      await this.persistence.shutdown());
  }
};
bm.provider = { build: () => new bm() };
var xm = class {
  async initialize(e, t) {
    this.localStore ||
      ((this.localStore = e.localStore),
      (this.sharedClientState = e.sharedClientState),
      (this.datastore = this.createDatastore(t)),
      (this.remoteStore = this.createRemoteStore(t)),
      (this.eventManager = this.createEventManager(t)),
      (this.syncEngine = this.createSyncEngine(t, !e.synchronizeTabs)),
      (this.sharedClientState.onlineStateHandler = (e) => _m(this.syncEngine, e, 1)),
      (this.remoteStore.remoteSyncer.handleCredentialChange = ym.bind(null, this.syncEngine)),
      await cm(this.remoteStore, this.syncEngine.isPrimaryClient));
  }
  createEventManager(e) {
    return (function () {
      return new um();
    })();
  }
  createDatastore(e) {
    let t = Zp(e.databaseInfo.databaseId),
      n = Yp(e.databaseInfo);
    return tm(e.authCredentials, e.appCheckCredentials, n, t);
  }
  createRemoteStore(e) {
    return (function (e, t, n, r, i) {
      return new im(e, t, n, r, i);
    })(
      this.localStore,
      this.datastore,
      e.asyncQueue,
      (e) => _m(this.syncEngine, e, 0),
      (function () {
        return Bp.v() ? new Bp() : new Rp();
      })()
    );
  }
  createSyncEngine(e, t) {
    return (function (e, t, n, r, i, a, o) {
      let s = new gm(e, t, n, r, i, a);
      return (o && (s.gu = !0), s);
    })(
      this.localStore,
      this.remoteStore,
      this.eventManager,
      this.sharedClientState,
      e.initialUser,
      e.maxConcurrentLimboResolutions,
      t
    );
  }
  async terminate() {
    (await (async function (e) {
      let t = B(e);
      (L(rm, `RemoteStore shutting down.`),
        t.Ea.add(5),
        await om(t),
        t.Aa.shutdown(),
        t.Va.set(`Unknown`));
    })(this.remoteStore),
      this.datastore?.terminate(),
      this.eventManager?.terminate());
  }
};
xm.provider = { build: () => new xm() };
function Sm(e) {
  let t = {};
  return (e.timeoutSeconds !== void 0 && (t.timeoutSeconds = e.timeoutSeconds), t);
}
var Cm = `ComponentProvider`,
  wm = new Map(),
  Tm = `firestore.googleapis.com`,
  Em = !0,
  Dm = class {
    constructor(e) {
      if (e.host === void 0) {
        if (e.ssl !== void 0)
          throw new H(V.INVALID_ARGUMENT, `Can't provide ssl option if host option is not set`);
        ((this.host = Tm), (this.ssl = Em));
      } else ((this.host = e.host), (this.ssl = e.ssl ?? Em));
      if (
        ((this.isUsingEmulator = e.emulatorOptions !== void 0),
        (this.credentials = e.credentials),
        (this.ignoreUndefinedProperties = !!e.ignoreUndefinedProperties),
        (this.localCache = e.localCache),
        e.cacheSizeBytes === void 0)
      )
        this.cacheSizeBytes = dp;
      else {
        if (e.cacheSizeBytes !== -1 && e.cacheSizeBytes < mp)
          throw new H(V.INVALID_ARGUMENT, `cacheSizeBytes must be at least 1048576`);
        this.cacheSizeBytes = e.cacheSizeBytes;
      }
      (ou(
        `experimentalForceLongPolling`,
        e.experimentalForceLongPolling,
        `experimentalAutoDetectLongPolling`,
        e.experimentalAutoDetectLongPolling
      ),
        (this.experimentalForceLongPolling = !!e.experimentalForceLongPolling),
        this.experimentalForceLongPolling
          ? (this.experimentalAutoDetectLongPolling = !1)
          : e.experimentalAutoDetectLongPolling === void 0
            ? (this.experimentalAutoDetectLongPolling = !0)
            : (this.experimentalAutoDetectLongPolling = !!e.experimentalAutoDetectLongPolling),
        (this.experimentalLongPollingOptions = Sm(e.experimentalLongPollingOptions ?? {})),
        (function (e) {
          if (e.timeoutSeconds !== void 0) {
            if (isNaN(e.timeoutSeconds))
              throw new H(
                V.INVALID_ARGUMENT,
                `invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`
              );
            if (e.timeoutSeconds < 5)
              throw new H(
                V.INVALID_ARGUMENT,
                `invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`
              );
            if (e.timeoutSeconds > 30)
              throw new H(
                V.INVALID_ARGUMENT,
                `invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`
              );
          }
        })(this.experimentalLongPollingOptions),
        (this.useFetchStreams = !!e.useFetchStreams));
    }
    isEqual(e) {
      return (
        this.host === e.host &&
        this.ssl === e.ssl &&
        this.credentials === e.credentials &&
        this.cacheSizeBytes === e.cacheSizeBytes &&
        this.experimentalForceLongPolling === e.experimentalForceLongPolling &&
        this.experimentalAutoDetectLongPolling === e.experimentalAutoDetectLongPolling &&
        (function (e, t) {
          return e.timeoutSeconds === t.timeoutSeconds;
        })(this.experimentalLongPollingOptions, e.experimentalLongPollingOptions) &&
        this.ignoreUndefinedProperties === e.ignoreUndefinedProperties &&
        this.useFetchStreams === e.useFetchStreams
      );
    }
  },
  Om = class {
    constructor(e, t, n, r) {
      ((this._authCredentials = e),
        (this._appCheckCredentials = t),
        (this._databaseId = n),
        (this._app = r),
        (this.type = `firestore-lite`),
        (this._persistenceKey = `(lite)`),
        (this._settings = new Dm({})),
        (this._settingsFrozen = !1),
        (this._emulatorOptions = {}),
        (this._terminateTask = `notTerminated`));
    }
    get app() {
      if (!this._app)
        throw new H(
          V.FAILED_PRECONDITION,
          `Firestore was not initialized using the Firebase SDK. 'app' is not available`
        );
      return this._app;
    }
    get _initialized() {
      return this._settingsFrozen;
    }
    get _terminated() {
      return this._terminateTask !== `notTerminated`;
    }
    _setSettings(e) {
      if (this._settingsFrozen)
        throw new H(
          V.FAILED_PRECONDITION,
          `Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`
        );
      ((this._settings = new Dm(e)),
        (this._emulatorOptions = e.emulatorOptions || {}),
        e.credentials !== void 0 &&
          (this._authCredentials = (function (e) {
            if (!e) return new Vl();
            switch (e.type) {
              case `firstParty`:
                return new Gl(
                  e.sessionIndex || `0`,
                  e.iamToken || null,
                  e.authTokenFactory || null
                );
              case `provider`:
                return e.client;
              default:
                throw new H(
                  V.INVALID_ARGUMENT,
                  `makeAuthCredentialsProvider failed due to invalid credential type`
                );
            }
          })(e.credentials)));
    }
    _getSettings() {
      return this._settings;
    }
    _getEmulatorOptions() {
      return this._emulatorOptions;
    }
    _freezeSettings() {
      return ((this._settingsFrozen = !0), this._settings);
    }
    _delete() {
      return (
        this._terminateTask === `notTerminated` && (this._terminateTask = this._terminate()),
        this._terminateTask
      );
    }
    async _restart() {
      this._terminateTask === `notTerminated`
        ? await this._terminate()
        : (this._terminateTask = `notTerminated`);
    }
    toJSON() {
      return { app: this._app, databaseId: this._databaseId, settings: this._settings };
    }
    _terminate() {
      return (
        (function (e) {
          let t = wm.get(e);
          t && (L(Cm, `Removing Datastore`), wm.delete(e), t.terminate());
        })(this),
        Promise.resolve()
      );
    }
  };
function km(e, t, n, r = {}) {
  e = lu(e, Om);
  let i = te(t),
    a = e._getSettings(),
    o = { ...a, emulatorOptions: e._getEmulatorOptions() },
    s = `${t}:${n}`;
  (i && (ne(`https://${s}`), ce(`Firestore`, !0)),
    a.host !== Tm &&
      a.host !== s &&
      Il(
        `Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.`
      ));
  let c = { ...a, host: s, ssl: i, emulatorOptions: r };
  if (!we(c, o) && (e._setSettings(c), r.mockUserToken)) {
    let t, n;
    if (typeof r.mockUserToken == `string`) ((t = r.mockUserToken), (n = I.MOCK_USER));
    else {
      t = re(r.mockUserToken, e._app?.options.projectId);
      let i = r.mockUserToken.sub || r.mockUserToken.user_id;
      if (!i)
        throw new H(V.INVALID_ARGUMENT, `mockUserToken must contain 'sub' or 'user_id' field!`);
      n = new I(i);
    }
    e._authCredentials = new Hl(new Bl(t, n));
  }
}
var Am = class e {
    constructor(e, t, n) {
      ((this.converter = t), (this._query = n), (this.type = `query`), (this.firestore = e));
    }
    withConverter(t) {
      return new e(this.firestore, t, this._query);
    }
  },
  jm = class e {
    constructor(e, t, n) {
      ((this.converter = t), (this._key = n), (this.type = `document`), (this.firestore = e));
    }
    get _path() {
      return this._key.path;
    }
    get id() {
      return this._key.path.lastSegment();
    }
    get path() {
      return this._key.path.canonicalString();
    }
    get parent() {
      return new Mm(this.firestore, this.converter, this._key.path.popLast());
    }
    withConverter(t) {
      return new e(this.firestore, t, this._key);
    }
    toJSON() {
      return { type: e._jsonSchemaVersion, referencePath: this._key.toString() };
    }
    static fromJSON(t, n, r) {
      if (uu(n, e._jsonSchema)) return new e(t, r || null, new W(ru.fromString(n.referencePath)));
    }
  };
((jm._jsonSchemaVersion = `firestore/documentReference/1.0`),
  (jm._jsonSchema = { type: G(`string`, jm._jsonSchemaVersion), referencePath: G(`string`) }));
var Mm = class e extends Am {
    constructor(e, t, n) {
      (super(e, t, Gd(n)), (this._path = n), (this.type = `collection`));
    }
    get id() {
      return this._query.path.lastSegment();
    }
    get path() {
      return this._query.path.canonicalString();
    }
    get parent() {
      let e = this._path.popLast();
      return e.isEmpty() ? null : new jm(this.firestore, null, new W(e));
    }
    withConverter(t) {
      return new e(this.firestore, t, this._path);
    }
  },
  Nm = `AsyncQueue`,
  Pm = class {
    constructor(e = Promise.resolve()) {
      ((this.Yu = []),
        (this.ec = !1),
        (this.tc = []),
        (this.nc = null),
        (this.rc = !1),
        (this.sc = !1),
        (this.oc = []),
        (this.M_ = new Qp(this, `async_queue_retry`)),
        (this._c = () => {
          let e = Xp();
          (e && L(Nm, `Visibility state changed to ` + e.visibilityState), this.M_.w_());
        }),
        (this.ac = e));
      let t = Xp();
      t &&
        typeof t.addEventListener == `function` &&
        t.addEventListener(`visibilitychange`, this._c);
    }
    get isShuttingDown() {
      return this.ec;
    }
    enqueueAndForget(e) {
      this.enqueue(e);
    }
    enqueueAndForgetEvenWhileRestricted(e) {
      (this.uc(), this.cc(e));
    }
    enterRestrictedMode(e) {
      if (!this.ec) {
        ((this.ec = !0), (this.sc = e || !1));
        let t = Xp();
        t &&
          typeof t.removeEventListener == `function` &&
          t.removeEventListener(`visibilitychange`, this._c);
      }
    }
    enqueue(e) {
      if ((this.uc(), this.ec)) return new Promise(() => {});
      let t = new zl();
      return this.cc(() =>
        this.ec && this.sc ? Promise.resolve() : (e().then(t.resolve, t.reject), t.promise)
      ).then(() => t.promise);
    }
    enqueueRetryable(e) {
      this.enqueueAndForget(() => (this.Yu.push(e), this.lc()));
    }
    async lc() {
      if (this.Yu.length !== 0) {
        try {
          (await this.Yu[0](), this.Yu.shift(), this.M_.reset());
        } catch (e) {
          if (!Su(e)) throw e;
          L(Nm, `Operation failed with retryable error: ` + e);
        }
        this.Yu.length > 0 && this.M_.p_(() => this.lc());
      }
    }
    cc(e) {
      let t = this.ac.then(
        () => (
          (this.rc = !0),
          e()
            .catch((e) => {
              throw ((this.nc = e), (this.rc = !1), Fl(`INTERNAL UNHANDLED ERROR: `, Fm(e)), e);
            })
            .then((e) => ((this.rc = !1), e))
        )
      );
      return ((this.ac = t), t);
    }
    enqueueAfterDelay(e, t, n) {
      (this.uc(), this.oc.indexOf(e) > -1 && (t = 0));
      let r = lm.createAndSchedule(this, e, t, n, (e) => this.hc(e));
      return (this.tc.push(r), r);
    }
    uc() {
      this.nc && R(47125, { Pc: Fm(this.nc) });
    }
    verifyOperationInProgress() {}
    async Tc() {
      let e;
      do ((e = this.ac), await e);
      while (e !== this.ac);
    }
    Ic(e) {
      for (let t of this.tc) if (t.timerId === e) return !0;
      return !1;
    }
    Ec(e) {
      return this.Tc().then(() => {
        this.tc.sort((e, t) => e.targetTimeMs - t.targetTimeMs);
        for (let t of this.tc) if ((t.skipDelay(), e !== `all` && t.timerId === e)) break;
        return this.Tc();
      });
    }
    Rc(e) {
      this.oc.push(e);
    }
    hc(e) {
      let t = this.tc.indexOf(e);
      this.tc.splice(t, 1);
    }
  };
function Fm(e) {
  let t = e.message || ``;
  return (
    e.stack &&
      (t = e.stack.includes(e.message)
        ? e.stack
        : e.message +
          `
` +
          e.stack),
    t
  );
}
var Im = class extends Om {
  constructor(e, t, n, r) {
    (super(e, t, n, r),
      (this.type = `firestore`),
      (this._queue = new Pm()),
      (this._persistenceKey = r?.name || `[DEFAULT]`));
  }
  async _terminate() {
    if (this._firestoreClient) {
      let e = this._firestoreClient.terminate();
      ((this._queue = new Pm(e)), (this._firestoreClient = void 0), await e);
    }
  }
};
function Lm(e, t) {
  let n = typeof e == `object` ? e : an(),
    r = typeof e == `string` ? e : t || Ju,
    i = en(n, `firestore`).getImmediate({ identifier: r });
  if (!i._initialized) {
    let e = m(`firestore`);
    e && km(i, ...e);
  }
  return i;
}
var Rm = class e {
  constructor(e) {
    this._byteString = e;
  }
  static fromBase64String(t) {
    try {
      return new e(Lu.fromBase64String(t));
    } catch (e) {
      throw new H(V.INVALID_ARGUMENT, `Failed to construct data from Base64 string: ` + e);
    }
  }
  static fromUint8Array(t) {
    return new e(Lu.fromUint8Array(t));
  }
  toBase64() {
    return this._byteString.toBase64();
  }
  toUint8Array() {
    return this._byteString.toUint8Array();
  }
  toString() {
    return `Bytes(base64: ` + this.toBase64() + `)`;
  }
  isEqual(e) {
    return this._byteString.isEqual(e._byteString);
  }
  toJSON() {
    return { type: e._jsonSchemaVersion, bytes: this.toBase64() };
  }
  static fromJSON(t) {
    if (uu(t, e._jsonSchema)) return e.fromBase64String(t.bytes);
  }
};
((Rm._jsonSchemaVersion = `firestore/bytes/1.0`),
  (Rm._jsonSchema = { type: G(`string`, Rm._jsonSchemaVersion), bytes: G(`string`) }));
var zm = class {
    constructor(...e) {
      for (let t = 0; t < e.length; ++t)
        if (e[t].length === 0)
          throw new H(
            V.INVALID_ARGUMENT,
            `Invalid field name at argument $(i + 1). Field names must not be empty.`
          );
      this._internalPath = new au(e);
    }
    isEqual(e) {
      return this._internalPath.isEqual(e._internalPath);
    }
  },
  Bm = class e {
    constructor(e, t) {
      if (!isFinite(e) || e < -90 || e > 90)
        throw new H(
          V.INVALID_ARGUMENT,
          `Latitude must be a number between -90 and 90, but was: ` + e
        );
      if (!isFinite(t) || t < -180 || t > 180)
        throw new H(
          V.INVALID_ARGUMENT,
          `Longitude must be a number between -180 and 180, but was: ` + t
        );
      ((this._lat = e), (this._long = t));
    }
    get latitude() {
      return this._lat;
    }
    get longitude() {
      return this._long;
    }
    isEqual(e) {
      return this._lat === e._lat && this._long === e._long;
    }
    _compareTo(e) {
      return U(this._lat, e._lat) || U(this._long, e._long);
    }
    toJSON() {
      return { latitude: this._lat, longitude: this._long, type: e._jsonSchemaVersion };
    }
    static fromJSON(t) {
      if (uu(t, e._jsonSchema)) return new e(t.latitude, t.longitude);
    }
  };
((Bm._jsonSchemaVersion = `firestore/geoPoint/1.0`),
  (Bm._jsonSchema = {
    type: G(`string`, Bm._jsonSchemaVersion),
    latitude: G(`number`),
    longitude: G(`number`),
  }));
var Vm = class e {
  constructor(e) {
    this._values = (e || []).map((e) => e);
  }
  toArray() {
    return this._values.map((e) => e);
  }
  isEqual(e) {
    return (function (e, t) {
      if (e.length !== t.length) return !1;
      for (let n = 0; n < e.length; ++n) if (e[n] !== t[n]) return !1;
      return !0;
    })(this._values, e._values);
  }
  toJSON() {
    return { type: e._jsonSchemaVersion, vectorValues: this._values };
  }
  static fromJSON(t) {
    if (uu(t, e._jsonSchema)) {
      if (Array.isArray(t.vectorValues) && t.vectorValues.every((e) => typeof e == `number`))
        return new e(t.vectorValues);
      throw new H(V.INVALID_ARGUMENT, `Expected 'vectorValues' field to be a number array`);
    }
  }
};
((Vm._jsonSchemaVersion = `firestore/vectorValue/1.0`),
  (Vm._jsonSchema = { type: G(`string`, Vm._jsonSchemaVersion), vectorValues: G(`object`) }));
function Hm(e, t, n) {
  if ((t = b(t)) instanceof zm) return t._internalPath;
  if (typeof t == `string`) return Wm(e, t);
  throw Gm(`Field path arguments must be of type string or `, e, !1, void 0, n);
}
var Um = RegExp(`[~\\*/\\[\\]]`);
function Wm(e, t, n) {
  if (t.search(Um) >= 0)
    throw Gm(
      `Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,
      e,
      !1,
      void 0,
      n
    );
  try {
    return new zm(...t.split(`.`))._internalPath;
  } catch {
    throw Gm(
      `Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,
      e,
      !1,
      void 0,
      n
    );
  }
}
function Gm(e, t, n, r, i) {
  let a = r && !r.isEmpty(),
    o = i !== void 0,
    s = `Function ${t}() called with invalid data`;
  (n && (s += " (via `toFirestore()`)"), (s += `. `));
  let c = ``;
  return (
    (a || o) &&
      ((c += ` (found`), a && (c += ` in field ${r}`), o && (c += ` in document ${i}`), (c += `)`)),
    new H(V.INVALID_ARGUMENT, s + e + c)
  );
}
var Km = `@firebase/firestore`,
  qm = `4.10.0`,
  Jm = class {
    constructor(e, t, n, r, i) {
      ((this._firestore = e),
        (this._userDataWriter = t),
        (this._key = n),
        (this._document = r),
        (this._converter = i));
    }
    get id() {
      return this._key.path.lastSegment();
    }
    get ref() {
      return new jm(this._firestore, this._converter, this._key);
    }
    exists() {
      return this._document !== null;
    }
    data() {
      if (this._document) {
        if (this._converter) {
          let e = new Ym(this._firestore, this._userDataWriter, this._key, this._document, null);
          return this._converter.fromFirestore(e);
        }
        return this._userDataWriter.convertValue(this._document.data.value);
      }
    }
    _fieldsProto() {
      return this._document?.data.clone().value.mapValue.fields ?? void 0;
    }
    get(e) {
      if (this._document) {
        let t = this._document.data.field(Hm(`DocumentSnapshot.get`, e));
        if (t !== null) return this._userDataWriter.convertValue(t);
      }
    }
  },
  Ym = class extends Jm {
    data() {
      return super.data();
    }
  },
  Xm = class {
    constructor(e, t) {
      ((this.hasPendingWrites = e), (this.fromCache = t));
    }
    isEqual(e) {
      return this.hasPendingWrites === e.hasPendingWrites && this.fromCache === e.fromCache;
    }
  },
  Zm = class e extends Jm {
    constructor(e, t, n, r, i, a) {
      (super(e, t, n, r, a), (this._firestore = e), (this._firestoreImpl = e), (this.metadata = i));
    }
    exists() {
      return super.exists();
    }
    data(e = {}) {
      if (this._document) {
        if (this._converter) {
          let t = new Qm(
            this._firestore,
            this._userDataWriter,
            this._key,
            this._document,
            this.metadata,
            null
          );
          return this._converter.fromFirestore(t, e);
        }
        return this._userDataWriter.convertValue(this._document.data.value, e.serverTimestamps);
      }
    }
    get(e, t = {}) {
      if (this._document) {
        let n = this._document.data.field(Hm(`DocumentSnapshot.get`, e));
        if (n !== null) return this._userDataWriter.convertValue(n, t.serverTimestamps);
      }
    }
    toJSON() {
      if (this.metadata.hasPendingWrites)
        throw new H(
          V.FAILED_PRECONDITION,
          `DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`
        );
      let t = this._document,
        n = {};
      return (
        (n.type = e._jsonSchemaVersion),
        (n.bundle = ``),
        (n.bundleSource = `DocumentSnapshot`),
        (n.bundleName = this._key.toString()),
        !t || !t.isValidDocument() || !t.isFoundDocument()
          ? n
          : (this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields, `previous`),
            (n.bundle = (this._firestore, this.ref.path, `NOT SUPPORTED`)),
            n)
      );
    }
  };
((Zm._jsonSchemaVersion = `firestore/documentSnapshot/1.0`),
  (Zm._jsonSchema = {
    type: G(`string`, Zm._jsonSchemaVersion),
    bundleSource: G(`string`, `DocumentSnapshot`),
    bundleName: G(`string`),
    bundle: G(`string`),
  }));
var Qm = class extends Zm {
    data(e = {}) {
      return super.data(e);
    }
  },
  $m = class e {
    constructor(e, t, n, r) {
      ((this._firestore = e),
        (this._userDataWriter = t),
        (this._snapshot = r),
        (this.metadata = new Xm(r.hasPendingWrites, r.fromCache)),
        (this.query = n));
    }
    get docs() {
      let e = [];
      return (this.forEach((t) => e.push(t)), e);
    }
    get size() {
      return this._snapshot.docs.size;
    }
    get empty() {
      return this.size === 0;
    }
    forEach(e, t) {
      this._snapshot.docs.forEach((n) => {
        e.call(
          t,
          new Qm(
            this._firestore,
            this._userDataWriter,
            n.key,
            n,
            new Xm(this._snapshot.mutatedKeys.has(n.key), this._snapshot.fromCache),
            this.query.converter
          )
        );
      });
    }
    docChanges(e = {}) {
      let t = !!e.includeMetadataChanges;
      if (t && this._snapshot.excludesMetadataChanges)
        throw new H(
          V.INVALID_ARGUMENT,
          `To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`
        );
      return (
        (this._cachedChanges && this._cachedChangesIncludeMetadataChanges === t) ||
          ((this._cachedChanges = (function (e, t) {
            if (e._snapshot.oldDocs.isEmpty()) {
              let t = 0;
              return e._snapshot.docChanges.map((n) => {
                let r = new Qm(
                  e._firestore,
                  e._userDataWriter,
                  n.doc.key,
                  n.doc,
                  new Xm(e._snapshot.mutatedKeys.has(n.doc.key), e._snapshot.fromCache),
                  e.query.converter
                );
                return (n.doc, { type: `added`, doc: r, oldIndex: -1, newIndex: t++ });
              });
            }
            {
              let n = e._snapshot.oldDocs;
              return e._snapshot.docChanges
                .filter((e) => t || e.type !== 3)
                .map((t) => {
                  let r = new Qm(
                      e._firestore,
                      e._userDataWriter,
                      t.doc.key,
                      t.doc,
                      new Xm(e._snapshot.mutatedKeys.has(t.doc.key), e._snapshot.fromCache),
                      e.query.converter
                    ),
                    i = -1,
                    a = -1;
                  return (
                    t.type !== 0 && ((i = n.indexOf(t.doc.key)), (n = n.delete(t.doc.key))),
                    t.type !== 1 && ((n = n.add(t.doc)), (a = n.indexOf(t.doc.key))),
                    { type: eh(t.type), doc: r, oldIndex: i, newIndex: a }
                  );
                });
            }
          })(this, t)),
          (this._cachedChangesIncludeMetadataChanges = t)),
        this._cachedChanges
      );
    }
    toJSON() {
      if (this.metadata.hasPendingWrites)
        throw new H(
          V.FAILED_PRECONDITION,
          `QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`
        );
      let t = {};
      ((t.type = e._jsonSchemaVersion),
        (t.bundleSource = `QuerySnapshot`),
        (t.bundleName = Yl.newId()),
        this._firestore._databaseId.database,
        this._firestore._databaseId.projectId);
      let n = [],
        r = [],
        i = [];
      return (
        this.docs.forEach((e) => {
          e._document !== null &&
            (n.push(e._document),
            r.push(
              this._userDataWriter.convertObjectMap(
                e._document.data.value.mapValue.fields,
                `previous`
              )
            ),
            i.push(e.ref.path));
        }),
        (t.bundle = (this._firestore, this.query._query, t.bundleName, `NOT SUPPORTED`)),
        t
      );
    }
  };
function eh(e) {
  switch (e) {
    case 0:
      return `added`;
    case 2:
    case 3:
      return `modified`;
    case 1:
      return `removed`;
    default:
      return R(61501, { type: e });
  }
}
(($m._jsonSchemaVersion = `firestore/querySnapshot/1.0`),
  ($m._jsonSchema = {
    type: G(`string`, $m._jsonSchemaVersion),
    bundleSource: G(`string`, `QuerySnapshot`),
    bundleName: G(`string`),
    bundle: G(`string`),
  }),
  (function (e, t = !0) {
    (Ml(nn),
      $t(
        new x(
          `firestore`,
          (e, { instanceIdentifier: n, options: r }) => {
            let i = e.getProvider(`app`).getImmediate(),
              a = new Im(
                new Ul(e.getProvider(`auth-internal`)),
                new ql(i, e.getProvider(`app-check-internal`)),
                Xu(i, n),
                i
              );
            return ((r = { useFetchStreams: t, ...r }), a._setSettings(r), a);
          },
          `PUBLIC`
        ).setMultipleInstances(!0)
      ),
      D(Km, qm, e),
      D(Km, qm, `esm2020`));
  })());
export { qa as a, ns as i, dl as n, rn as o, Pi as r, Lm as t };
